!function t(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return o(n?n:t)},l,l.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){"use strict";e.exports.Composer=t(2),e.exports.CopyPass=t(10),e.exports.BlendMode={Normal:1,Dissolve:2,Darken:3,Multiply:4,ColorBurn:5,LinearBurn:6,DarkerColor:7,Lighten:8,Screen:9,ColorDodge:10,LinearDodge:11,LighterColor:12,Overlay:13,SoftLight:14,HardLight:15,VividLight:16,LinearLight:17,PinLight:18,HardMix:19,Difference:20,Exclusion:21,Substract:22,Divide:23}},{10:10,2:2}],2:[function(t,e,n){"use strict";function i(t,e){var n=t.getPixelRatio();this.width=Math.floor(t.context.canvas.width/n)||1,this.height=Math.floor(t.context.canvas.height/n)||1,this.output=null,this.input=null,this.read=null,this.write=null,this.settings=e||{},this.useRGBA=this.settings.useRGBA||!1,this.renderer=t,this.copyPass=new r(this.settings),this.defaultMaterial=new o.MeshBasicMaterial({color:65280,wireframe:!1}),this.scene=new o.Scene,this.quad=new o.Mesh(new o.PlaneBufferGeometry(1,1),this.defaultMaterial),this.scene.add(this.quad),this.camera=new o.OrthographicCamera(1,1,1,1,-1e4,1e4),this.front=new o.WebGLRenderTarget(1,1,{minFilter:void 0!==this.settings.minFilter?this.settings.minFilter:o.LinearFilter,magFilter:void 0!==this.settings.magFilter?this.settings.magFilter:o.LinearFilter,wrapS:void 0!==this.settings.wrapS?this.settings.wrapS:o.ClampToEdgeWrapping,wrapT:void 0!==this.settings.wrapT?this.settings.wrapT:o.ClampToEdgeWrapping,format:this.useRGBA?o.RGBAFormat:o.RGBFormat,type:void 0!==this.settings.type?this.settings.type:o.UnsignedByteType,stencilBuffer:void 0!==this.settings.stencilBuffer?this.settings.stencilBuffer:!0}),this.back=this.front.clone(),this.startTime=Date.now(),this.passes={},this.setSize(this.width,this.height)}var o=t(49),r=t(10),s=t(4),a=t(3);e.exports=i,i.prototype.swapBuffers=function(){this.output=this.write,this.input=this.read;var t=this.write;this.write=this.read,this.read=t},i.prototype.render=function(t,e,n,i){n&&this.swapBuffers(),this.renderer.render(t,e,i?i:this.write,!0),i||this.swapBuffers()},i.prototype.toScreen=function(){this.quad.material=this.copyPass.shader,this.quad.material.uniforms.tInput.value=this.read,this.quad.material.uniforms.resolution.value.set(this.width,this.height),this.renderer.render(this.scene,this.camera)},i.prototype.toTexture=function(t){this.quad.material=this.copyPass.shader,this.quad.material.uniforms.tInput.value=this.read,this.renderer.render(this.scene,this.camera,t,!1)},i.prototype.pass=function(t){if(t instanceof s)this.passStack(t);else{if(t instanceof o.ShaderMaterial&&(this.quad.material=t),t instanceof a)return void t.run(this);t.isSim||(this.quad.material.uniforms.tInput.value=this.read),this.quad.material.uniforms.resolution.value.set(this.width,this.height),this.quad.material.uniforms.time.value=.001*(Date.now()-this.startTime),this.renderer.render(this.scene,this.camera,this.write,!1),this.swapBuffers()}},i.prototype.passStack=function(t){t.getPasses().forEach(function(t){this.pass(t)}.bind(this))},i.prototype.reset=function(){this.read=this.front,this.write=this.back,this.output=this.write,this.input=this.read},i.prototype.setSource=function(t){this.quad.material=this.copyPass.shader,this.quad.material.uniforms.tInput.value=t,this.renderer.render(this.scene,this.camera,this.write,!0),this.swapBuffers()},i.prototype.setSize=function(t,e){this.width=t,this.height=e,this.camera.projectionMatrix.makeOrthographic(t/-2,t/2,e/2,e/-2,this.camera.near,this.camera.far),this.quad.scale.set(t,e,1);var n=this.front.clone();n.width=t,n.height=e,this.quad.material instanceof a&&(this.quad.material.uniforms.tInput.value=n),this.front=n,n=this.back.clone(),n.width=t,n.height=e,this.back=n}},{10:10,3:3,4:4,49:49}],3:[function(t,e,n){"use strict";function i(){this.shader=null,this.loaded=null,this.params={},this.isSim=!1}var o=t(49),r=t(13);e.exports=i,i.prototype.setShader=function(t,e){this.shader=r(t,e)},i.prototype.run=function(t){t.pass(this.shader)},i.prototype.getOfflineTexture=function(t,e,n){return new o.WebGLRenderTarget(t,e,{minFilter:o.LinearFilter,magFilter:o.LinearFilter,format:n?o.RGBAFormat:o.RGBFormat})}},{13:13,49:49}],4:[function(t,e,n){"use strict";function i(t){this.passItems=[],this.shadersPool=t,this.passes=[]}e.exports=i,i.prototype.addPass=function(t,e,n,i){var o=0,r={shaderName:t,enabled:e||!1};return this.passItems.push(r),o=this.passItems.length,this.updatePasses(),i?this.movePassToIndex(this.passItems[o],i):o-1},i.prototype.removePass=function(t){this.passItems.splice(t,1),this.updatePasses()},i.prototype.enablePass=function(t){this.passItems[t].enabled=!0,this.updatePasses()},i.prototype.disablePass=function(t){this.passItems[t].enabled=!1,this.updatePasses()},i.prototype.isPassEnabled=function(t){return this.passItems[t].enabled},i.prototype.movePassToIndex=function(t,e){return this.passItems.splice(e,0,this.passItems.splice(t,1)[0]),this.updatePasses(),e},i.prototype.reverse=function(){this.passItems.reverse(),this.updatePasses()},i.prototype.updatePasses=function(){this.passes=this.shadersPool.getPasses(this.passItems),this.passItems.forEach(function(t,e){void 0===t.params&&(t.params=JSON.parse(JSON.stringify(this.passes[e].params)))}.bind(this))},i.prototype.getPasses=function(){return this.passes}},{}],5:[function(t,e,n){"use strict";function i(t){r.call(this),t=t||{},this.setShader(s,a),this.params.mode=t.mode||1,this.params.opacity=t.opacity||1,this.params.tInput2=t.tInput2||null,this.params.resolution2=t.resolution2||new o.Vector2,this.params.sizeMode=t.sizeMode||1,this.params.aspectRatio=t.aspectRatio||1,this.params.aspectRatio2=t.aspectRatio2||1}var o=t(49),r=t(3),s="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}",a="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D tInput;\nuniform sampler2D tInput2;\nuniform vec2 resolution;\nuniform vec2 resolution2;\nuniform float aspectRatio;\nuniform float aspectRatio2;\nuniform int mode;\nuniform int sizeMode;\nuniform float opacity;\n\nvec2 vUv2;\n\nfloat applyOverlayToChannel( float base, float blend ) {\n\n  return (base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend)));\n\n}\n\nfloat applySoftLightToChannel( float base, float blend ) {\n\n  return ((blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend)));\n\n}\n\nfloat applyColorBurnToChannel( float base, float blend ) {\n\n  return ((blend == 0.0) ? blend : max((1.0 - ((1.0 - base) / blend)), 0.0));\n\n}\n\nfloat applyColorDodgeToChannel( float base, float blend ) {\n\n  return ((blend == 1.0) ? blend : min(base / (1.0 - blend), 1.0));\n\n}\n\nfloat applyLinearBurnToChannel( float base, float blend ) {\n\n  return max(base + blend - 1., 0.0 );\n\n}\n\nfloat applyLinearDodgeToChannel( float base, float blend ) {\n\n  return min( base + blend, 1. );\n\n}\n\nfloat applyLinearLightToChannel( float base, float blend ) {\n\n  return ( blend < .5 ) ? applyLinearBurnToChannel( base, 2. * blend ) : applyLinearDodgeToChannel( base, 2. * ( blend - .5 ) );\n\n}\n\nvoid main() {\n\n  vUv2 = vUv;\n  \n  if( sizeMode == 1 ) {\n    \n    if( aspectRatio2 > aspectRatio ) {\n      vUv2.x = vUv.x * aspectRatio / aspectRatio2;\n      vUv2.x += .5 * ( 1. - aspectRatio / aspectRatio2 ); \n      vUv2.y = vUv.y;\n    }\n\n    if( aspectRatio2 < aspectRatio ) {\n      vUv2.x = vUv.x;\n      vUv2.y = vUv.y * aspectRatio2 / aspectRatio;\n      vUv2.y += .5 * ( 1. - aspectRatio2 / aspectRatio );\n    }\n\n  }\n\n  vec4 base = texture2D( tInput, vUv );\n  vec4 blend = texture2D( tInput2, vUv2 );\n\n  if( mode == 1 ) { // normal\n\n    gl_FragColor = base;\n    gl_FragColor.a *= opacity;\n    return;\n\n  }\n\n  if( mode == 2 ) { // dissolve\n\n  }\n\n  if( mode == 3 ) { // darken\n\n    gl_FragColor = min( base, blend );\n    return;\n\n  }\n\n  if( mode == 4 ) { // multiply\n\n    gl_FragColor = base * blend;\n    return;\n\n  }\n\n  if( mode == 5 ) { // color burn\n\n    gl_FragColor = vec4(\n      applyColorBurnToChannel( base.r, blend.r ),\n      applyColorBurnToChannel( base.g, blend.g ),\n      applyColorBurnToChannel( base.b, blend.b ),\n      applyColorBurnToChannel( base.a, blend.a )\n    );\n    return;\n\n  }\n\n  if( mode == 6 ) { // linear burn\n\n    gl_FragColor = max(base + blend - 1.0, 0.0);\n    return;\n\n  }\n\n  if( mode == 7 ) { // darker color\n\n  }\n\n  if( mode == 8 ) { // lighten\n\n    gl_FragColor = max( base, blend );\n    return;\n\n  }\n\n  if( mode == 9 ) { // screen\n\n    gl_FragColor = (1.0 - ((1.0 - base) * (1.0 - blend)));\n    gl_FragColor = gl_FragColor * opacity + base * ( 1. - opacity );\n    return;\n\n  }\n\n  if( mode == 10 ) { // color dodge\n\n    gl_FragColor = vec4(\n      applyColorDodgeToChannel( base.r, blend.r ),\n      applyColorDodgeToChannel( base.g, blend.g ),\n      applyColorDodgeToChannel( base.b, blend.b ),\n      applyColorDodgeToChannel( base.a, blend.a )\n    );\n    return;\n\n  }\n\n  if( mode == 11 ) { // linear dodge\n\n    gl_FragColor = min(base + blend, 1.0);\n    return;\n\n  }\n\n  if( mode == 12 ) { // lighter color\n\n  }\n\n  if( mode == 13 ) { // overlay\n\n    gl_FragColor = gl_FragColor = vec4( \n      applyOverlayToChannel( base.r, blend.r ),\n      applyOverlayToChannel( base.g, blend.g ),\n      applyOverlayToChannel( base.b, blend.b ),\n      applyOverlayToChannel( base.a, blend.a )\n    );\n    gl_FragColor = gl_FragColor * opacity + base * ( 1. - opacity );\n  \n    return;\n\n  }\n\n  if( mode == 14 ) { // soft light\n\n    gl_FragColor = vec4( \n      applySoftLightToChannel( base.r, blend.r ),\n      applySoftLightToChannel( base.g, blend.g ),\n      applySoftLightToChannel( base.b, blend.b ),\n      applySoftLightToChannel( base.a, blend.a )\n    );\n    return;\n\n  }\n\n  if( mode == 15 ) { // hard light\n\n    gl_FragColor = vec4( \n      applyOverlayToChannel( base.r, blend.r ),\n      applyOverlayToChannel( base.g, blend.g ),\n      applyOverlayToChannel( base.b, blend.b ),\n      applyOverlayToChannel( base.a, blend.a )\n    );\n    gl_FragColor = gl_FragColor * opacity + base * ( 1. - opacity );\n    return;\n\n  }\n\n  if( mode == 16 ) { // vivid light\n\n  }\n\n  if( mode == 17 ) { // linear light\n\n    gl_FragColor = vec4( \n      applyLinearLightToChannel( base.r, blend.r ),\n      applyLinearLightToChannel( base.g, blend.g ),\n      applyLinearLightToChannel( base.b, blend.b ),\n      applyLinearLightToChannel( base.a, blend.a )\n    );\n    return;\n\n  }\n\n  if( mode == 18 ) { // pin light\n\n  }\n\n  if( mode == 19 ) { // hard mix\n\n  }\n\n  if( mode == 20 ) { // difference\n\n    gl_FragColor = abs( base - blend );\n    gl_FragColor.a = base.a + blend.b;\n    return;\n\n  }\n\n  if( mode == 21 ) { // exclusion\n\n    gl_FragColor = base + blend - 2. * base * blend;\n    \n  }\n\n  if( mode == 22 ) { // substract\n\n  }\n\n  if( mode == 23 ) { // divide\n\n  }\n\n  gl_FragColor = vec4( 1., 0., 1., 1. );\n\n}";e.exports=i,i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.run=function(t){this.shader.uniforms.mode.value=this.params.mode,this.shader.uniforms.opacity.value=this.params.opacity,this.shader.uniforms.tInput2.value=this.params.tInput2,this.shader.uniforms.sizeMode.value=this.params.sizeMode,this.shader.uniforms.aspectRatio.value=this.params.aspectRatio,this.shader.uniforms.aspectRatio2.value=this.params.aspectRatio2,t.pass(this.shader)}},{3:3,49:49}],6:[function(t,e,n){"use strict";function i(t){r.call(this),t=t||{},this.composer=null,this.tmpTexture=this.getOfflineTexture(t.width,t.height,!0),this.blurPass=new u(2),this.blendPass=new c,this.zoomBlur=new l,this.brightnessContrastPass=new h,this.width=t.width||512,this.height=t.height||512,this.params.blurAmount=t.blurAmount||2,this.params.applyZoomBlur=t.applyZoomBlur||!1,this.params.zoomBlurStrength=t.zoomBlurStrength||.2,this.params.useTexture=t.useTexture||!1,this.params.zoomBlurCenter=t.zoomBlurCenter||new o.Vector2(.5,.5),this.params.blendMode=t.blendMode||a.Screen,this.params.glowTexture=null}var o=t(49),r=t(3),s=t(2),a=t(1).BlendMode,u=t(8),c=t(5),l=t(12),h=t(9);e.exports=i,i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.run=function(t){this.composer||(this.composer=new s(t.renderer,{useRGBA:!0}),this.composer.setSize(this.width,this.height)),this.composer.reset(),this.params.useTexture===!0?this.composer.setSource(this.params.glowTexture):this.composer.setSource(t.output),this.blurPass.params.amount=this.params.blurAmount,this.composer.pass(this.blurPass),this.params.applyZoomBlur&&(this.zoomBlur.params.center.set(.5,.5),this.zoomBlur.params.strength=this.params.zoomBlurStrength,this.composer.pass(this.zoomBlur)),this.params.useTexture===!0&&(this.blendPass.params.mode=a.Screen,this.blendPass.params.tInput=this.params.glowTexture,t.pass(this.blendPass)),this.blendPass.params.mode=this.params.blendMode,this.blendPass.params.tInput2=this.composer.output,t.pass(this.blendPass)}},{1:1,12:12,2:2,3:3,49:49,5:5,8:8,9:9}],7:[function(t,e,n){"use strict";function i(t,e){r.call(this),this.setShader(s,a),this.params.delta=new o.Vector2(t||0,e||0)}var o=t(49),r=t(3),s="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}",a="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D tInput;\nuniform vec2 delta;\nuniform vec2 resolution;\n\nvoid main() {\n\n  vec4 sum = vec4( 0. );\n  vec2 inc = delta / resolution;\n\n  sum += texture2D( tInput, ( vUv - inc * 4. ) ) * 0.051;\n  sum += texture2D( tInput, ( vUv - inc * 3. ) ) * 0.0918;\n  sum += texture2D( tInput, ( vUv - inc * 2. ) ) * 0.12245;\n  sum += texture2D( tInput, ( vUv - inc * 1. ) ) * 0.1531;\n  sum += texture2D( tInput, ( vUv + inc * 0. ) ) * 0.1633;\n  sum += texture2D( tInput, ( vUv + inc * 1. ) ) * 0.1531;\n  sum += texture2D( tInput, ( vUv + inc * 2. ) ) * 0.12245;\n  sum += texture2D( tInput, ( vUv + inc * 3. ) ) * 0.0918;\n  sum += texture2D( tInput, ( vUv + inc * 4. ) ) * 0.051;\n\n  gl_FragColor = sum;\n\n}";e.exports=i,i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.run=function(t){this.shader.uniforms.delta.value.copy(this.params.delta),t.pass(this.shader)}},{3:3,49:49}],8:[function(t,e,n){"use strict";function i(t){o.call(this),t=t||2,this.boxPass=new r(t,t),this.params.amount=t}var o=t(3),r=t(7);e.exports=i,i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.run=function(t){var e=this.params.amount;this.boxPass.params.delta.set(e,0),t.pass(this.boxPass),this.boxPass.params.delta.set(0,e),t.pass(this.boxPass)}},{3:3,7:7}],9:[function(t,e,n){"use strict";function i(t,e){o.call(this),this.setShader(r,s),this.params.brightness=t||1,this.params.contrast=e||1}var o=t(3),r="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}",s="#define GLSLIFY 1\nuniform float brightness;\nuniform float contrast;\nuniform sampler2D tInput;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n  vec3 color = texture2D(tInput, vUv).rgb;\n  vec3 colorContrasted = (color) * contrast;\n  vec3 bright = colorContrasted + vec3(brightness,brightness,brightness);\n  gl_FragColor.rgb = bright;\n  gl_FragColor.a = 1.;\n\n}";e.exports=i,i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.run=function(t){this.shader.uniforms.brightness.value=this.params.brightness,this.shader.uniforms.contrast.value=this.params.contrast,t.pass(this.shader)}},{3:3}],10:[function(t,e,n){"use strict";function i(){o.call(this),this.setShader(r,s)}var o=t(3),r="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}",s="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D tInput;\n\nvoid main() {\n  gl_FragColor = texture2D( tInput, vUv );\n\n}";e.exports=i,i.prototype=Object.create(o.prototype),i.prototype.constructor=i},{3:3}],11:[function(t,e,n){"use strict";function i(t,e){o.call(this),this.setShader(r,s),this.params.boost=t||2,this.params.reduction=e||2}var o=t(3),r="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}",s="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D tInput;\nuniform vec2 resolution;\n\nuniform float reduction;\nuniform float boost;\n\nvoid main() {\n\n  vec4 color = texture2D( tInput, vUv );\n\n  vec2 center = resolution * 0.5;\n  float vignette = distance( center, gl_FragCoord.xy ) / resolution.x;\n  vignette = boost - vignette * reduction;\n\n  color.rgb *= vignette;\n  gl_FragColor = color;\n\n}";e.exports=i,i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.run=function(t){this.shader.uniforms.boost.value=this.params.boost,this.shader.uniforms.reduction.value=this.params.reduction,t.pass(this.shader)}},{3:3}],12:[function(t,e,n){"use strict";function i(t){r.call(this),t=t||{},this.setShader(s,a),this.params.center=new o.Vector2(t.centerX||.5,t.centerY||.5),this.params.strength=t.strength||.1}var o=t(49),r=t(3),s="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}",a="#define GLSLIFY 1\nuniform sampler2D tInput;\nuniform vec2 center;\nuniform float strength;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\nfloat random(vec3 scale,float seed){return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);}\n\nvoid main(){\n  vec4 color=vec4(0.0);\n  float total=0.0;\n  vec2 toCenter=center-vUv*resolution;\n  float offset=random(vec3(12.9898,78.233,151.7182),0.0);\n  for(float t=0.0;t<=40.0;t++){\n    float percent=(t+offset)/40.0;\n    float weight=4.0*(percent-percent*percent);\n    vec4 sample=texture2D(tInput,vUv+toCenter*percent*strength/resolution);\n    sample.rgb*=sample.a;\n    color+=sample*weight;\n    total+=weight;\n  }\n  gl_FragColor=color/total;\n  gl_FragColor.rgb/=gl_FragColor.a+0.00001;\n}";e.exports=i,i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.run=function(t){this.shader.uniforms.center.value.set(t.width*this.params.center.x,t.height*this.params.center.y),this.shader.uniforms.strength.value=this.params.strength,t.pass(this.shader)}},{3:3,49:49}],13:[function(t,e,n){"use strict";var i=t(49);e.exports=function(t,e){for(var n,o,r,s,a=/uniform\s+([^\s]+)\s+([^\s]+)\s*;/gi,u=/uniform\s+([^\s]+)\s+([^\s]+)\s*\[\s*(\w+)\s*\]*\s*;/gi,c={sampler2D:{type:"t",value:function(){return new i.Texture}},samplerCube:{type:"t",value:function(){}},bool:{type:"b",value:function(){return 0}},"int":{type:"i",value:function(){return 0}},"float":{type:"f",value:function(){return 0}},vec2:{type:"v2",value:function(){return new i.Vector2}},vec3:{type:"v3",value:function(){return new i.Vector3}},vec4:{type:"v4",value:function(){return new i.Vector4}},bvec2:{type:"v2",value:function(){return new i.Vector2}},bvec3:{type:"v3",value:function(){return new i.Vector3}},bvec4:{type:"v4",value:function(){return new i.Vector4}},ivec2:{type:"v2",value:function(){return new i.Vector2}},ivec3:{type:"v3",value:function(){return new i.Vector3}},ivec4:{type:"v4",value:function(){return new i.Vector4}},mat2:{type:"v2",value:function(){return new i.Matrix2}},mat3:{type:"v3",value:function(){return new i.Matrix3}},mat4:{type:"v4",value:function(){return new i.Matrix4}}},l={"float":{type:"fv",value:function(){return[]}},vec3:{type:"v3v",value:function(){return[]}}},h={resolution:{type:"v2",value:new i.Vector2(1,1),"default":!0},time:{type:"f",value:Date.now(),"default":!0},tInput:{type:"t",value:new i.Texture,"default":!0}};null!==(n=a.exec(e));)n.index===a.lastIndex&&a.lastIndex++,o=n[1],r=n[2],h[r]={type:c[o].type,value:c[o].value()};for(;null!==(n=u.exec(e));)n.index===a.lastIndex&&a.lastIndex++,o=n[1],r=n[2],s=n[3],h[r]={type:l[o].type,value:l[o].value()};var d=new i.ShaderMaterial({uniforms:h,vertexShader:t,fragmentShader:e,shading:i.FlatShading,depthWrite:!1,depthTest:!1,transparent:!0});return d}},{49:49}],14:[function(t,e,n){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(t){return"function"==typeof t}function r(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!r(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,n,i,r,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],a(n))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),n.apply(this,r)}else if(s(n))for(r=Array.prototype.slice.call(arguments,1),c=n.slice(),i=c.length,u=0;i>u;u++)c[u].apply(this,r);return!0},i.prototype.addListener=function(t,e){var n;if(!o(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,o(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned&&(n=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!o(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},i.prototype.removeListener=function(t,e){var n,i,r,a;if(!o(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],r=n.length,i=-1,n===e||o(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(n)){for(a=r;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){i=a;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],o(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?o(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(o(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},{}],15:[function(t,e,n){function i(){l=!1,a.length?c=a.concat(c):h=-1,c.length&&o()}function o(){if(!l){var t=setTimeout(i);l=!0;for(var e=c.length;e;){for(a=c,c=[];++h<e;)a&&a[h].run();h=-1,e=c.length}a=null,l=!1,clearTimeout(t)}}function r(t,e){this.fun=t,this.array=e}function s(){}var a,u=e.exports={},c=[],l=!1,h=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new r(t,e)),1!==c.length||l||setTimeout(o,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],16:[function(t,e,n){function i(t,e,n,i){return n=window.getComputedStyle,i=n?n(t):t.currentStyle,i?i[e.replace(/-(\w)/gi,function(t,e){return e.toUpperCase()})]:void 0}e.exports=i},{}],17:[function(t,e,n){e.exports=t(19),e.exports.color=t(18)},{18:18,19:19}],18:[function(t,e,n){var i=e.exports=i||{};i.color=i.color||{},i.utils=i.utils||{},i.utils.common=function(){var t=Array.prototype.forEach,e=Array.prototype.slice;return{BREAK:{},extend:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(e[n])||(t[n]=e[n])},this),t},defaults:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(t[n])&&(t[n]=e[n])},this),t},compose:function(){var t=e.call(arguments);return function(){for(var n=e.call(arguments),i=t.length-1;i>=0;i--)n=[t[i].apply(this,n)];return n[0]}},each:function(e,n,i){if(t&&e.forEach===t)e.forEach(n,i);else if(e.length===e.length+0){for(var o=0,r=e.length;r>o;o++)if(o in e&&n.call(i,e[o],o)===this.BREAK)return}else for(var o in e)if(n.call(i,e[o],o)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():e.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!==t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return t===!1||t===!0},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}}(),i.color.toString=function(t){return function(e){if(1==e.a||t.isUndefined(e.a)){for(var n=e.hex.toString(16);n.length<6;)n="0"+n;return"#"+n}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}}(i.utils.common),i.Color=i.color.Color=function(t,e,n,i){function o(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(s(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(s(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function r(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(a(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(a(this),this.__state.space="HSV"),this.__state[e]=t}})}function s(t,n,o){if("HEX"===t.__state.space)t.__state[n]=e.component_from_hex(t.__state.hex,o);else{if("HSV"!==t.__state.space)throw"Corrupted color state";i.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function a(t){var n=e.rgb_to_hsv(t.r,t.g,t.b);i.extend(t.__state,{s:n.s,v:n.v}),i.isNaN(n.h)?i.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=n.h}var u=function(){if(this.__state=t.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return u.COMPONENTS=["r","g","b","h","s","v","hex","a"],i.extend(u.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),o(u.prototype,"r",2),o(u.prototype,"g",1),o(u.prototype,"b",0),r(u.prototype,"h"),r(u.prototype,"s"),r(u.prototype,"v"),Object.defineProperty(u.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(u.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),u}(i.color.interpret=function(t,e){var n,i,o=function(){i=!1;var t=arguments.length>1?e.toArray(arguments):arguments[0];return e.each(r,function(o){return o.litmus(t)?(e.each(o.conversions,function(o,r){return n=o.read(t),i===!1&&n!==!1?(i=n,n.conversionName=r,n.conversion=o,e.BREAK):void 0}),e.BREAK):void 0}),i},r=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null===e?!1:{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null===e?!1:{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:t},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null===e?!1:{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:t},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null===e?!1:{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3!=t.length?!1:{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4!=t.length?!1:{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a)?{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}:!1},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)?{space:"RGB",r:t.r,g:t.g,b:t.b}:!1},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a)?{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}:!1},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)?{space:"HSV",h:t.h,s:t.s,v:t.v}:!1},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return o}(i.color.toString,i.utils.common),i.color.math=function(){var t;return{hsv_to_rgb:function(t,e,n){var i=Math.floor(t/60)%6,o=t/60-Math.floor(t/60),r=n*(1-e),s=n*(1-o*e),a=n*(1-(1-o)*e),u=[[n,a,r],[s,n,r],[r,n,a],[r,s,n],[a,r,n],[n,r,s]][i];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var i,o,r=Math.min(t,e,n),s=Math.max(t,e,n),a=s-r;return 0==s?{h:NaN,s:0,v:0}:(o=a/s,i=t==s?(e-n)/a:e==s?2+(n-t)/a:4+(t-e)/a,i/=6,0>i&&(i+=1),{h:360*i,s:o,v:s/255})},rgb_to_hex:function(t,e,n){var i=this.hex_with_component(0,2,t);return i=this.hex_with_component(i,1,e),i=this.hex_with_component(i,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(e,n,i){return i<<(t=8*n)|e&~(255<<t)}}}(),i.color.toString,i.utils.common)},{}],19:[function(t,e,n){var i=e.exports=i||{};i.gui=i.gui||{},i.utils=i.utils||{},i.controllers=i.controllers||{},i.dom=i.dom||{},i.color=i.color||{},i.utils.css=function(){return{load:function(t,e){e=e||document;
var n=e.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t,e.getElementsByTagName("head")[0].appendChild(n)},inject:function(t,e){e=e||document;var n=document.createElement("style");n.type="text/css",n.innerHTML=t,e.getElementsByTagName("head")[0].appendChild(n)}}}(),i.utils.common=function(){var t=Array.prototype.forEach,e=Array.prototype.slice;return{BREAK:{},extend:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(e[n])||(t[n]=e[n])},this),t},defaults:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(t[n])&&(t[n]=e[n])},this),t},compose:function(){var t=e.call(arguments);return function(){for(var n=e.call(arguments),i=t.length-1;i>=0;i--)n=[t[i].apply(this,n)];return n[0]}},each:function(e,n,i){if(t&&e.forEach===t)e.forEach(n,i);else if(e.length===e.length+0){for(var o=0,r=e.length;r>o;o++)if(o in e&&n.call(i,e[o],o)===this.BREAK)return}else for(var o in e)if(n.call(i,e[o],o)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():e.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!==t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return t===!1||t===!0},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}}(),i.controllers.Controller=function(t){var e=function(t,e){this.initialValue=t[e],this.domElement=document.createElement("div"),this.object=t,this.property=e,this.__onChange=void 0,this.__onFinishChange=void 0};return t.extend(e.prototype,{onChange:function(t){return this.__onChange=t,this},onFinishChange:function(t){return this.__onFinishChange=t,this},setValue:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),e}(i.utils.common),i.dom.dom=function(t){function e(e){if("0"===e||t.isUndefined(e))return 0;var n=e.match(o);return t.isNull(n)?0:parseFloat(n[1])}var n={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},i={};t.each(n,function(e,n){t.each(e,function(t){i[t]=n})});var o=/(\d+(\.\d+)?)px/,r={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(e,n,i){t.isUndefined(n)&&(n=!0),t.isUndefined(i)&&(i=!0),e.style.position="absolute",n&&(e.style.left=0,e.style.right=0),i&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,n,o,r){o=o||{};var s=i[n];if(!s)throw new Error("Event type "+n+" not supported.");var a=document.createEvent(s);switch(s){case"MouseEvents":var u=o.x||o.clientX||0,c=o.y||o.clientY||0;a.initMouseEvent(n,o.bubbles||!1,o.cancelable||!0,window,o.clickCount||1,0,0,u,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var l=a.initKeyboardEvent||a.initKeyEvent;t.defaults(o,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),l(n,o.bubbles||!1,o.cancelable,window,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.keyCode,o.charCode);break;default:a.initEvent(n,o.bubbles||!1,o.cancelable||!0)}t.defaults(a,r),e.dispatchEvent(a)},bind:function(t,e,n,i){return i=i||!1,t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n),r},unbind:function(t,e,n,i){return i=i||!1,t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent&&t.detachEvent("on"+e,n),r},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1==n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return r},removeClass:function(t,e){if(e)if(void 0===t.className);else if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),i=n.indexOf(e);-1!=i&&(n.splice(i,1),t.className=n.join(" "))}else t.className=void 0;return r},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var n=getComputedStyle(t);return e(n["border-left-width"])+e(n["border-right-width"])+e(n["padding-left"])+e(n["padding-right"])+e(n.width)},getHeight:function(t){var n=getComputedStyle(t);return e(n["border-top-width"])+e(n["border-bottom-width"])+e(n["padding-top"])+e(n["padding-bottom"])+e(n.height)},getOffset:function(t){var e={left:0,top:0};if(t.offsetParent)do e.left+=t.offsetLeft,e.top+=t.offsetTop;while(t=t.offsetParent);return e},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}};return r}(i.utils.common),i.controllers.OptionController=function(t,e,n){var i=function(t,o,r){i.superclass.call(this,t,o);var s=this;if(this.__select=document.createElement("select"),n.isArray(r)){var a={};n.each(r,function(t){a[t]=t}),r=a}n.each(r,function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),s.__select.appendChild(n)}),this.updateDisplay(),e.bind(this.__select,"change",function(){var t=this.options[this.selectedIndex].value;s.setValue(t)}),this.domElement.appendChild(this.__select)};return i.superclass=t,n.extend(i.prototype,t.prototype,{setValue:function(t){var e=i.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),e},updateDisplay:function(){return this.__select.value=this.getValue(),i.superclass.prototype.updateDisplay.call(this)}}),i}(i.controllers.Controller,i.dom.dom,i.utils.common),i.controllers.NumberController=function(t,e){function n(t){return t=t.toString(),t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var i=function(t,o,r){i.superclass.call(this,t,o),r=r||{},this.__min=r.min,this.__max=r.max,this.__step=r.step,e.isUndefined(this.__step)?0==this.initialValue?this.__impliedStep=1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=n(this.__impliedStep)};return i.superclass=t,e.extend(i.prototype,t.prototype,{setValue:function(t){return void 0!==this.__min&&t<this.__min?t=this.__min:void 0!==this.__max&&t>this.__max&&(t=this.__max),void 0!==this.__step&&t%this.__step!=0&&(t=Math.round(t/this.__step)*this.__step),i.superclass.prototype.setValue.call(this,t)},min:function(t){return this.__min=t,this},max:function(t){return this.__max=t,this},step:function(t){return this.__step=t,this}}),i}(i.controllers.Controller,i.utils.common),i.controllers.NumberControllerBox=function(t,e,n){function i(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}var o=function(t,i,r){function s(){var t=parseFloat(d.__input.value);n.isNaN(t)||d.setValue(t)}function a(){s(),d.__onFinishChange&&d.__onFinishChange.call(d,d.getValue())}function u(t){e.bind(window,"mousemove",c),e.bind(window,"mouseup",l),h=t.clientY}function c(t){var e=h-t.clientY;d.setValue(d.getValue()+e*d.__impliedStep),h=t.clientY}function l(){e.unbind(window,"mousemove",c),e.unbind(window,"mouseup",l)}this.__truncationSuspended=!1,o.superclass.call(this,t,i,r);var h,d=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"change",s),e.bind(this.__input,"blur",a),e.bind(this.__input,"mousedown",u),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&(d.__truncationSuspended=!0,this.blur(),d.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return o.superclass=t,n.extend(o.prototype,t.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():i(this.getValue(),this.__precision),o.superclass.prototype.updateDisplay.call(this)}}),o}(i.controllers.NumberController,i.dom.dom,i.utils.common),i.controllers.NumberControllerSlider=function(t,e,n,i,o){function r(t,e,n,i,o){return i+(o-i)*((t-e)/(n-e))}var s=function(t,n,i,o,a){function u(t){e.bind(window,"mousemove",c),e.bind(window,"mouseup",l),c(t)}function c(t){t.preventDefault();var n=e.getOffset(h.__background),i=e.getWidth(h.__background);return h.setValue(r(t.clientX,n.left,n.left+i,h.__min,h.__max)),!1}function l(){e.unbind(window,"mousemove",c),e.unbind(window,"mouseup",l),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}s.superclass.call(this,t,n,{min:i,max:o,step:a});var h=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),e.bind(this.__background,"mousedown",u),e.addClass(this.__background,"slider"),e.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return s.superclass=t,s.useDefaultStyles=function(){n.inject(o)},i.extend(s.prototype,t.prototype,{updateDisplay:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",s.superclass.prototype.updateDisplay.call(this)}}),s}(i.controllers.NumberController,i.dom.dom,i.utils.css,i.utils.common,".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),i.controllers.FunctionController=function(t,e,n){var i=function(t,n,o){i.superclass.call(this,t,n);var r=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===o?"Fire":o,e.bind(this.__button,"click",function(t){return t.preventDefault(),r.fire(),!1}),e.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return i.superclass=t,n.extend(i.prototype,t.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),i}(i.controllers.Controller,i.dom.dom,i.utils.common),i.controllers.BooleanController=function(t,e,n){var i=function(t,n){function o(){r.setValue(!r.__prev)}i.superclass.call(this,t,n);var r=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),e.bind(this.__checkbox,"change",o,!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return i.superclass=t,n.extend(i.prototype,t.prototype,{setValue:function(t){var e=i.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),e},updateDisplay:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,i.superclass.prototype.updateDisplay.call(this)}}),i}(i.controllers.Controller,i.dom.dom,i.utils.common),i.color.toString=function(t){return function(e){if(1==e.a||t.isUndefined(e.a)){for(var n=e.hex.toString(16);n.length<6;)n="0"+n;return"#"+n}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}}(i.utils.common),i.color.interpret=function(t,e){var n,i,o=function(){i=!1;var t=arguments.length>1?e.toArray(arguments):arguments[0];return e.each(r,function(o){return o.litmus(t)?(e.each(o.conversions,function(o,r){return n=o.read(t),i===!1&&n!==!1?(i=n,n.conversionName=r,n.conversion=o,e.BREAK):void 0}),e.BREAK):void 0}),i},r=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null===e?!1:{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null===e?!1:{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:t},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null===e?!1:{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:t},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null===e?!1:{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3!=t.length?!1:{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4!=t.length?!1:{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a)?{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}:!1},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)?{space:"RGB",r:t.r,g:t.g,b:t.b}:!1},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a)?{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}:!1},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)?{space:"HSV",h:t.h,s:t.s,v:t.v}:!1},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return o}(i.color.toString,i.utils.common),i.GUI=i.gui.GUI=function(t,e,n,i,o,r,s,a,u,c,l,h,d,p,f){function m(t,e,n,r){if(void 0===e[n])throw new Error("Object "+e+' has no property "'+n+'"');var s;if(r.color)s=new l(e,n);else{var a=[e,n].concat(r.factoryArgs);s=i.apply(t,a)}r.before instanceof o&&(r.before=r.before.__li),_(t,s),p.addClass(s.domElement,"c");var u=document.createElement("span");p.addClass(u,"property-name"),u.innerHTML=s.property;var c=document.createElement("div");c.appendChild(u),c.appendChild(s.domElement);var h=v(t,c,r.before);return p.addClass(h,N.CLASS_CONTROLLER_ROW),p.addClass(h,typeof s.getValue()),g(t,h,s),t.__controllers.push(s),s}function v(t,e,n){var i=document.createElement("li");return e&&i.appendChild(e),n?t.__ul.insertBefore(i,params.before):t.__ul.appendChild(i),t.onResize(),i}function g(t,e,n){if(n.__li=e,n.__gui=t,f.extend(n,{options:function(e){return arguments.length>1?(n.remove(),m(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[f.toArray(arguments)]})):f.isArray(e)||f.isObject(e)?(n.remove(),m(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[e]})):void 0},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof u){var i=new a(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});f.each(["updateDisplay","onChange","onFinishChange"],function(t){var e=n[t],o=i[t];n[t]=i[t]=function(){var t=Array.prototype.slice.call(arguments);return e.apply(n,t),o.apply(i,t)}}),p.addClass(e,"has-slider"),n.domElement.insertBefore(i.domElement,n.domElement.firstElementChild)}else if(n instanceof a){var o=function(e){return f.isNumber(n.__min)&&f.isNumber(n.__max)?(n.remove(),m(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):e};n.min=f.compose(o,n.min),n.max=f.compose(o,n.max)}else n instanceof r?(p.bind(e,"click",function(){p.fakeEvent(n.__checkbox,"click")}),p.bind(n.__checkbox,"click",function(t){t.stopPropagation()})):n instanceof s?(p.bind(e,"click",function(){p.fakeEvent(n.__button,"click")}),p.bind(e,"mouseover",function(){p.addClass(n.__button,"hover")}),p.bind(e,"mouseout",function(){p.removeClass(n.__button,"hover")})):n instanceof l&&(p.addClass(e,"color"),n.updateDisplay=f.compose(function(t){return e.style.borderLeftColor=n.__color.toString(),t},n.updateDisplay),n.updateDisplay());n.setValue=f.compose(function(e){return t.getRoot().__preset_select&&n.isModified()&&A(t.getRoot(),!0),e},n.setValue)}function _(t,e){var n=t.getRoot(),i=n.__rememberedObjects.indexOf(e.object);if(-1!=i){var o=n.__rememberedObjectIndecesToControllers[i];if(void 0===o&&(o={},n.__rememberedObjectIndecesToControllers[i]=o),o[e.property]=e,n.load&&n.load.remembered){var r,s=n.load.remembered;if(s[t.preset])r=s[t.preset];else{if(!s[k])return;r=s[k]}if(r[i]&&void 0!==r[i][e.property]){var a=r[i][e.property];e.initialValue=a,e.setValue(a)}}}}function y(t,e){return document.location.href+"."+e}function b(t){function e(){c.style.display=t.useLocalStorage?"block":"none"}var n=t.__save_row=document.createElement("li");p.addClass(t.domElement,"has-save"),t.__ul.insertBefore(n,t.__ul.firstChild),p.addClass(n,"save-row");var i=document.createElement("span");i.innerHTML="&nbsp;",p.addClass(i,"button gears");var o=document.createElement("span");o.innerHTML="Save",p.addClass(o,"button"),p.addClass(o,"save");var r=document.createElement("span");r.innerHTML="New",p.addClass(r,"button"),p.addClass(r,"save-as");var s=document.createElement("span");s.innerHTML="Revert",p.addClass(s,"button"),p.addClass(s,"revert");var a=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?f.each(t.load.remembered,function(e,n){M(t,n,n==t.preset)}):M(t,k,!1),p.bind(a,"change",function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value}),n.appendChild(a),n.appendChild(i),n.appendChild(o),n.appendChild(r),n.appendChild(s),F){var u=document.getElementById("dg-save-locally"),c=document.getElementById("dg-local-explain");u.style.display="block";var l=document.getElementById("dg-local-storage");"true"===localStorage.getItem(y(t,"isLocal"))&&l.setAttribute("checked","checked"),e(),p.bind(l,"change",function(){t.useLocalStorage=!t.useLocalStorage,e()})}var h=document.getElementById("dg-new-constructor");p.bind(h,"keydown",function(t){!t.metaKey||67!==t.which&&67!=t.keyCode||L.hide()}),p.bind(i,"click",function(){h.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),L.show(),h.focus(),h.select()}),p.bind(o,"click",function(){t.save()}),p.bind(r,"click",function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)}),p.bind(s,"click",function(){t.revert()})}function x(t){function e(e){return e.preventDefault(),o=e.clientX,p.addClass(t.__closeButton,N.CLASS_DRAG),p.bind(window,"mousemove",n),p.bind(window,"mouseup",i),!1}function n(e){return e.preventDefault(),t.width+=o-e.clientX,t.onResize(),o=e.clientX,!1}function i(){p.removeClass(t.__closeButton,N.CLASS_DRAG),p.unbind(window,"mousemove",n),p.unbind(window,"mouseup",i)}t.__resize_handle=document.createElement("div"),f.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var o;p.bind(t.__resize_handle,"mousedown",e),p.bind(t.__closeButton,"mousedown",e),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function w(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function E(t,e){var n={};return f.each(t.__rememberedObjects,function(i,o){var r={},s=t.__rememberedObjectIndecesToControllers[o];f.each(s,function(t,n){r[n]=e?t.initialValue:t.getValue()}),n[o]=r}),n}function M(t,e,n){var i=document.createElement("option");i.innerHTML=e,i.value=e,t.__preset_select.appendChild(i),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function S(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value==t.preset&&(t.__preset_select.selectedIndex=e)}function A(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];e?n.innerHTML=n.value+"*":n.innerHTML=n.value}function C(t){0!=t.length&&h(function(){C(t)}),f.each(t,function(t){t.updateDisplay()})}t.inject(n);var L,R,P="dg",O=72,T=20,k="Default",F=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}(),I=!0,B=!1,D=[],N=function(t){function e(){localStorage.setItem(y(i,"gui"),JSON.stringify(i.getSaveObject()))}function n(){var t=i.getRoot();t.width+=1,f.defer(function(){t.width-=1})}var i=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),p.addClass(this.domElement,P),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],t=t||{},t=f.defaults(t,{autoPlace:!0,width:N.DEFAULT_WIDTH}),t=f.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace}),f.isUndefined(t.load)?t.load={preset:k}:t.preset&&(t.load.preset=t.preset),f.isUndefined(t.parent)&&t.hideable&&D.push(this),t.resizable=f.isUndefined(t.parent)&&t.resizable,t.autoPlace&&f.isUndefined(t.scrollable)&&(t.scrollable=!0);var o=F&&"true"===localStorage.getItem(y(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},preset:{get:function(){return i.parent?i.getRoot().preset:t.load.preset},set:function(e){i.parent?i.getRoot().preset=e:t.load.preset=e,S(this),i.revert()}},width:{get:function(){return t.width},set:function(e){t.width=e,w(i,e)}},name:{get:function(){return t.name},set:function(e){t.name=e,s&&(s.innerHTML=t.name)}},closed:{get:function(){return t.closed},set:function(e){t.closed=e,t.closed?p.addClass(i.__ul,N.CLASS_CLOSED):p.removeClass(i.__ul,N.CLASS_CLOSED),this.onResize(),i.__closeButton&&(i.__closeButton.innerHTML=e?N.TEXT_OPEN:N.TEXT_CLOSED)}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return o},set:function(t){F&&(o=t,t?p.bind(window,"unload",e):p.unbind(window,"unload",e),localStorage.setItem(y(i,"isLocal"),t))}}}),f.isUndefined(t.parent)){if(t.closed=!1,p.addClass(this.domElement,N.CLASS_MAIN),p.makeSelectable(this.domElement,!1),F&&o){i.useLocalStorage=!0;var r=localStorage.getItem(y(this,"gui"));r&&(t.load=JSON.parse(r))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=N.TEXT_CLOSED,p.addClass(this.__closeButton,N.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),p.bind(this.__closeButton,"click",function(){i.closed=!i.closed})}else{void 0===t.closed&&(t.closed=!0);var s=document.createTextNode(t.name);p.addClass(s,"controller-name");var a=v(i,s),u=function(t){return t.preventDefault(),i.closed=!i.closed,!1};p.addClass(this.__ul,N.CLASS_CLOSED),p.addClass(a,"title"),p.bind(a,"click",u),t.closed||(this.closed=!1)}t.autoPlace&&(f.isUndefined(t.parent)&&(I&&(R=document.createElement("div"),p.addClass(R,P),p.addClass(R,N.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(R),I=!1),R.appendChild(this.domElement),p.addClass(this.domElement,N.CLASS_AUTO_PLACE)),this.parent||w(i,t.width)),p.bind(window,"resize",function(){i.onResize()}),p.bind(this.__ul,"webkitTransitionEnd",function(){i.onResize()}),p.bind(this.__ul,"transitionend",function(){i.onResize()}),p.bind(this.__ul,"oTransitionEnd",function(){i.onResize()}),this.onResize(),t.resizable&&x(this);i.getRoot();t.parent||n()};return N.toggleHide=function(){B=!B,f.each(D,function(t){t.domElement.style.zIndex=B?-999:999,t.domElement.style.opacity=B?0:1})},N.CLASS_AUTO_PLACE="a",N.CLASS_AUTO_PLACE_CONTAINER="ac",N.CLASS_MAIN="main",N.CLASS_CONTROLLER_ROW="cr",N.CLASS_TOO_TALL="taller-than-window",N.CLASS_CLOSED="closed",N.CLASS_CLOSE_BUTTON="close-button",N.CLASS_DRAG="drag",N.DEFAULT_WIDTH=245,N.TEXT_CLOSED="Close Controls",N.TEXT_OPEN="Open Controls",p.bind(window,"keydown",function(t){"text"===document.activeElement.type||t.which!==O&&t.keyCode!=O||N.toggleHide()},!1),f.extend(N.prototype,{add:function(t,e){return m(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return m(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.slice(this.__controllers.indexOf(t),1);var e=this;f.defer(function(){e.onResize()})},destroy:function(){this.autoPlace&&R.removeChild(this.domElement)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new N(e);this.__folders[t]=n;var i=v(this,n.domElement);return p.addClass(i,"folder"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=p.getOffset(t.__ul).top,n=0;f.each(t.__ul.childNodes,function(e){t.autoPlace&&e===t.__save_row||(n+=p.getHeight(e))}),window.innerHeight-e-T<n?(p.addClass(t.domElement,N.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-T+"px"):(p.removeClass(t.domElement,N.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&f.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},remember:function(){if(f.isUndefined(L)&&(L=new d,L.domElement.innerHTML=e),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;f.each(Array.prototype.slice.call(arguments),function(e){0==t.__rememberedObjects.length&&b(t),-1==t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)}),this.autoPlace&&w(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=E(this)),t.folders={},f.each(this.__folders,function(e,n){t.folders[n]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=E(this),A(this,!1)},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[k]=E(this,!0)),this.load.remembered[t]=E(this),this.preset=t,M(this,t,!0)},revert:function(t){f.each(this.__controllers,function(e){this.getRoot().load.remembered?_(t||this.getRoot(),e):e.setValue(e.initialValue)},this),f.each(this.__folders,function(t){t.revert(t)}),t||A(this.getRoot(),!1)},listen:function(t){var e=0==this.__listening.length;this.__listening.push(t),e&&C(this.__listening)}}),N}(i.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n",i.controllers.factory=function(t,e,n,i,o,r,s){
return function(a,u){var c=a[u];return s.isArray(arguments[2])||s.isObject(arguments[2])?new t(a,u,arguments[2]):s.isNumber(c)?s.isNumber(arguments[2])&&s.isNumber(arguments[3])?new n(a,u,arguments[2],arguments[3]):new e(a,u,{min:arguments[2],max:arguments[3]}):s.isString(c)?new i(a,u):s.isFunction(c)?new o(a,u,""):s.isBoolean(c)?new r(a,u):void 0}}(i.controllers.OptionController,i.controllers.NumberControllerBox,i.controllers.NumberControllerSlider,i.controllers.StringController=function(t,e,n){var i=function(t,n){function o(){s.setValue(s.__input.value)}function r(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}i.superclass.call(this,t,n);var s=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"keyup",o),e.bind(this.__input,"change",o),e.bind(this.__input,"blur",r),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return i.superclass=t,n.extend(i.prototype,t.prototype,{updateDisplay:function(){return e.isActive(this.__input)||(this.__input.value=this.getValue()),i.superclass.prototype.updateDisplay.call(this)}}),i}(i.controllers.Controller,i.dom.dom,i.utils.common),i.controllers.FunctionController,i.controllers.BooleanController,i.utils.common),i.controllers.Controller,i.controllers.BooleanController,i.controllers.FunctionController,i.controllers.NumberControllerBox,i.controllers.NumberControllerSlider,i.controllers.OptionController,i.controllers.ColorController=function(t,e,n,i,o){function r(t,e,n,i){t.style.background="",o.each(u,function(o){t.style.cssText+="background: "+o+"linear-gradient("+e+", "+n+" 0%, "+i+" 100%); "})}function s(t){t.style.background="",t.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",t.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var a=function(t,u){function c(t){p(t),e.bind(window,"mousemove",p),e.bind(window,"mouseup",l)}function l(){e.unbind(window,"mousemove",p),e.unbind(window,"mouseup",l)}function h(){var t=i(this.value);t!==!1?(m.__color.__state=t,m.setValue(m.__color.toOriginal())):this.value=m.__color.toString()}function d(){e.unbind(window,"mousemove",f),e.unbind(window,"mouseup",d)}function p(t){t.preventDefault();var n=e.getWidth(m.__saturation_field),i=e.getOffset(m.__saturation_field),o=(t.clientX-i.left+document.body.scrollLeft)/n,r=1-(t.clientY-i.top+document.body.scrollTop)/n;return r>1?r=1:0>r&&(r=0),o>1?o=1:0>o&&(o=0),m.__color.v=r,m.__color.s=o,m.setValue(m.__color.toOriginal()),!1}function f(t){t.preventDefault();var n=e.getHeight(m.__hue_field),i=e.getOffset(m.__hue_field),o=1-(t.clientY-i.top+document.body.scrollTop)/n;return o>1?o=1:0>o&&(o=0),m.__color.h=360*o,m.setValue(m.__color.toOriginal()),!1}a.superclass.call(this,t,u),this.__color=new n(this.getValue()),this.__temp=new n(0);var m=this;this.domElement=document.createElement("div"),e.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",e.bind(this.__input,"keydown",function(t){13===t.keyCode&&h.call(this)}),e.bind(this.__input,"blur",h),e.bind(this.__selector,"mousedown",function(t){e.addClass(this,"drag").bind(window,"mouseup",function(t){e.removeClass(m.__selector,"drag")})});var v=document.createElement("div");o.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),o.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),o.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),o.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),o.extend(v.style,{width:"100%",height:"100%",background:"none"}),r(v,"top","rgba(0,0,0,0)","#000"),o.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),s(this.__hue_field),o.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),e.bind(this.__saturation_field,"mousedown",c),e.bind(this.__field_knob,"mousedown",c),e.bind(this.__hue_field,"mousedown",function(t){f(t),e.bind(window,"mousemove",f),e.bind(window,"mouseup",d)}),this.__saturation_field.appendChild(v),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};a.superclass=t,o.extend(a.prototype,t.prototype,{updateDisplay:function(){var t=i(this.getValue());if(t!==!1){var e=!1;o.each(n.COMPONENTS,function(n){return o.isUndefined(t[n])||o.isUndefined(this.__color.__state[n])||t[n]===this.__color.__state[n]?void 0:(e=!0,{})},this),e&&o.extend(this.__color.__state,t)}o.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var s=this.__color.v<.5||this.__color.s>.5?255:0,a=255-s;o.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+s+","+s+","+s+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,r(this.__saturation_field,"left","#fff",this.__temp.toString()),o.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+s+","+s+","+s+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}});var u=["-moz-","-o-","-webkit-","-ms-",""];return a}(i.controllers.Controller,i.dom.dom,i.color.Color=function(t,e,n,i){function o(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(s(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(s(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function r(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(a(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(a(this),this.__state.space="HSV"),this.__state[e]=t}})}function s(t,n,o){if("HEX"===t.__state.space)t.__state[n]=e.component_from_hex(t.__state.hex,o);else{if("HSV"!==t.__state.space)throw"Corrupted color state";i.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function a(t){var n=e.rgb_to_hsv(t.r,t.g,t.b);i.extend(t.__state,{s:n.s,v:n.v}),i.isNaN(n.h)?i.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=n.h}var u=function(){if(this.__state=t.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return u.COMPONENTS=["r","g","b","h","s","v","hex","a"],i.extend(u.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),o(u.prototype,"r",2),o(u.prototype,"g",1),o(u.prototype,"b",0),r(u.prototype,"h"),r(u.prototype,"s"),r(u.prototype,"v"),Object.defineProperty(u.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(u.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),u}(i.color.interpret,i.color.math=function(){var t;return{hsv_to_rgb:function(t,e,n){var i=Math.floor(t/60)%6,o=t/60-Math.floor(t/60),r=n*(1-e),s=n*(1-o*e),a=n*(1-(1-o)*e),u=[[n,a,r],[s,n,r],[r,n,a],[r,s,n],[a,r,n],[n,r,s]][i];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var i,o,r=Math.min(t,e,n),s=Math.max(t,e,n),a=s-r;return 0==s?{h:NaN,s:0,v:0}:(o=a/s,i=t==s?(e-n)/a:e==s?2+(n-t)/a:4+(t-e)/a,i/=6,0>i&&(i+=1),{h:360*i,s:o,v:s/255})},rgb_to_hex:function(t,e,n){var i=this.hex_with_component(0,2,t);return i=this.hex_with_component(i,1,e),i=this.hex_with_component(i,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(e,n,i){return i<<(t=8*n)|e&~(255<<t)}}}(),i.color.toString,i.utils.common),i.color.interpret,i.utils.common),i.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)}}(),i.dom.CenteredDiv=function(t,e){var n=function(){this.backgroundElement=document.createElement("div"),e.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),t.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),e.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;t.bind(this.backgroundElement,"click",function(){n.hide()})};return n.prototype.show=function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),e.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})},n.prototype.hide=function(){var e=this,n=function(){e.domElement.style.display="none",e.backgroundElement.style.display="none",t.unbind(e.domElement,"webkitTransitionEnd",n),t.unbind(e.domElement,"transitionend",n),t.unbind(e.domElement,"oTransitionEnd",n)};t.bind(this.domElement,"webkitTransitionEnd",n),t.bind(this.domElement,"transitionend",n),t.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-t.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-t.getHeight(this.domElement)/2+"px"},n}(i.dom.dom,i.utils.common),i.dom.dom,i.utils.common)},{}],20:[function(t,e,n){function i(t,e,n){var i=c[e];if("undefined"==typeof i&&(i=r(e)),i){if(void 0===n)return t.style[i];"number"==typeof n&&(n+=l[i]||""),t.style[i]=n}}function o(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,e[n])}function r(t){var e=u(t),n=a(e);return c[e]=c[t]=c[n]=n,n}function s(){2===arguments.length?o(arguments[0],arguments[1]):i(arguments[0],arguments[1],arguments[2])}var a=t(21),u=t(22),c={"float":"cssFloat"},l={};["top","right","bottom","left","width","height","fontSize","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","padding","margin","perspective"].forEach(function(t){l[t]="px"}),e.exports=s,e.exports.set=s,e.exports.get=function(t,e){return Array.isArray(e)?e.reduce(function(e,n){return e[n]=i(t,n||""),e},{}):i(t,e||"")}},{21:21,22:22}],21:[function(t,e,n){var i=null;e.exports=function(t){var e=["Moz","Khtml","Webkit","O","ms"],n=t.charAt(0).toUpperCase()+t.slice(1);if(i||(i=document.createElement("div")),t in i.style)return t;for(var o=e.length;o--;)if(e[o]+n in i.style)return e[o]+n;return!1}},{}],22:[function(t,e,n){function i(t){return o(t).replace(/\s(\w)/g,function(t,e){return e.toUpperCase()})}var o=t(23);e.exports=i},{23:23}],23:[function(t,e,n){function i(t){return o(t).replace(/[\W_]+(.|$)/g,function(t,e){return e?" "+e:""})}var o=t(24);e.exports=i},{24:24}],24:[function(t,e,n){function i(t){return s.test(t)?t.toLowerCase():(u.test(t)&&(t=o(t)),a.test(t)&&(t=r(t)),t.toLowerCase())}function o(t){return t.replace(c,function(t,e){return e?" "+e:""})}function r(t){return t.replace(l,function(t,e,n){return e+" "+n.toLowerCase().split("").join(" ")})}e.exports=i;var s=/\s/,a=/[a-z][A-Z]/,u=/[\W_]/,c=/[\W_]+(.|$)/g,l=/(.)([A-Z]+)/g},{}],25:[function(t,e,n){n.glMatrix=t(26),n.mat2=t(27),n.mat2d=t(28),n.mat3=t(29),n.mat4=t(30),n.quat=t(31),n.vec2=t(32),n.vec3=t(33),n.vec4=t(34)},{26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34}],26:[function(t,e,n){var i={};i.EPSILON=1e-6,i.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,i.RANDOM=Math.random,i.setMatrixArrayType=function(t){GLMAT_ARRAY_TYPE=t};var o=Math.PI/180;i.toRadian=function(t){return t*o},e.exports=i},{}],27:[function(t,e,n){var i=t(26),o={};o.create=function(){var t=new i.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},o.clone=function(t){var e=new i.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},o.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},o.invert=function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],s=n*r-o*i;return s?(s=1/s,t[0]=r*s,t[1]=-i*s,t[2]=-o*s,t[3]=n*s,t):null},o.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},o.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},o.multiply=function(t,e,n){var i=e[0],o=e[1],r=e[2],s=e[3],a=n[0],u=n[1],c=n[2],l=n[3];return t[0]=i*a+r*u,t[1]=o*a+s*u,t[2]=i*c+r*l,t[3]=o*c+s*l,t},o.mul=o.multiply,o.rotate=function(t,e,n){var i=e[0],o=e[1],r=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=i*u+r*a,t[1]=o*u+s*a,t[2]=i*-a+r*u,t[3]=o*-a+s*u,t},o.scale=function(t,e,n){var i=e[0],o=e[1],r=e[2],s=e[3],a=n[0],u=n[1];return t[0]=i*a,t[1]=o*a,t[2]=r*u,t[3]=s*u,t},o.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},o.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},o.LDU=function(t,e,n,i){return t[2]=i[2]/i[0],n[0]=i[0],n[1]=i[1],n[3]=i[3]-t[2]*n[1],[t,e,n]},e.exports=o},{26:26}],28:[function(t,e,n){var i=t(26),o={};o.create=function(){var t=new i.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},o.clone=function(t){var e=new i.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},o.invert=function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],s=e[4],a=e[5],u=n*r-i*o;return u?(u=1/u,t[0]=r*u,t[1]=-i*u,t[2]=-o*u,t[3]=n*u,t[4]=(o*a-r*s)*u,t[5]=(i*s-n*a)*u,t):null},o.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},o.multiply=function(t,e,n){var i=e[0],o=e[1],r=e[2],s=e[3],a=e[4],u=e[5],c=n[0],l=n[1],h=n[2],d=n[3],p=n[4],f=n[5];return t[0]=i*c+r*l,t[1]=o*c+s*l,t[2]=i*h+r*d,t[3]=o*h+s*d,t[4]=i*p+r*f+a,t[5]=o*p+s*f+u,t},o.mul=o.multiply,o.rotate=function(t,e,n){var i=e[0],o=e[1],r=e[2],s=e[3],a=e[4],u=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=i*l+r*c,t[1]=o*l+s*c,t[2]=i*-c+r*l,t[3]=o*-c+s*l,t[4]=a,t[5]=u,t},o.scale=function(t,e,n){var i=e[0],o=e[1],r=e[2],s=e[3],a=e[4],u=e[5],c=n[0],l=n[1];return t[0]=i*c,t[1]=o*c,t[2]=r*l,t[3]=s*l,t[4]=a,t[5]=u,t},o.translate=function(t,e,n){var i=e[0],o=e[1],r=e[2],s=e[3],a=e[4],u=e[5],c=n[0],l=n[1];return t[0]=i,t[1]=o,t[2]=r,t[3]=s,t[4]=i*c+r*l+a,t[5]=o*c+s*l+u,t},o.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t[4]=0,t[5]=0,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},o.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},o.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.exports=o},{26:26}],29:[function(t,e,n){var i=t(26),o={};o.create=function(){var t=new i.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},o.clone=function(t){var e=new i.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.transpose=function(t,e){if(t===e){var n=e[1],i=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},o.invert=function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=l*s-a*c,d=-l*r+a*u,p=c*r-s*u,f=n*h+i*d+o*p;return f?(f=1/f,t[0]=h*f,t[1]=(-l*i+o*c)*f,t[2]=(a*i-o*s)*f,t[3]=d*f,t[4]=(l*n-o*u)*f,t[5]=(-a*n+o*r)*f,t[6]=p*f,t[7]=(-c*n+i*u)*f,t[8]=(s*n-i*r)*f,t):null},o.adjoint=function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8];return t[0]=s*l-a*c,t[1]=o*c-i*l,t[2]=i*a-o*s,t[3]=a*u-r*l,t[4]=n*l-o*u,t[5]=o*r-n*a,t[6]=r*c-s*u,t[7]=i*u-n*c,t[8]=n*s-i*r,t},o.determinant=function(t){var e=t[0],n=t[1],i=t[2],o=t[3],r=t[4],s=t[5],a=t[6],u=t[7],c=t[8];return e*(c*r-s*u)+n*(-c*o+s*a)+i*(u*o-r*a)},o.multiply=function(t,e,n){var i=e[0],o=e[1],r=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],d=n[0],p=n[1],f=n[2],m=n[3],v=n[4],g=n[5],_=n[6],y=n[7],b=n[8];return t[0]=d*i+p*s+f*c,t[1]=d*o+p*a+f*l,t[2]=d*r+p*u+f*h,t[3]=m*i+v*s+g*c,t[4]=m*o+v*a+g*l,t[5]=m*r+v*u+g*h,t[6]=_*i+y*s+b*c,t[7]=_*o+y*a+b*l,t[8]=_*r+y*u+b*h,t},o.mul=o.multiply,o.translate=function(t,e,n){var i=e[0],o=e[1],r=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],d=n[0],p=n[1];return t[0]=i,t[1]=o,t[2]=r,t[3]=s,t[4]=a,t[5]=u,t[6]=d*i+p*s+c,t[7]=d*o+p*a+l,t[8]=d*r+p*u+h,t},o.rotate=function(t,e,n){var i=e[0],o=e[1],r=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],d=Math.sin(n),p=Math.cos(n);return t[0]=p*i+d*s,t[1]=p*o+d*a,t[2]=p*r+d*u,t[3]=p*s-d*i,t[4]=p*a-d*o,t[5]=p*u-d*r,t[6]=c,t[7]=l,t[8]=h,t},o.scale=function(t,e,n){var i=n[0],o=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},o.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},o.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},o.fromQuat=function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],s=n+n,a=i+i,u=o+o,c=n*s,l=i*s,h=i*a,d=o*s,p=o*a,f=o*u,m=r*s,v=r*a,g=r*u;return t[0]=1-h-f,t[3]=l-g,t[6]=d+v,t[1]=l+g,t[4]=1-c-f,t[7]=p-m,t[2]=d-v,t[5]=p+m,t[8]=1-c-h,t},o.normalFromMat4=function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=e[9],d=e[10],p=e[11],f=e[12],m=e[13],v=e[14],g=e[15],_=n*a-i*s,y=n*u-o*s,b=n*c-r*s,x=i*u-o*a,w=i*c-r*a,E=o*c-r*u,M=l*m-h*f,S=l*v-d*f,A=l*g-p*f,C=h*v-d*m,L=h*g-p*m,R=d*g-p*v,P=_*R-y*L+b*C+x*A-w*S+E*M;return P?(P=1/P,t[0]=(a*R-u*L+c*C)*P,t[1]=(u*A-s*R-c*S)*P,t[2]=(s*L-a*A+c*M)*P,t[3]=(o*L-i*R-r*C)*P,t[4]=(n*R-o*A+r*S)*P,t[5]=(i*A-n*L-r*M)*P,t[6]=(m*E-v*w+g*x)*P,t[7]=(v*b-f*E-g*y)*P,t[8]=(f*w-m*b+g*_)*P,t):null},o.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.exports=o},{26:26}],30:[function(t,e,n){var i=t(26),o={};o.create=function(){var t=new i.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.clone=function(t){var e=new i.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.transpose=function(t,e){if(t===e){var n=e[1],i=e[2],o=e[3],r=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=r,t[11]=e[14],t[12]=o,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},o.invert=function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=e[9],d=e[10],p=e[11],f=e[12],m=e[13],v=e[14],g=e[15],_=n*a-i*s,y=n*u-o*s,b=n*c-r*s,x=i*u-o*a,w=i*c-r*a,E=o*c-r*u,M=l*m-h*f,S=l*v-d*f,A=l*g-p*f,C=h*v-d*m,L=h*g-p*m,R=d*g-p*v,P=_*R-y*L+b*C+x*A-w*S+E*M;return P?(P=1/P,t[0]=(a*R-u*L+c*C)*P,t[1]=(o*L-i*R-r*C)*P,t[2]=(m*E-v*w+g*x)*P,t[3]=(d*w-h*E-p*x)*P,t[4]=(u*A-s*R-c*S)*P,t[5]=(n*R-o*A+r*S)*P,t[6]=(v*b-f*E-g*y)*P,t[7]=(l*E-d*b+p*y)*P,t[8]=(s*L-a*A+c*M)*P,t[9]=(i*A-n*L-r*M)*P,t[10]=(f*w-m*b+g*_)*P,t[11]=(h*b-l*w-p*_)*P,t[12]=(a*S-s*C-u*M)*P,t[13]=(n*C-i*S+o*M)*P,t[14]=(m*y-f*x-v*_)*P,t[15]=(l*x-h*y+d*_)*P,t):null},o.adjoint=function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=e[9],d=e[10],p=e[11],f=e[12],m=e[13],v=e[14],g=e[15];return t[0]=a*(d*g-p*v)-h*(u*g-c*v)+m*(u*p-c*d),t[1]=-(i*(d*g-p*v)-h*(o*g-r*v)+m*(o*p-r*d)),t[2]=i*(u*g-c*v)-a*(o*g-r*v)+m*(o*c-r*u),t[3]=-(i*(u*p-c*d)-a*(o*p-r*d)+h*(o*c-r*u)),t[4]=-(s*(d*g-p*v)-l*(u*g-c*v)+f*(u*p-c*d)),t[5]=n*(d*g-p*v)-l*(o*g-r*v)+f*(o*p-r*d),t[6]=-(n*(u*g-c*v)-s*(o*g-r*v)+f*(o*c-r*u)),t[7]=n*(u*p-c*d)-s*(o*p-r*d)+l*(o*c-r*u),t[8]=s*(h*g-p*m)-l*(a*g-c*m)+f*(a*p-c*h),t[9]=-(n*(h*g-p*m)-l*(i*g-r*m)+f*(i*p-r*h)),t[10]=n*(a*g-c*m)-s*(i*g-r*m)+f*(i*c-r*a),t[11]=-(n*(a*p-c*h)-s*(i*p-r*h)+l*(i*c-r*a)),t[12]=-(s*(h*v-d*m)-l*(a*v-u*m)+f*(a*d-u*h)),t[13]=n*(h*v-d*m)-l*(i*v-o*m)+f*(i*d-o*h),t[14]=-(n*(a*v-u*m)-s*(i*v-o*m)+f*(i*u-o*a)),t[15]=n*(a*d-u*h)-s*(i*d-o*h)+l*(i*u-o*a),t},o.determinant=function(t){var e=t[0],n=t[1],i=t[2],o=t[3],r=t[4],s=t[5],a=t[6],u=t[7],c=t[8],l=t[9],h=t[10],d=t[11],p=t[12],f=t[13],m=t[14],v=t[15],g=e*s-n*r,_=e*a-i*r,y=e*u-o*r,b=n*a-i*s,x=n*u-o*s,w=i*u-o*a,E=c*f-l*p,M=c*m-h*p,S=c*v-d*p,A=l*m-h*f,C=l*v-d*f,L=h*v-d*m;return g*L-_*C+y*A+b*S-x*M+w*E},o.multiply=function(t,e,n){var i=e[0],o=e[1],r=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],d=e[9],p=e[10],f=e[11],m=e[12],v=e[13],g=e[14],_=e[15],y=n[0],b=n[1],x=n[2],w=n[3];return t[0]=y*i+b*a+x*h+w*m,t[1]=y*o+b*u+x*d+w*v,t[2]=y*r+b*c+x*p+w*g,t[3]=y*s+b*l+x*f+w*_,y=n[4],b=n[5],x=n[6],w=n[7],t[4]=y*i+b*a+x*h+w*m,t[5]=y*o+b*u+x*d+w*v,t[6]=y*r+b*c+x*p+w*g,t[7]=y*s+b*l+x*f+w*_,y=n[8],b=n[9],x=n[10],w=n[11],t[8]=y*i+b*a+x*h+w*m,t[9]=y*o+b*u+x*d+w*v,t[10]=y*r+b*c+x*p+w*g,t[11]=y*s+b*l+x*f+w*_,y=n[12],b=n[13],x=n[14],w=n[15],t[12]=y*i+b*a+x*h+w*m,t[13]=y*o+b*u+x*d+w*v,t[14]=y*r+b*c+x*p+w*g,t[15]=y*s+b*l+x*f+w*_,t},o.mul=o.multiply,o.translate=function(t,e,n){var i,o,r,s,a,u,c,l,h,d,p,f,m=n[0],v=n[1],g=n[2];return e===t?(t[12]=e[0]*m+e[4]*v+e[8]*g+e[12],t[13]=e[1]*m+e[5]*v+e[9]*g+e[13],t[14]=e[2]*m+e[6]*v+e[10]*g+e[14],t[15]=e[3]*m+e[7]*v+e[11]*g+e[15]):(i=e[0],o=e[1],r=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],d=e[9],p=e[10],f=e[11],t[0]=i,t[1]=o,t[2]=r,t[3]=s,t[4]=a,t[5]=u,t[6]=c,t[7]=l,t[8]=h,t[9]=d,t[10]=p,t[11]=f,t[12]=i*m+a*v+h*g+e[12],t[13]=o*m+u*v+d*g+e[13],t[14]=r*m+c*v+p*g+e[14],t[15]=s*m+l*v+f*g+e[15]),t},o.scale=function(t,e,n){var i=n[0],o=n[1],r=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.rotate=function(t,e,n,o){var r,s,a,u,c,l,h,d,p,f,m,v,g,_,y,b,x,w,E,M,S,A,C,L,R=o[0],P=o[1],O=o[2],T=Math.sqrt(R*R+P*P+O*O);return Math.abs(T)<i.EPSILON?null:(T=1/T,R*=T,P*=T,O*=T,r=Math.sin(n),s=Math.cos(n),a=1-s,u=e[0],c=e[1],l=e[2],h=e[3],d=e[4],p=e[5],f=e[6],m=e[7],v=e[8],g=e[9],_=e[10],y=e[11],b=R*R*a+s,x=P*R*a+O*r,w=O*R*a-P*r,E=R*P*a-O*r,M=P*P*a+s,S=O*P*a+R*r,A=R*O*a+P*r,C=P*O*a-R*r,L=O*O*a+s,t[0]=u*b+d*x+v*w,t[1]=c*b+p*x+g*w,t[2]=l*b+f*x+_*w,t[3]=h*b+m*x+y*w,t[4]=u*E+d*M+v*S,t[5]=c*E+p*M+g*S,t[6]=l*E+f*M+_*S,t[7]=h*E+m*M+y*S,t[8]=u*A+d*C+v*L,t[9]=c*A+p*C+g*L,t[10]=l*A+f*C+_*L,t[11]=h*A+m*C+y*L,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},o.rotateX=function(t,e,n){var i=Math.sin(n),o=Math.cos(n),r=e[4],s=e[5],a=e[6],u=e[7],c=e[8],l=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*o+c*i,t[5]=s*o+l*i,t[6]=a*o+h*i,t[7]=u*o+d*i,t[8]=c*o-r*i,t[9]=l*o-s*i,t[10]=h*o-a*i,t[11]=d*o-u*i,t},o.rotateY=function(t,e,n){var i=Math.sin(n),o=Math.cos(n),r=e[0],s=e[1],a=e[2],u=e[3],c=e[8],l=e[9],h=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*o-c*i,t[1]=s*o-l*i,t[2]=a*o-h*i,t[3]=u*o-d*i,t[8]=r*i+c*o,t[9]=s*i+l*o,t[10]=a*i+h*o,t[11]=u*i+d*o,t},o.rotateZ=function(t,e,n){var i=Math.sin(n),o=Math.cos(n),r=e[0],s=e[1],a=e[2],u=e[3],c=e[4],l=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*o+c*i,t[1]=s*o+l*i,t[2]=a*o+h*i,t[3]=u*o+d*i,t[4]=c*o-r*i,t[5]=l*o-s*i,t[6]=h*o-a*i,t[7]=d*o-u*i,t},o.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromRotation=function(t,e,n){var o,r,s,a=n[0],u=n[1],c=n[2],l=Math.sqrt(a*a+u*u+c*c);return Math.abs(l)<i.EPSILON?null:(l=1/l,a*=l,u*=l,c*=l,o=Math.sin(e),r=Math.cos(e),s=1-r,t[0]=a*a*s+r,t[1]=u*a*s+c*o,t[2]=c*a*s-u*o,t[3]=0,t[4]=a*u*s-c*o,t[5]=u*u*s+r,t[6]=c*u*s+a*o,t[7]=0,t[8]=a*c*s+u*o,t[9]=u*c*s-a*o,t[10]=c*c*s+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},o.fromXRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromYRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromZRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromRotationTranslation=function(t,e,n){var i=e[0],o=e[1],r=e[2],s=e[3],a=i+i,u=o+o,c=r+r,l=i*a,h=i*u,d=i*c,p=o*u,f=o*c,m=r*c,v=s*a,g=s*u,_=s*c;return t[0]=1-(p+m),t[1]=h+_,t[2]=d-g,t[3]=0,t[4]=h-_,t[5]=1-(l+m),t[6]=f+v,t[7]=0,t[8]=d+g,t[9]=f-v,t[10]=1-(l+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},o.fromRotationTranslationScale=function(t,e,n,i){var o=e[0],r=e[1],s=e[2],a=e[3],u=o+o,c=r+r,l=s+s,h=o*u,d=o*c,p=o*l,f=r*c,m=r*l,v=s*l,g=a*u,_=a*c,y=a*l,b=i[0],x=i[1],w=i[2];return t[0]=(1-(f+v))*b,t[1]=(d+y)*b,t[2]=(p-_)*b,t[3]=0,t[4]=(d-y)*x,t[5]=(1-(h+v))*x,t[6]=(m+g)*x,t[7]=0,t[8]=(p+_)*w,t[9]=(m-g)*w,t[10]=(1-(h+f))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},o.fromRotationTranslationScaleOrigin=function(t,e,n,i,o){var r=e[0],s=e[1],a=e[2],u=e[3],c=r+r,l=s+s,h=a+a,d=r*c,p=r*l,f=r*h,m=s*l,v=s*h,g=a*h,_=u*c,y=u*l,b=u*h,x=i[0],w=i[1],E=i[2],M=o[0],S=o[1],A=o[2];return t[0]=(1-(m+g))*x,t[1]=(p+b)*x,t[2]=(f-y)*x,t[3]=0,t[4]=(p-b)*w,t[5]=(1-(d+g))*w,t[6]=(v+_)*w,t[7]=0,t[8]=(f+y)*E,t[9]=(v-_)*E,t[10]=(1-(d+m))*E,t[11]=0,t[12]=n[0]+M-(t[0]*M+t[4]*S+t[8]*A),t[13]=n[1]+S-(t[1]*M+t[5]*S+t[9]*A),t[14]=n[2]+A-(t[2]*M+t[6]*S+t[10]*A),t[15]=1,t},o.fromQuat=function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],s=n+n,a=i+i,u=o+o,c=n*s,l=i*s,h=i*a,d=o*s,p=o*a,f=o*u,m=r*s,v=r*a,g=r*u;return t[0]=1-h-f,t[1]=l+g,t[2]=d-v,t[3]=0,t[4]=l-g,t[5]=1-c-f,t[6]=p+m,t[7]=0,t[8]=d+v,t[9]=p-m,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.frustum=function(t,e,n,i,o,r,s){var a=1/(n-e),u=1/(o-i),c=1/(r-s);return t[0]=2*r*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*u,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(o+i)*u,t[10]=(s+r)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*r*2*c,t[15]=0,t},o.perspective=function(t,e,n,i,o){var r=1/Math.tan(e/2),s=1/(i-o);return t[0]=r/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+i)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*i*s,t[15]=0,t},o.perspectiveFromFieldOfView=function(t,e,n,i){var o=Math.tan(e.upDegrees*Math.PI/180),r=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),u=2/(s+a),c=2/(o+r);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-((s-a)*u*.5),t[9]=(o-r)*c*.5,t[10]=i/(n-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*n/(n-i),t[15]=0,t},o.ortho=function(t,e,n,i,o,r,s){var a=1/(e-n),u=1/(i-o),c=1/(r-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(o+i)*u,t[14]=(s+r)*c,t[15]=1,t},o.lookAt=function(t,e,n,r){var s,a,u,c,l,h,d,p,f,m,v=e[0],g=e[1],_=e[2],y=r[0],b=r[1],x=r[2],w=n[0],E=n[1],M=n[2];return Math.abs(v-w)<i.EPSILON&&Math.abs(g-E)<i.EPSILON&&Math.abs(_-M)<i.EPSILON?o.identity(t):(d=v-w,p=g-E,f=_-M,m=1/Math.sqrt(d*d+p*p+f*f),d*=m,p*=m,f*=m,s=b*f-x*p,a=x*d-y*f,u=y*p-b*d,m=Math.sqrt(s*s+a*a+u*u),m?(m=1/m,s*=m,a*=m,u*=m):(s=0,a=0,u=0),c=p*u-f*a,l=f*s-d*u,h=d*a-p*s,m=Math.sqrt(c*c+l*l+h*h),m?(m=1/m,c*=m,l*=m,h*=m):(c=0,l=0,h=0),t[0]=s,t[1]=c,t[2]=d,t[3]=0,t[4]=a,t[5]=l,t[6]=p,t[7]=0,t[8]=u,t[9]=h,t[10]=f,t[11]=0,t[12]=-(s*v+a*g+u*_),t[13]=-(c*v+l*g+h*_),t[14]=-(d*v+p*g+f*_),t[15]=1,t)},o.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2));
},e.exports=o},{26:26}],31:[function(t,e,n){var i=t(26),o=t(29),r=t(33),s=t(34),a={};a.create=function(){var t=new i.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},a.rotationTo=function(){var t=r.create(),e=r.fromValues(1,0,0),n=r.fromValues(0,1,0);return function(i,o,s){var u=r.dot(o,s);return-.999999>u?(r.cross(t,e,o),r.length(t)<1e-6&&r.cross(t,n,o),r.normalize(t,t),a.setAxisAngle(i,t,Math.PI),i):u>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(r.cross(t,o,s),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+u,a.normalize(i,i))}}(),a.setAxes=function(){var t=o.create();return function(e,n,i,o){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=o[0],t[4]=o[1],t[7]=o[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],a.normalize(e,a.fromMat3(e,t))}}(),a.clone=s.clone,a.fromValues=s.fromValues,a.copy=s.copy,a.set=s.set,a.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},a.setAxisAngle=function(t,e,n){n=.5*n;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t},a.add=s.add,a.multiply=function(t,e,n){var i=e[0],o=e[1],r=e[2],s=e[3],a=n[0],u=n[1],c=n[2],l=n[3];return t[0]=i*l+s*a+o*c-r*u,t[1]=o*l+s*u+r*a-i*c,t[2]=r*l+s*c+i*u-o*a,t[3]=s*l-i*a-o*u-r*c,t},a.mul=a.multiply,a.scale=s.scale,a.rotateX=function(t,e,n){n*=.5;var i=e[0],o=e[1],r=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=i*u+s*a,t[1]=o*u+r*a,t[2]=r*u-o*a,t[3]=s*u-i*a,t},a.rotateY=function(t,e,n){n*=.5;var i=e[0],o=e[1],r=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=i*u-r*a,t[1]=o*u+s*a,t[2]=r*u+i*a,t[3]=s*u-o*a,t},a.rotateZ=function(t,e,n){n*=.5;var i=e[0],o=e[1],r=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=i*u+o*a,t[1]=o*u-i*a,t[2]=r*u+s*a,t[3]=s*u-r*a,t},a.calculateW=function(t,e){var n=e[0],i=e[1],o=e[2];return t[0]=n,t[1]=i,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-o*o)),t},a.dot=s.dot,a.lerp=s.lerp,a.slerp=function(t,e,n,i){var o,r,s,a,u,c=e[0],l=e[1],h=e[2],d=e[3],p=n[0],f=n[1],m=n[2],v=n[3];return r=c*p+l*f+h*m+d*v,0>r&&(r=-r,p=-p,f=-f,m=-m,v=-v),1-r>1e-6?(o=Math.acos(r),s=Math.sin(o),a=Math.sin((1-i)*o)/s,u=Math.sin(i*o)/s):(a=1-i,u=i),t[0]=a*c+u*p,t[1]=a*l+u*f,t[2]=a*h+u*m,t[3]=a*d+u*v,t},a.sqlerp=function(){var t=a.create(),e=a.create();return function(n,i,o,r,s,u){return a.slerp(t,i,s,u),a.slerp(e,o,r,u),a.slerp(n,t,e,2*u*(1-u)),n}}(),a.invert=function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],s=n*n+i*i+o*o+r*r,a=s?1/s:0;return t[0]=-n*a,t[1]=-i*a,t[2]=-o*a,t[3]=r*a,t},a.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},a.length=s.length,a.len=a.length,a.squaredLength=s.squaredLength,a.sqrLen=a.squaredLength,a.normalize=s.normalize,a.fromMat3=function(t,e){var n,i=e[0]+e[4]+e[8];if(i>0)n=Math.sqrt(i+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var r=(o+1)%3,s=(o+2)%3;n=Math.sqrt(e[3*o+o]-e[3*r+r]-e[3*s+s]+1),t[o]=.5*n,n=.5/n,t[3]=(e[3*r+s]-e[3*s+r])*n,t[r]=(e[3*r+o]+e[3*o+r])*n,t[s]=(e[3*s+o]+e[3*o+s])*n}return t},a.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exports=a},{26:26,29:29,33:33,34:34}],32:[function(t,e,n){var i=t(26),o={};o.create=function(){var t=new i.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},o.clone=function(t){var e=new i.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},o.fromValues=function(t,e){var n=new i.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},o.set=function(t,e,n){return t[0]=e,t[1]=n,t},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},o.sub=o.subtract,o.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},o.mul=o.multiply,o.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},o.div=o.divide,o.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},o.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},o.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},o.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t},o.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(n*n+i*i)},o.dist=o.distance,o.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},o.len=o.length,o.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},o.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},o.normalize=function(t,e){var n=e[0],i=e[1],o=n*n+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},o.cross=function(t,e,n){var i=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=i,t},o.lerp=function(t,e,n,i){var o=e[0],r=e[1];return t[0]=o+i*(n[0]-o),t[1]=r+i*(n[1]-r),t},o.random=function(t,e){e=e||1;var n=2*i.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},o.transformMat2=function(t,e,n){var i=e[0],o=e[1];return t[0]=n[0]*i+n[2]*o,t[1]=n[1]*i+n[3]*o,t},o.transformMat2d=function(t,e,n){var i=e[0],o=e[1];return t[0]=n[0]*i+n[2]*o+n[4],t[1]=n[1]*i+n[3]*o+n[5],t},o.transformMat3=function(t,e,n){var i=e[0],o=e[1];return t[0]=n[0]*i+n[3]*o+n[6],t[1]=n[1]*i+n[4]*o+n[7],t},o.transformMat4=function(t,e,n){var i=e[0],o=e[1];return t[0]=n[0]*i+n[4]*o+n[12],t[1]=n[1]*i+n[5]*o+n[13],t},o.forEach=function(){var t=o.create();return function(e,n,i,o,r,s){var a,u;for(n||(n=2),i||(i=0),u=o?Math.min(o*n+i,e.length):e.length,a=i;u>a;a+=n)t[0]=e[a],t[1]=e[a+1],r(t,t,s),e[a]=t[0],e[a+1]=t[1];return e}}(),o.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exports=o},{26:26}],33:[function(t,e,n){var i=t(26),o={};o.create=function(){var t=new i.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},o.clone=function(t){var e=new i.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},o.fromValues=function(t,e,n){var o=new i.ARRAY_TYPE(3);return o[0]=t,o[1]=e,o[2]=n,o},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.set=function(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},o.sub=o.subtract,o.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},o.mul=o.multiply,o.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},o.div=o.divide,o.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},o.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},o.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},o.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t},o.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(n*n+i*i+o*o)},o.dist=o.distance,o.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2];return n*n+i*i+o*o},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)},o.len=o.length,o.squaredLength=function(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},o.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},o.normalize=function(t,e){var n=e[0],i=e[1],o=e[2],r=n*n+i*i+o*o;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},o.cross=function(t,e,n){var i=e[0],o=e[1],r=e[2],s=n[0],a=n[1],u=n[2];return t[0]=o*u-r*a,t[1]=r*s-i*u,t[2]=i*a-o*s,t},o.lerp=function(t,e,n,i){var o=e[0],r=e[1],s=e[2];return t[0]=o+i*(n[0]-o),t[1]=r+i*(n[1]-r),t[2]=s+i*(n[2]-s),t},o.hermite=function(t,e,n,i,o,r){var s=r*r,a=s*(2*r-3)+1,u=s*(r-2)+r,c=s*(r-1),l=s*(3-2*r);return t[0]=e[0]*a+n[0]*u+i[0]*c+o[0]*l,t[1]=e[1]*a+n[1]*u+i[1]*c+o[1]*l,t[2]=e[2]*a+n[2]*u+i[2]*c+o[2]*l,t},o.bezier=function(t,e,n,i,o,r){var s=1-r,a=s*s,u=r*r,c=a*s,l=3*r*a,h=3*u*s,d=u*r;return t[0]=e[0]*c+n[0]*l+i[0]*h+o[0]*d,t[1]=e[1]*c+n[1]*l+i[1]*h+o[1]*d,t[2]=e[2]*c+n[2]*l+i[2]*h+o[2]*d,t},o.random=function(t,e){e=e||1;var n=2*i.RANDOM()*Math.PI,o=2*i.RANDOM()-1,r=Math.sqrt(1-o*o)*e;return t[0]=Math.cos(n)*r,t[1]=Math.sin(n)*r,t[2]=o*e,t},o.transformMat4=function(t,e,n){var i=e[0],o=e[1],r=e[2],s=n[3]*i+n[7]*o+n[11]*r+n[15];return s=s||1,t[0]=(n[0]*i+n[4]*o+n[8]*r+n[12])/s,t[1]=(n[1]*i+n[5]*o+n[9]*r+n[13])/s,t[2]=(n[2]*i+n[6]*o+n[10]*r+n[14])/s,t},o.transformMat3=function(t,e,n){var i=e[0],o=e[1],r=e[2];return t[0]=i*n[0]+o*n[3]+r*n[6],t[1]=i*n[1]+o*n[4]+r*n[7],t[2]=i*n[2]+o*n[5]+r*n[8],t},o.transformQuat=function(t,e,n){var i=e[0],o=e[1],r=e[2],s=n[0],a=n[1],u=n[2],c=n[3],l=c*i+a*r-u*o,h=c*o+u*i-s*r,d=c*r+s*o-a*i,p=-s*i-a*o-u*r;return t[0]=l*c+p*-s+h*-u-d*-a,t[1]=h*c+p*-a+d*-s-l*-u,t[2]=d*c+p*-u+l*-a-h*-s,t},o.rotateX=function(t,e,n,i){var o=[],r=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],r[0]=o[0],r[1]=o[1]*Math.cos(i)-o[2]*Math.sin(i),r[2]=o[1]*Math.sin(i)+o[2]*Math.cos(i),t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t},o.rotateY=function(t,e,n,i){var o=[],r=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],r[0]=o[2]*Math.sin(i)+o[0]*Math.cos(i),r[1]=o[1],r[2]=o[2]*Math.cos(i)-o[0]*Math.sin(i),t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t},o.rotateZ=function(t,e,n,i){var o=[],r=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],r[0]=o[0]*Math.cos(i)-o[1]*Math.sin(i),r[1]=o[0]*Math.sin(i)+o[1]*Math.cos(i),r[2]=o[2],t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t},o.forEach=function(){var t=o.create();return function(e,n,i,o,r,s){var a,u;for(n||(n=3),i||(i=0),u=o?Math.min(o*n+i,e.length):e.length,a=i;u>a;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],r(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}}(),o.angle=function(t,e){var n=o.fromValues(t[0],t[1],t[2]),i=o.fromValues(e[0],e[1],e[2]);o.normalize(n,n),o.normalize(i,i);var r=o.dot(n,i);return r>1?0:Math.acos(r)},o.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exports=o},{26:26}],34:[function(t,e,n){var i=t(26),o={};o.create=function(){var t=new i.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},o.clone=function(t){var e=new i.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.fromValues=function(t,e,n,o){var r=new i.ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=o,r},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.set=function(t,e,n,i,o){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},o.sub=o.subtract,o.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},o.mul=o.multiply,o.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t},o.div=o.divide,o.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},o.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},o.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},o.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t},o.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2],r=e[3]-t[3];return Math.sqrt(n*n+i*i+o*o+r*r)},o.dist=o.distance,o.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2],r=e[3]-t[3];return n*n+i*i+o*o+r*r},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],n=t[1],i=t[2],o=t[3];return Math.sqrt(e*e+n*n+i*i+o*o)},o.len=o.length,o.squaredLength=function(t){var e=t[0],n=t[1],i=t[2],o=t[3];return e*e+n*n+i*i+o*o},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},o.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},o.normalize=function(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],s=n*n+i*i+o*o+r*r;return s>0&&(s=1/Math.sqrt(s),t[0]=n*s,t[1]=i*s,t[2]=o*s,t[3]=r*s),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},o.lerp=function(t,e,n,i){var o=e[0],r=e[1],s=e[2],a=e[3];return t[0]=o+i*(n[0]-o),t[1]=r+i*(n[1]-r),t[2]=s+i*(n[2]-s),t[3]=a+i*(n[3]-a),t},o.random=function(t,e){return e=e||1,t[0]=i.RANDOM(),t[1]=i.RANDOM(),t[2]=i.RANDOM(),t[3]=i.RANDOM(),o.normalize(t,t),o.scale(t,t,e),t},o.transformMat4=function(t,e,n){var i=e[0],o=e[1],r=e[2],s=e[3];return t[0]=n[0]*i+n[4]*o+n[8]*r+n[12]*s,t[1]=n[1]*i+n[5]*o+n[9]*r+n[13]*s,t[2]=n[2]*i+n[6]*o+n[10]*r+n[14]*s,t[3]=n[3]*i+n[7]*o+n[11]*r+n[15]*s,t},o.transformQuat=function(t,e,n){var i=e[0],o=e[1],r=e[2],s=n[0],a=n[1],u=n[2],c=n[3],l=c*i+a*r-u*o,h=c*o+u*i-s*r,d=c*r+s*o-a*i,p=-s*i-a*o-u*r;return t[0]=l*c+p*-s+h*-u-d*-a,t[1]=h*c+p*-a+d*-s-l*-u,t[2]=d*c+p*-u+l*-a-h*-s,t[3]=e[3],t},o.forEach=function(){var t=o.create();return function(e,n,i,o,r,s){var a,u;for(n||(n=4),i||(i=0),u=o?Math.min(o*n+i,e.length):e.length,a=i;u>a;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],r(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}(),o.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exports=o},{26:26}],35:[function(t,e,n){(function(t){function n(){this._listeners=[]}function i(t){t.sort(function(t,e){return t=t.p,e=e.p,t>e?1:t>e?-1:0})}function o(t,e,n,o){if(!t)throw c;n=n||0;for(var r,s,a,u=this._listeners,h=u.length;h--;)if(r=u[h],r.f===t&&r.c===e)return!1;"function"==typeof n&&(s=n,n=o,a=4),u.unshift({f:t,c:e,p:n,r:s||t,a:l.call(arguments,a||3),j:0}),i(u)}function r(e,n,i,r){if(!e)throw c;var s=this,a=function(){return s.remove.call(s,e,n),e.apply(n,l.call(arguments,0))};r=l.call(arguments,0),1===r.length&&r.push(t),r.splice(2,0,a),o.apply(s,r)}function s(t,e){if(!t)return this._listeners.length=0,!0;for(var n,i=this._listeners,o=i.length;o--;)if(n=i[o],n.f===t&&(!e||n.c===e))return n.j=1,i.splice(o,1),!0;return!1}function a(t){t=l.call(arguments,0);for(var e,n,i=this._listeners,o=i.length;o--;)if(e=i[o],e&&!e.j&&(e.j=1,e.r.apply(e.c,e.a.concat(t))===!1)){n=e;break}for(i=this._listeners,o=i.length;o--;)i[o].j=0;return n}var u=n.prototype;u.add=o,u.addOnce=r,u.remove=s,u.dispatch=a;var c="Callback function is missing!",l=Array.prototype.slice;"undefined"!=typeof e&&(e.exports=n)})()},{}],36:[function(t,e,n){e.exports=t(37),t(43),t(42),t(44),t(40),t(45),t(39),t(41)},{37:37,39:39,40:40,41:41,42:42,43:43,44:44,45:45}],37:[function(t,e,n){function i(){this.isLoading=!1,this.totalWeight=0,this.loadedWeight=0,this.itemUrls={},this.itemList=[],this.loadingSignal=new b}function o(t,e){var n,i,o,r,s,a=p(t,e);for(n=0,o=a.length;o>n;n++)for(s=a[n],i=0,r=s.items.length;r>i;i++)this.add(s.items[i],{type:s.type});return a}function r(t,e){var n=E[t];return n||(n=h(t,e&&e.type?e.type:f(t).type,e)),e&&e.onLoad&&n.onLoaded.addOnce(e.onLoad),this.itemUrls[t]||(this.itemUrls[t]=n,this.itemList.push(n),this.totalWeight+=n.weight),n}function s(t,e){var n=E[t];return n||(n=h(t,e&&e.type?e.type:f(t).type,e)),e&&e.onLoad&&n.onLoaded.addOnce(e.onLoad),M[t]?n.dispatch():n.isStartLoaded||n.load(),n}function a(t){t&&this.loadingSignal.add(t),this.isLoading=!0;var e=this.itemList.length;if(e)for(var n,i=this.itemList.splice(0,this.itemList.length),o=0;e>o;o++)n=i[o],n.onLoaded.addOnce(l,this,-1024,n,i),n.hasLoading&&n.loadingSignal.add(u,this,-1024,n,i,y),M[n.url]?n.dispatch(l):n.isStartLoaded||n.load();else l.call(this,y,this.itemList)}function u(t,e,n,i,o){(!t||t.isLoaded||1!==i)&&(o===y&&(this.loadedWeight=c(e),o=this.loadedWeight/this.totalWeight),n=n||this.loadingSignal,n.dispatch(o,t))}function c(t){for(var e=0,n=0,i=t.length;i>n;n++)e+=t[n].loadedWeight;return e}function l(t,e){this.loadedWeight=c(e);var n=this.loadingSignal;this.loadedWeight===this.totalWeight?(this.isLoading=!1,this.loadedWeight=0,this.totalWeight=0,this.loadingSignal=new b,this._onLoading(t,e,n,1,1)):this._onLoading(t,e,n,1,this.loadedWeight/this.totalWeight)}function h(t,e,n){return new A[e](t,n)}function d(t){A[t.type]||(S.push(t),A[t.type]=t)}function p(t,e){var n,i,o=t.length,r=[];if(o&&"string"!=typeof t)for(n=0;o>n;n++)i=f(t[n],e),i&&(r=r.concat(i));else i=f(t,e),i&&(r=r.concat(i));return r}function f(t,e){var n,i,o,r,s;if(e)r=A[e],o=r.retrieve(t);else for(n=0,i=S.length;i>n;n++){if(r=S[n],s=r.type,"string"==typeof t){if(m(t,r)){o=[t];break}}else if(o=r.retrieve(t),o&&o.length&&"string"==typeof o[0]&&m(o[0],r))break;o=y,s=y}return o?{type:e||s,items:o}:void 0}function m(t,e){if(t){for(var n=v(t),i=e.extensions,o=i.length;o--;)if(n===i[o])return!0;return!1}}function v(t){return t.split(".").pop().split(/\#|\?/)[0]}function g(){return new i}function _(){var t=[],e=[];for(var n in E)t.push(n),M[n]||e.push(E[n]);console.log({added:t,notLoaded:e})}var y,b=t(35),x=i.prototype;x.addChunk=o,x.add=r,x.load=s,x.start=a,x._onLoading=u;var w=e.exports=g();w.version="0.1.14",w.register=d,w.retrieveAll=p,w.retrieve=f,w.testExtensions=m,w.create=g,w.load=s,w.check=_;var E=w.addedItems={},M=w.loadedItems={},S=w.ITEM_CLASS_LIST=[],A=w.ITEM_CLASSES={}},{35:35}],38:[function(t,e,n){function i(t,e){if(t){this.url=t,this.loadedWeight=0,this.weight=1;for(var n in e)this[n]=e[n];this.type||(this.type=this.constructor.type),this.hasLoading&&(this.loadingSignal=new u,this.loadingSignal.add(s,this),this.onLoading&&this.loadingSignal.add(this.onLoading));var i=this;this.boundOnLoad=function(){i._onLoad()},this.onLoaded=new u,c.addedItems[t]=this}}function o(){this.isStartLoaded=!0}function r(){this.isLoaded=!0,this.loadedWeight=this.weight,c.loadedItems[this.url]=this,this.onLoaded.dispatch(this.content)}function s(t){this.loadedWeight=this.weight*t}function a(){this.hasLoading&&this.loadingSignal.remove(),this.onLoaded.dispatch(this.content)}var u=t(35),c=t(37);e.exports=i;var l=i.prototype;l.load=o,l._onLoad=r,l._onLoading=s,l.dispatch=a,i.extensions=[],i.retrieve=function(){return!1}},{35:35,37:37}],39:[function(t,e,n){function i(t,e){t&&(a.constructor.call(this,t,e),!this.loadFunc&&console&&console[console.error||console.log]("require loadFunc in the config object."))}function o(){var t=this;this.loadFunc(this.url,function(e){t.content=e,a._onLoad.call(t)},this.loadingSignal)}var r=t(38),s=t(37);e.exports=i,i.type="any",i.extensions=[],s.register(i),i.retrieve=function(){return!1};var a=r.prototype,u=i.prototype=new r;u.constructor=i,u.load=o},{37:37,38:38}],40:[function(t,e,n){function i(t,e){if(t){this.loadThrough=e&&e.loadThrough!==s?e.loadThrough:!0,c.constructor.apply(this,arguments);try{this.content=new Audio}catch(n){this.content=document.createElement("audio")}}}function o(){c.load.apply(this,arguments);var t=this,e=t.content;e.src=this.url,this.loadThrough?e.addEventListener("canplaythrough",this.boundOnLoad,!1):e.addEventListener("canplay",this.boundOnLoad,!1),e.load()}function r(){this.content.removeEventListener("canplaythrough",this.boundOnLoad,!1),this.content.removeEventListener("canplay",this.boundOnLoad,!1),this.isLoaded||c._onLoad.call(this)}var s,a=t(38),u=t(37);e.exports=i,i.type="audio",i.extensions=["mp3","ogg"],u.register(i),i.retrieve=function(t){return!1};var c=a.prototype,l=i.prototype=new a;l.constructor=i,l.load=o,l._onLoad=r},{37:37,38:38}],41:[function(t,e,n){function i(t,e){t&&(l.constructor.apply(this,arguments),this.content=new Image)}function o(){l.load.apply(this,arguments);var t=this.content;t.src=this.url,t.width?this._onLoad():t.onload=this.boundOnLoad}function r(){delete this.content.onload,this.width=this.content.width,this.height=this.content.height,l._onLoad.call(this)}function s(t){return 0!==t.indexOf("data:")}var a=t(38),u=t(16),c=t(37);e.exports=i;var l=a.prototype,h=i.prototype=new a;h.constructor=i,h.load=o,h._onLoad=r,i.retrieve=function(t){if(t.nodeType&&t.style){var e=[];"img"==t.nodeName.toLowerCase()&&t.src.indexOf(";")<0&&e.push(t.src),u(t,"background-image").replace(/s?url\(\s*?[\'\"]?([^;]*?)[\'\"]?\s*?\)/g,function(t,n){e.push(n)});for(var n=e.length;n--;)s(e[n])||e.splice(n,1);return e.length?e:!1}return"string"==typeof t?[t]:!1},i.type="image",i.extensions=["jpg","gif","png"],c.register(i)},{16:16,37:37,38:38}],42:[function(require,module,exports){function JSONItem(t){t&&_super.constructor.apply(this,arguments)}function _onLoad(){this.content&&(this.content=window.JSON&&window.JSON.parse?JSON.parse(this.content.toString()):eval(this.content.toString())),_super._onLoad.call(this)}var TextItem=require(44),quickLoader=require(37);module.exports=JSONItem,JSONItem.type="json",JSONItem.extensions=["json"],quickLoader.register(JSONItem),JSONItem.retrieve=function(){return!1};var _super=TextItem.prototype,_p=JSONItem.prototype=new TextItem;_p.constructor=JSONItem,_p._onLoad=_onLoad},{37:37,44:44}],43:[function(t,e,n){function i(){return"_jsonp"+(new Date).getTime()+~~(1e8*Math.random())}function o(t){t&&u.constructor.apply(this,arguments)}function r(t){u.load.apply(this,arguments);var e=this,n=this.url.lastIndexOf("=")+1,o=this.url.substr(0,n),r=this.url.substr(n);0===r.length?(r=i(),this.jsonpCallback=t):this.jsonpCallback=this.jsonpCallback||window[r],window[r]=function(t){s.parentNode&&s.parentNode.removeChild(s),e.content=t,e._onLoad()};var s=document.createElement("script");s.type="text/javascript",s.src=o+r,document.getElementsByTagName("head")[0].appendChild(s)}var s=t(38),a=t(37);e.exports=o,o.type="jsonp",o.extensions=[],a.register(o),o.retrieve=function(t){return"string"==typeof t&&t.indexOf("=")>-1?[t]:!1};var u=s.prototype,c=o.prototype=new s;c.constructor=o,c.load=r},{37:37,38:38}],44:[function(t,e,n){function i(t){t&&d.constructor.apply(this,arguments)}function o(){d.load.apply(this,arguments);var t,e=this;t=h?this.xmlhttp=new XMLHttpRequest:this.xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"),this.hasLoading&&(t.onprogress=function(t){e._onXmlHttpProgress(t)}),t.onreadystatechange=function(){e._onXmlHttpChange()},t.open("GET",this.url,!0),h?t.send(null):t.send()}function r(t){this.loadingSignal.dispatch(t.loaded/t.total)}function s(){4==this.xmlhttp.readyState&&200==this.xmlhttp.status&&(this.content=this.xmlhttp.responseText,this._onLoad())}function a(){this.content&&(this.xmlhttp=u),d._onLoad.call(this)}var u,c=t(38),l=t(37),h=!!window.XMLHttpRequest;e.exports=i,i.type="text",i.extensions=["html","txt","svg"],l.register(i),i.retrieve=function(){return!1};var d=c.prototype,p=i.prototype=new c;p.constructor=i,p.load=o,p._onXmlHttpChange=s,p._onXmlHttpProgress=r,p._onLoad=a},{37:37,38:38}],45:[function(t,e,n){function i(t,e){if(t){this.loadThrough=e&&e.loadThrough!==s?e.loadThrough:!0,c.constructor.apply(this,arguments);try{this.content=new Video}catch(n){this.content=document.createElement("video")}}}function o(){c.load.apply(this,arguments);var t=this.content;t.preload="auto",t.src=this.url,this.loadThrough?t.addEventListener("canplaythrough",this.boundOnLoad,!1):t.addEventListener("canplay",this.boundOnLoad,!1),t.load()}function r(){this.content.removeEventListener("canplaythrough",this.boundOnLoad),this.content.removeEventListener("canplay",this.boundOnLoad),this.isLoaded||c._onLoad.call(this)}var s,a=t(38),u=t(37);e.exports=i,i.type="video",i.extensions=["mp4","webm","ogv"],u.register(i),i.retrieve=function(t){return!1};var c=a.prototype,l=i.prototype=new a;l.constructor=i,l.load=o,l._onLoad=r},{37:37,38:38}],46:[function(t,e,n){for(var i=t(47),o="undefined"==typeof window?{}:window,r=["moz","webkit"],s="AnimationFrame",a=o["request"+s],u=o["cancel"+s]||o["cancelRequest"+s],c=0;c<r.length&&!a;c++)a=o[r[c]+"Request"+s],u=o[r[c]+"Cancel"+s]||o[r[c]+"CancelRequest"+s];if(!a||!u){var l=0,h=0,d=[],p=1e3/60;a=function(t){if(0===d.length){var e=i(),n=Math.max(0,p-(e-l));l=n+e,setTimeout(function(){var t=d.slice(0);d.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(l)}catch(n){setTimeout(function(){throw n},0)}},Math.round(n))}return d.push({handle:++h,callback:t,cancelled:!1}),h},u=function(t){for(var e=0;e<d.length;e++)d[e].handle===t&&(d[e].cancelled=!0)}}e.exports=function(t){return a.call(o,t)},e.exports.cancel=function(){u.apply(o,arguments)}},{47:47}],47:[function(t,e,n){(function(t){(function(){var n,i,o;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-o)/1e6},i=t.hrtime,n=function(){var t;return t=i(),1e9*t[0]+t[1]},o=n()):Date.now?(e.exports=function(){return Date.now()-o},o=Date.now()):(e.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(this,t(15))},{15:15}],48:[function(t,e,n){var i=function(){function t(t,e,n){var i=document.createElement(t);return i.id=e,i.style.cssText=n,i}function e(e,n,i){var o=t("div",e,"padding:0 0 3px 3px;text-align:left;background:"+i),r=t("div",e+"Text","font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:"+n);r.innerHTML=e.toUpperCase(),o.appendChild(r);var s=t("div",e+"Graph","width:74px;height:30px;background:"+n);o.appendChild(s);for(var a=0;74>a;a++)s.appendChild(t("span","","width:1px;height:30px;float:left;opacity:0.9;background:"+i));return o}function n(t){for(var e=c.children,n=0;n<e.length;n++)e[n].style.display=n===t?"block":"none";u=t}function i(t,e){var n=t.appendChild(t.firstChild);n.style.height=Math.min(30,30-30*e)+"px"}var o=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,r=o(),s=r,a=0,u=0,c=t("div","stats","width:80px;opacity:0.9;cursor:pointer");c.addEventListener("mousedown",function(t){t.preventDefault(),n(++u%c.children.length)},!1);var l=0,h=1/0,d=0,p=e("fps","#0ff","#002"),f=p.children[0],m=p.children[1];c.appendChild(p);var v=0,g=1/0,_=0,y=e("ms","#0f0","#020"),b=y.children[0],x=y.children[1];if(c.appendChild(y),self.performance&&self.performance.memory){var w=0,E=1/0,M=0,S=e("mb","#f08","#201"),A=S.children[0],C=S.children[1];c.appendChild(S)}return n(u),{REVISION:14,domElement:c,setMode:n,begin:function(){r=o()},end:function(){var t=o();if(v=t-r,g=Math.min(g,v),_=Math.max(_,v),b.textContent=(0|v)+" MS ("+(0|g)+"-"+(0|_)+")",i(x,v/200),a++,t>s+1e3&&(l=Math.round(1e3*a/(t-s)),h=Math.min(h,l),d=Math.max(d,l),f.textContent=l+" FPS ("+h+"-"+d+")",i(m,l/100),s=t,a=0,void 0!==w)){var e=performance.memory.usedJSHeapSize,n=performance.memory.jsHeapSizeLimit;w=Math.round(9.54e-7*e),E=Math.min(E,w),M=Math.max(M,w),A.textContent=w+" MB ("+E+"-"+M+")",i(C,e/n)}return t},update:function(){r=this.end()}}};"object"==typeof e&&(e.exports=i)},{}],49:[function(t,e,n){e.exports=window.THREE},{}],50:[function(t,e,n){(function(){function t(t){function e(e,n,i,o,r,s){for(;r>=0&&s>r;r+=t){var a=o?o[r]:r;i=n(i,e[a],a,e)}return i}return function(n,i,o,r){i=x(i,r,4);var s=!L(n)&&b.keys(n),a=(s||n).length,u=t>0?0:a-1;return arguments.length<3&&(o=n[s?s[u]:u],u+=t),e(n,i,o,s,u,a)}}function i(t){return function(e,n,i){n=w(n,i);for(var o=C(e),r=t>0?0:o-1;r>=0&&o>r;r+=t)if(n(e[r],r,e))return r;return-1}}function o(t,e,n){return function(i,o,r){var s=0,a=C(i);if("number"==typeof r)t>0?s=r>=0?r:Math.max(r+a,s):a=r>=0?Math.min(r+1,a):r+a+1;else if(n&&r&&a)return r=n(i,o),i[r]===o?r:-1;if(o!==o)return r=e(d.call(i,s,a),b.isNaN),r>=0?r+s:-1;for(r=t>0?s:a-1;r>=0&&a>r;r+=t)if(i[r]===o)return r;return-1}}function r(t,e){var n=k.length,i=t.constructor,o=b.isFunction(i)&&i.prototype||c,r="constructor";for(b.has(t,r)&&!b.contains(e,r)&&e.push(r);n--;)r=k[n],r in t&&t[r]!==o[r]&&!b.contains(e,r)&&e.push(r)}var s=this,a=s._,u=Array.prototype,c=Object.prototype,l=Function.prototype,h=u.push,d=u.slice,p=c.toString,f=c.hasOwnProperty,m=Array.isArray,v=Object.keys,g=l.bind,_=Object.create,y=function(){},b=function(t){return t instanceof b?t:this instanceof b?void(this._wrapped=t):new b(t)};"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=b),n._=b):s._=b,b.VERSION="1.8.3";var x=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,r){return t.call(e,n,i,o,r)}}return function(){return t.apply(e,arguments)}},w=function(t,e,n){return null==t?b.identity:b.isFunction(t)?x(t,e,n):b.isObject(t)?b.matcher(t):b.property(t)};b.iteratee=function(t,e){return w(t,e,1/0)};var E=function(t,e){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var o=1;i>o;o++)for(var r=arguments[o],s=t(r),a=s.length,u=0;a>u;u++){var c=s[u];e&&void 0!==n[c]||(n[c]=r[c])}return n}},M=function(t){if(!b.isObject(t))return{};if(_)return _(t);y.prototype=t;var e=new y;return y.prototype=null,e},S=function(t){return function(e){return null==e?void 0:e[t]}},A=Math.pow(2,53)-1,C=S("length"),L=function(t){var e=C(t);return"number"==typeof e&&e>=0&&A>=e};b.each=b.forEach=function(t,e,n){e=x(e,n);var i,o;if(L(t))for(i=0,o=t.length;o>i;i++)e(t[i],i,t);else{var r=b.keys(t);for(i=0,o=r.length;o>i;i++)e(t[r[i]],r[i],t)}return t},b.map=b.collect=function(t,e,n){e=w(e,n);for(var i=!L(t)&&b.keys(t),o=(i||t).length,r=Array(o),s=0;o>s;s++){var a=i?i[s]:s;r[s]=e(t[a],a,t)}return r},b.reduce=b.foldl=b.inject=t(1),b.reduceRight=b.foldr=t(-1),b.find=b.detect=function(t,e,n){var i;return i=L(t)?b.findIndex(t,e,n):b.findKey(t,e,n),void 0!==i&&-1!==i?t[i]:void 0},b.filter=b.select=function(t,e,n){var i=[];return e=w(e,n),b.each(t,function(t,n,o){e(t,n,o)&&i.push(t)}),i},b.reject=function(t,e,n){return b.filter(t,b.negate(w(e)),n)},b.every=b.all=function(t,e,n){e=w(e,n);for(var i=!L(t)&&b.keys(t),o=(i||t).length,r=0;o>r;r++){var s=i?i[r]:r;if(!e(t[s],s,t))return!1}return!0},b.some=b.any=function(t,e,n){e=w(e,n);for(var i=!L(t)&&b.keys(t),o=(i||t).length,r=0;o>r;r++){var s=i?i[r]:r;if(e(t[s],s,t))return!0}return!1},b.contains=b.includes=b.include=function(t,e,n,i){return L(t)||(t=b.values(t)),("number"!=typeof n||i)&&(n=0),b.indexOf(t,e,n)>=0},b.invoke=function(t,e){var n=d.call(arguments,2),i=b.isFunction(e);return b.map(t,function(t){var o=i?e:t[e];return null==o?o:o.apply(t,n)})},b.pluck=function(t,e){return b.map(t,b.property(e))},b.where=function(t,e){return b.filter(t,b.matcher(e))},b.findWhere=function(t,e){return b.find(t,b.matcher(e))},b.max=function(t,e,n){var i,o,r=-(1/0),s=-(1/0);if(null==e&&null!=t){t=L(t)?t:b.values(t);for(var a=0,u=t.length;u>a;a++)i=t[a],i>r&&(r=i)}else e=w(e,n),b.each(t,function(t,n,i){o=e(t,n,i),(o>s||o===-(1/0)&&r===-(1/0))&&(r=t,s=o)});return r},b.min=function(t,e,n){var i,o,r=1/0,s=1/0;if(null==e&&null!=t){t=L(t)?t:b.values(t);for(var a=0,u=t.length;u>a;a++)i=t[a],r>i&&(r=i)}else e=w(e,n),b.each(t,function(t,n,i){o=e(t,n,i),(s>o||o===1/0&&r===1/0)&&(r=t,s=o)});return r},b.shuffle=function(t){for(var e,n=L(t)?t:b.values(t),i=n.length,o=Array(i),r=0;i>r;r++)e=b.random(0,r),e!==r&&(o[r]=o[e]),o[e]=n[r];return o},b.sample=function(t,e,n){return null==e||n?(L(t)||(t=b.values(t)),t[b.random(t.length-1)]):b.shuffle(t).slice(0,Math.max(0,e))},b.sortBy=function(t,e,n){return e=w(e,n),b.pluck(b.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var R=function(t){return function(e,n,i){var o={};return n=w(n,i),b.each(e,function(i,r){var s=n(i,r,e);t(o,i,s)}),o}};b.groupBy=R(function(t,e,n){b.has(t,n)?t[n].push(e):t[n]=[e]}),b.indexBy=R(function(t,e,n){t[n]=e}),b.countBy=R(function(t,e,n){b.has(t,n)?t[n]++:t[n]=1}),b.toArray=function(t){return t?b.isArray(t)?d.call(t):L(t)?b.map(t,b.identity):b.values(t):[]},b.size=function(t){return null==t?0:L(t)?t.length:b.keys(t).length},b.partition=function(t,e,n){e=w(e,n);var i=[],o=[];return b.each(t,function(t,n,r){(e(t,n,r)?i:o).push(t)}),[i,o]},b.first=b.head=b.take=function(t,e,n){return null!=t?null==e||n?t[0]:b.initial(t,t.length-e):void 0;
},b.initial=function(t,e,n){return d.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},b.last=function(t,e,n){return null!=t?null==e||n?t[t.length-1]:b.rest(t,Math.max(0,t.length-e)):void 0},b.rest=b.tail=b.drop=function(t,e,n){return d.call(t,null==e||n?1:e)},b.compact=function(t){return b.filter(t,b.identity)};var P=function(t,e,n,i){for(var o=[],r=0,s=i||0,a=C(t);a>s;s++){var u=t[s];if(L(u)&&(b.isArray(u)||b.isArguments(u))){e||(u=P(u,e,n));var c=0,l=u.length;for(o.length+=l;l>c;)o[r++]=u[c++]}else n||(o[r++]=u)}return o};b.flatten=function(t,e){return P(t,e,!1)},b.without=function(t){return b.difference(t,d.call(arguments,1))},b.uniq=b.unique=function(t,e,n,i){b.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=w(n,i));for(var o=[],r=[],s=0,a=C(t);a>s;s++){var u=t[s],c=n?n(u,s,t):u;e?(s&&r===c||o.push(u),r=c):n?b.contains(r,c)||(r.push(c),o.push(u)):b.contains(o,u)||o.push(u)}return o},b.union=function(){return b.uniq(P(arguments,!0,!0))},b.intersection=function(t){for(var e=[],n=arguments.length,i=0,o=C(t);o>i;i++){var r=t[i];if(!b.contains(e,r)){for(var s=1;n>s&&b.contains(arguments[s],r);s++);s===n&&e.push(r)}}return e},b.difference=function(t){var e=P(arguments,!0,!0,1);return b.filter(t,function(t){return!b.contains(e,t)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(t){for(var e=t&&b.max(t,C).length||0,n=Array(e),i=0;e>i;i++)n[i]=b.pluck(t,i);return n},b.object=function(t,e){for(var n={},i=0,o=C(t);o>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},b.findIndex=i(1),b.findLastIndex=i(-1),b.sortedIndex=function(t,e,n,i){n=w(n,i,1);for(var o=n(e),r=0,s=C(t);s>r;){var a=Math.floor((r+s)/2);n(t[a])<o?r=a+1:s=a}return r},b.indexOf=o(1,b.findIndex,b.sortedIndex),b.lastIndexOf=o(-1,b.findLastIndex),b.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),o=Array(i),r=0;i>r;r++,t+=n)o[r]=t;return o};var O=function(t,e,n,i,o){if(!(i instanceof e))return t.apply(n,o);var r=M(t.prototype),s=t.apply(r,o);return b.isObject(s)?s:r};b.bind=function(t,e){if(g&&t.bind===g)return g.apply(t,d.call(arguments,1));if(!b.isFunction(t))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),i=function(){return O(t,i,e,this,n.concat(d.call(arguments)))};return i},b.partial=function(t){var e=d.call(arguments,1),n=function(){for(var i=0,o=e.length,r=Array(o),s=0;o>s;s++)r[s]=e[s]===b?arguments[i++]:e[s];for(;i<arguments.length;)r.push(arguments[i++]);return O(t,n,this,this,r)};return n},b.bindAll=function(t){var e,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(e=1;i>e;e++)n=arguments[e],t[n]=b.bind(t[n],t);return t},b.memoize=function(t,e){var n=function(i){var o=n.cache,r=""+(e?e.apply(this,arguments):i);return b.has(o,r)||(o[r]=t.apply(this,arguments)),o[r]};return n.cache={},n},b.delay=function(t,e){var n=d.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},b.defer=b.partial(b.delay,b,1),b.throttle=function(t,e,n){var i,o,r,s=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:b.now(),s=null,r=t.apply(i,o),s||(i=o=null)};return function(){var c=b.now();a||n.leading!==!1||(a=c);var l=e-(c-a);return i=this,o=arguments,0>=l||l>e?(s&&(clearTimeout(s),s=null),a=c,r=t.apply(i,o),s||(i=o=null)):s||n.trailing===!1||(s=setTimeout(u,l)),r}},b.debounce=function(t,e,n){var i,o,r,s,a,u=function(){var c=b.now()-s;e>c&&c>=0?i=setTimeout(u,e-c):(i=null,n||(a=t.apply(r,o),i||(r=o=null)))};return function(){r=this,o=arguments,s=b.now();var c=n&&!i;return i||(i=setTimeout(u,e)),c&&(a=t.apply(r,o),r=o=null),a}},b.wrap=function(t,e){return b.partial(e,t)},b.negate=function(t){return function(){return!t.apply(this,arguments)}},b.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},b.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},b.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},b.once=b.partial(b.before,2);var T=!{toString:null}.propertyIsEnumerable("toString"),k=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(t){if(!b.isObject(t))return[];if(v)return v(t);var e=[];for(var n in t)b.has(t,n)&&e.push(n);return T&&r(t,e),e},b.allKeys=function(t){if(!b.isObject(t))return[];var e=[];for(var n in t)e.push(n);return T&&r(t,e),e},b.values=function(t){for(var e=b.keys(t),n=e.length,i=Array(n),o=0;n>o;o++)i[o]=t[e[o]];return i},b.mapObject=function(t,e,n){e=w(e,n);for(var i,o=b.keys(t),r=o.length,s={},a=0;r>a;a++)i=o[a],s[i]=e(t[i],i,t);return s},b.pairs=function(t){for(var e=b.keys(t),n=e.length,i=Array(n),o=0;n>o;o++)i[o]=[e[o],t[e[o]]];return i},b.invert=function(t){for(var e={},n=b.keys(t),i=0,o=n.length;o>i;i++)e[t[n[i]]]=n[i];return e},b.functions=b.methods=function(t){var e=[];for(var n in t)b.isFunction(t[n])&&e.push(n);return e.sort()},b.extend=E(b.allKeys),b.extendOwn=b.assign=E(b.keys),b.findKey=function(t,e,n){e=w(e,n);for(var i,o=b.keys(t),r=0,s=o.length;s>r;r++)if(i=o[r],e(t[i],i,t))return i},b.pick=function(t,e,n){var i,o,r={},s=t;if(null==s)return r;b.isFunction(e)?(o=b.allKeys(s),i=x(e,n)):(o=P(arguments,!1,!1,1),i=function(t,e,n){return e in n},s=Object(s));for(var a=0,u=o.length;u>a;a++){var c=o[a],l=s[c];i(l,c,s)&&(r[c]=l)}return r},b.omit=function(t,e,n){if(b.isFunction(e))e=b.negate(e);else{var i=b.map(P(arguments,!1,!1,1),String);e=function(t,e){return!b.contains(i,e)}}return b.pick(t,e,n)},b.defaults=E(b.allKeys,!0),b.create=function(t,e){var n=M(t);return e&&b.extendOwn(n,e),n},b.clone=function(t){return b.isObject(t)?b.isArray(t)?t.slice():b.extend({},t):t},b.tap=function(t,e){return e(t),t},b.isMatch=function(t,e){var n=b.keys(e),i=n.length;if(null==t)return!i;for(var o=Object(t),r=0;i>r;r++){var s=n[r];if(e[s]!==o[s]||!(s in o))return!1}return!0};var F=function(t,e,n,i){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof b&&(t=t._wrapped),e instanceof b&&(e=e._wrapped);var o=p.call(t);if(o!==p.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var r="[object Array]"===o;if(!r){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(b.isFunction(s)&&s instanceof s&&b.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],i=i||[];for(var u=n.length;u--;)if(n[u]===t)return i[u]===e;if(n.push(t),i.push(e),r){if(u=t.length,u!==e.length)return!1;for(;u--;)if(!F(t[u],e[u],n,i))return!1}else{var c,l=b.keys(t);if(u=l.length,b.keys(e).length!==u)return!1;for(;u--;)if(c=l[u],!b.has(e,c)||!F(t[c],e[c],n,i))return!1}return n.pop(),i.pop(),!0};b.isEqual=function(t,e){return F(t,e)},b.isEmpty=function(t){return null==t?!0:L(t)&&(b.isArray(t)||b.isString(t)||b.isArguments(t))?0===t.length:0===b.keys(t).length},b.isElement=function(t){return!(!t||1!==t.nodeType)},b.isArray=m||function(t){return"[object Array]"===p.call(t)},b.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){b["is"+t]=function(e){return p.call(e)==="[object "+t+"]"}}),b.isArguments(arguments)||(b.isArguments=function(t){return b.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(t){return"function"==typeof t||!1}),b.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},b.isNaN=function(t){return b.isNumber(t)&&t!==+t},b.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===p.call(t)},b.isNull=function(t){return null===t},b.isUndefined=function(t){return void 0===t},b.has=function(t,e){return null!=t&&f.call(t,e)},b.noConflict=function(){return s._=a,this},b.identity=function(t){return t},b.constant=function(t){return function(){return t}},b.noop=function(){},b.property=S,b.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},b.matcher=b.matches=function(t){return t=b.extendOwn({},t),function(e){return b.isMatch(e,t)}},b.times=function(t,e,n){var i=Array(Math.max(0,t));e=x(e,n,1);for(var o=0;t>o;o++)i[o]=e(o);return i},b.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},b.now=Date.now||function(){return(new Date).getTime()};var I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=b.invert(I),D=function(t){var e=function(e){return t[e]},n="(?:"+b.keys(t).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(o,e):t}};b.escape=D(I),b.unescape=D(B),b.result=function(t,e,n){var i=null==t?void 0:t[e];return void 0===i&&(i=n),b.isFunction(i)?i.call(t):i};var N=0;b.uniqueId=function(t){var e=++N+"";return t?t+e:e},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,V={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\u2028|\u2029/g,H=function(t){return"\\"+V[t]};b.template=function(t,e,n){!e&&n&&(e=n),e=b.defaults({},e,b.templateSettings);var i=RegExp([(e.escape||z).source,(e.interpolate||z).source,(e.evaluate||z).source].join("|")+"|$","g"),o=0,r="__p+='";t.replace(i,function(e,n,i,s,a){return r+=t.slice(o,a).replace(j,H),o=a+e.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?r+="'+\n((__t=("+i+"))==null?'':__t)+\n'":s&&(r+="';\n"+s+"\n__p+='"),e}),r+="';\n",e.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var s=new Function(e.variable||"obj","_",r)}catch(a){throw a.source=r,a}var u=function(t){return s.call(this,t,b)},c=e.variable||"obj";return u.source="function("+c+"){\n"+r+"}",u},b.chain=function(t){var e=b(t);return e._chain=!0,e};var U=function(t,e){return t._chain?b(e).chain():e};b.mixin=function(t){b.each(b.functions(t),function(e){var n=b[e]=t[e];b.prototype[e]=function(){var t=[this._wrapped];return h.apply(t,arguments),U(this,n.apply(b,t))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=u[t];b.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],U(this,n)}}),b.each(["concat","join","slice"],function(t){var e=u[t];b.prototype[t]=function(){return U(this,e.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}).call(this)},{}],51:[function(t,e,n){function i(t,e,n){var i;return i=e?new r(t,e):new r(t)}var o=function(){return this}(),r=o.WebSocket||o.MozWebSocket;e.exports=r?i:null,r&&(i.prototype=r.prototype)},{}],52:[function(t,e,n){THREE.OrbitControls=function(t,e){function n(){return 2*Math.PI/60/60*f.autoRotateSpeed}function i(){return Math.pow(.95,f.zoomSpeed)}function o(t){if(f.enabled!==!1){if(t.preventDefault(),t.button===f.mouseButtons.ORBIT){if(f.noRotate===!0)return;F=k.ROTATE,v.set(t.clientX,t.clientY)}else if(t.button===f.mouseButtons.ZOOM){if(f.noZoom===!0)return;F=k.DOLLY,M.set(t.clientX,t.clientY)}else if(t.button===f.mouseButtons.PAN){if(f.noPan===!0)return;F=k.PAN,y.set(t.clientX,t.clientY)}F!==k.NONE&&(document.addEventListener("mousemove",r,!1),document.addEventListener("mouseup",s,!1),f.dispatchEvent(N))}}function r(t){if(f.enabled!==!1){t.preventDefault();var e=f.domElement===document?f.domElement.body:f.domElement;if(F===k.ROTATE){if(f.noRotate===!0)return;g.set(t.clientX,t.clientY),_.subVectors(g,v),f.rotateLeft(2*Math.PI*_.x/e.clientWidth*f.rotateSpeed),f.rotateUp(2*Math.PI*_.y/e.clientHeight*f.rotateSpeed),v.copy(g)}else if(F===k.DOLLY){if(f.noZoom===!0)return;S.set(t.clientX,t.clientY),A.subVectors(S,M),A.y>0?f.dollyIn():A.y<0&&f.dollyOut(),M.copy(S)}else if(F===k.PAN){if(f.noPan===!0)return;b.set(t.clientX,t.clientY),x.subVectors(b,y),f.pan(x.x,x.y),y.copy(b)}F!==k.NONE&&f.update()}}function s(){f.enabled!==!1&&(document.removeEventListener("mousemove",r,!1),document.removeEventListener("mouseup",s,!1),f.dispatchEvent(z),F=k.NONE)}function a(t){if(f.enabled!==!1&&f.noZoom!==!0&&F===k.NONE){t.preventDefault(),t.stopPropagation();var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),e>0?f.dollyOut():0>e&&f.dollyIn(),f.update(),f.dispatchEvent(N),f.dispatchEvent(z)}}function u(t){if(f.enabled!==!1&&f.noKeys!==!0&&f.noPan!==!0)switch(t.keyCode){case f.keys.UP:f.pan(0,f.keyPanSpeed),f.update();break;case f.keys.BOTTOM:f.pan(0,-f.keyPanSpeed),f.update();break;case f.keys.LEFT:f.pan(f.keyPanSpeed,0),f.update();break;case f.keys.RIGHT:f.pan(-f.keyPanSpeed,0),f.update()}}function c(t){if(f.enabled!==!1){switch(t.touches.length){case 1:if(f.noRotate===!0)return;F=k.TOUCH_ROTATE,v.set(t.touches[0].pageX,t.touches[0].pageY);break;case 2:if(f.noZoom===!0)return;F=k.TOUCH_DOLLY;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+n*n);M.set(0,i);break;case 3:if(f.noPan===!0)return;F=k.TOUCH_PAN,y.set(t.touches[0].pageX,t.touches[0].pageY);break;default:F=k.NONE}F!==k.NONE&&f.dispatchEvent(N)}}function l(t){if(f.enabled!==!1){t.preventDefault(),t.stopPropagation();var e=f.domElement===document?f.domElement.body:f.domElement;switch(t.touches.length){case 1:if(f.noRotate===!0)return;if(F!==k.TOUCH_ROTATE)return;g.set(t.touches[0].pageX,t.touches[0].pageY),_.subVectors(g,v),f.rotateLeft(2*Math.PI*_.x/e.clientWidth*f.rotateSpeed),f.rotateUp(2*Math.PI*_.y/e.clientHeight*f.rotateSpeed),v.copy(g),f.update();break;case 2:if(f.noZoom===!0)return;if(F!==k.TOUCH_DOLLY)return;var n=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY,o=Math.sqrt(n*n+i*i);S.set(0,o),A.subVectors(S,M),A.y>0?f.dollyOut():A.y<0&&f.dollyIn(),M.copy(S),f.update();break;case 3:if(f.noPan===!0)return;if(F!==k.TOUCH_PAN)return;b.set(t.touches[0].pageX,t.touches[0].pageY),x.subVectors(b,y),f.pan(x.x,x.y),y.copy(b),f.update();break;default:F=k.NONE}}}function h(){f.enabled!==!1&&(f.dispatchEvent(z),F=k.NONE)}this.object=t,this.domElement=void 0!==e?e:document,this.enabled=!0,this.target=new THREE.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};var d,p,f=this,m=1e-6,v=new THREE.Vector2,g=new THREE.Vector2,_=new THREE.Vector2,y=new THREE.Vector2,b=new THREE.Vector2,x=new THREE.Vector2,w=new THREE.Vector3,E=new THREE.Vector3,M=new THREE.Vector2,S=new THREE.Vector2,A=new THREE.Vector2,C=0,L=0,R=1,P=new THREE.Vector3,O=new THREE.Vector3,T=new THREE.Quaternion,k={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},F=k.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var I=(new THREE.Quaternion).setFromUnitVectors(t.up,new THREE.Vector3(0,1,0)),B=I.clone().inverse(),D={type:"change"},N={type:"start"},z={type:"end"};this.rotateLeft=function(t){void 0===t&&(t=n()),L-=t},this.rotateUp=function(t){void 0===t&&(t=n()),C-=t},this.panLeft=function(t){var e=this.object.matrix.elements;w.set(e[0],e[1],e[2]),w.multiplyScalar(-t),P.add(w)},this.panUp=function(t){var e=this.object.matrix.elements;w.set(e[4],e[5],e[6]),w.multiplyScalar(t),P.add(w)},this.pan=function(t,e){var n=f.domElement===document?f.domElement.body:f.domElement;if(f.object instanceof THREE.PerspectiveCamera){var i=f.object.position,o=i.clone().sub(f.target),r=o.length();r*=Math.tan(f.object.fov/2*Math.PI/180),f.panLeft(2*t*r/n.clientHeight),f.panUp(2*e*r/n.clientHeight)}else f.object instanceof THREE.OrthographicCamera?(f.panLeft(t*(f.object.right-f.object.left)/n.clientWidth),f.panUp(e*(f.object.top-f.object.bottom)/n.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(t){void 0===t&&(t=i()),f.object instanceof THREE.PerspectiveCamera?R/=t:f.object instanceof THREE.OrthographicCamera?(f.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*t)),f.object.updateProjectionMatrix(),f.dispatchEvent(D)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(t){void 0===t&&(t=i()),f.object instanceof THREE.PerspectiveCamera?R*=t:f.object instanceof THREE.OrthographicCamera?(f.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/t)),f.object.updateProjectionMatrix(),f.dispatchEvent(D)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.update=function(){var t=this.object.position;E.copy(t).sub(this.target),E.applyQuaternion(I),d=Math.atan2(E.x,E.z),p=Math.atan2(Math.sqrt(E.x*E.x+E.z*E.z),E.y),this.autoRotate&&F===k.NONE&&this.rotateLeft(n()),d+=L,p+=C,d=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,d)),p=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,p)),p=Math.max(m,Math.min(Math.PI-m,p));var e=E.length()*R;e=Math.max(this.minDistance,Math.min(this.maxDistance,e)),this.target.add(P),E.x=e*Math.sin(p)*Math.sin(d),E.y=e*Math.cos(p),E.z=e*Math.sin(p)*Math.cos(d),E.applyQuaternion(B),t.copy(this.target).add(E),this.object.lookAt(this.target),L=0,C=0,R=1,P.set(0,0,0),(O.distanceToSquared(this.object.position)>m||8*(1-T.dot(this.object.quaternion))>m)&&(this.dispatchEvent(D),O.copy(this.object.position),T.copy(this.object.quaternion))},this.reset=function(){F=k.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(D),this.update()},this.getPolarAngle=function(){return p},this.getAzimuthalAngle=function(){return d},this.domElement.addEventListener("contextmenu",function(t){t.preventDefault()},!1),this.domElement.addEventListener("mousedown",o,!1),this.domElement.addEventListener("mousewheel",a,!1),this.domElement.addEventListener("DOMMouseScroll",a,!1),this.domElement.addEventListener("touchstart",c,!1),this.domElement.addEventListener("touchend",h,!1),this.domElement.addEventListener("touchmove",l,!1),window.addEventListener("keydown",u,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,e.exports=THREE.OrbitControls},{}],53:[function(t,e,n){function i(t){return t.replace(l,s)}function o(t){return t.replace(h,a)}function r(t){return t.replace(d,a)}function s(t,e){return c.ShaderChunk[e]+"\n"}function a(t,e){return e}function u(t){return t=i(t),t=o(t),r(t)}var c=t(49),l=/\/\/\s?chunk\(\s?(\w+)\s?\);/g,h=/(_\d+_\d+)(_\d+_\d+)+/g,d=/GLOBAL_VAR_(.+)(_\d+_\d+)+/g;e.exports=u},{49:49}],54:[function(t,e,n){function i(){P.useStats&&(p=new S,A(p.domElement,{position:"absolute",left:"0px",top:"0px",zIndex:2048}),document.body.appendChild(p.domElement)),g=new L.WebGLRenderer({}),g.setClearColor(13421772),g.shadowMap.type=L.PCFSoftShadowMap,g.shadowMap.enabled=!0,document.body.appendChild(g.domElement),v=new L.Scene,v.fog=new L.FogExp2(13421772,.001),m=new L.PerspectiveCamera(45,1,1,3e3),m.position.set(0,3e3,5e3),f=new B(m,g.domElement),f.minDistance=250,f.minPolarAngle=.3,f.maxPolarAngle=Math.PI/2,f.target.y=100,f.update(),k.init(),v.add(k.mesh),_=new O,v.add(_),T.init(),v.add(T.mesh),F.init(g,_),v.add(F.mesh),x=new D.Composer(g),y=new N({blurAmount:1,applyZoomBlur:!0,zoomBlurStrength:.5}),H.push(y),b=new z(1,.3),b.isActive=!0,H.push(b),d=new M.GUI;var t=d.addFolder("particles");t.add(P,"gravity",-5,20),t.add(P,"particlesFromY",0,500).name("from Y"),t.add(P,"particlesYDynamicRange",-500,500).name("y dynamic range"),t.add(P,"particlesDropRadius",0,150).name("drop radius"),t.add(P,"handBounceRatio",0,1).name("hand bounce"),t.add(P,"handForce",0,.1).name("hand force");var e=d.addFolder("environment");e.add(P,"shadowDarkness",.1,.8);var n=d.addFolder("post-processing");n.add(P,"bloomOpacity",0,1).name("bloom"),n.add(b,"isActive").name("vignette"),w=document.querySelector(".logo"),E=document.querySelectorAll(".footer span"),window.addEventListener("click",o),window.addEventListener("resize",s),r({hands:[I]}),R.loop(r),U=Date.now(),s(),a()}function o(){q=!0}function r(t){t.hands&&t.hands.length&&(_.leapUpdate(t.hands[0]),q&&(q=!1))}function s(){V=window.innerWidth,j=window.innerHeight,x.setSize(V,j),m.aspect=V/j,m.updateProjectionMatrix(),g.setSize(V,j)}function a(){var t=Date.now();C(a),P.useStats&&p.begin(),h(t-U),P.useStats&&p.end(),U=t}function u(t,e,n){return t+(e-t)*n}function c(t,e,n){return t>n?n:e>t?e:t}function l(t,e,n){return c((n-t)/(e-t),0,1)}function h(t){F.update(t),k.update(t,m),G=Math.min(G+2e-4*t,1),Y=Math.min(Y+1e-4*t,1);var e=Math.pow(G,.3),n=Math.pow(Y,.3);f.maxDistance=1===Y?1200:u(1400,500,n),f.update();var i=Math.min(1.2*(1-2*Math.abs(Y-.5)),1),o=10*(1-i);w.style.opacity=i,w.style.display=i?"block":"none",w.style.webkitFilter="blur("+o+"px)";for(var r=0,s=E.length;s>r;r++)i=l(.5+.01*r,.6+.01*r,G),E[r].style.transform="translate3d(0,"+50*(1-Math.pow(i,3))+"px,0)";b.params.boost=u(1.1,1,e),b.params.reduction=u(-.1,.4,e),y.blendPass.params.opacity=u(1,P.bloomOpacity,e),y.isActive=!!y.blendPass.params.opacity,k.pointLight.shadowDarkness=P.shadowDarkness;for(var a=!1,r=0,s=H.length;s>r;r++)if(H[r].isActive){a=!0;break}if(g.autoClearColor=!0,a)for(x.reset(),x.render(v,m),r=0,s=H.length;s>r;r++)H[r].isActive&&x.pass(H[r]),x.toScreen();else g.render(v,m)}var d,p,f,m,v,g,_,y,b,x,w,E,M=(t(36),t(17)),S=t(48),A=t(20),C=t(46),L=t(49),R=t(75),P=t(62),O=t(56),T=t(59),k=t(60),F=t(61),I=t(57),B=t(52),D=t(1),N=t(6),z=t(11),V=0,j=0,H=[],U=0,G=0,Y=0,q=!1,W=new Image;W.src="images/logo.png",W.width?i():W.onload=i},{1:1,11:11,17:17,20:20,36:36,46:46,48:48,49:49,52:52,56:56,57:57,59:59,6:6,60:60,61:61,62:62,75:75}],55:[function(t,e,n){function i(t,e,n){u.Object3D.call(this),this.fingerIndex=t,this.fromNodeIndex=e,this.toNodeIndex=n,this.outputMatrix=new u.Matrix4,this.tmpPosition=new u.Vector3,this.tmpQuaternion=new u.Quaternion,this.tmpScale=new u.Vector3,this.nodeAdjustmentQuaternion=(new u.Quaternion).setFromAxisAngle(new u.Vector3(1,0,0),-Math.PI/2),this.bone=new u.Mesh(o(),c()),this.bone.castShadow=!0,this.bone.receiveShadow=!0,this.add(this.bone),this.node=new u.Mesh(r(),c()),this.node.castShadow=!0,this.node.receiveShadow=!0,this.add(this.node)}function o(){return d||(d=new u.CylinderGeometry(1,1,1,12,1),d.translate(0,-.5,0)),d}function r(){return p||(p=new u.SphereGeometry(1,10,12)),p}function s(){var t=this.outputMatrix,e=this.tmpPosition,n=this.tmpQuaternion,i=this.tmpScale;return t.copy(this.bone.matrixWorld),t.decompose(e,n,i),t.compose(e,n,f),t.getInverse(t),t.elements[3]=i.x,t.elements[7]=i.y,t.elements[11]=i.z,Array.prototype.slice.call(t.elements)}function a(t){var e=t[this.fingerIndex],n=e.positions,i=n[this.fromNodeIndex],o=n[this.toNodeIndex],r=e.width/2;this.node.position.set(i[0],i[1],i[2]),this.bone.position.set(o[0],o[1],o[2]),this.bone.lookAt(this.node.position),this.node.scale.set(r,r,r);var s=this.bone.position.distanceTo(this.node.position);this.node.position.copy(this.bone.position),this.bone.scale.set(r,s,r),this.bone.quaternion.multiply(this.nodeAdjustmentQuaternion)}var u=(t(62),t(49)),c=t(63).getMaterial;e.exports=i;var l=u.Object3D.prototype,h=i.prototype=Object.create(l);h.constructor=i,h.updateOutputMatrix=s,h.leapUpdate=a;var d,p,f=new u.Vector3(1,1,1)},{49:49,62:62,63:63}],56:[function(t,e,n){function i(){u.Object3D.call(this),this.fingerBones=[],this.palmOutputMatrix=new u.Matrix4,this.tmpPosition=new u.Vector3,this.tmpQuaternion=new u.Quaternion,this.tmpScale=new u.Vector3;var t=(new u.Quaternion).setFromAxisAngle(new u.Vector3(1,0,0),-Math.PI/2);t.multiply((new u.Quaternion).setFromAxisAngle(new u.Vector3(0,0,1),Math.PI/6)),this.palmOutputAdjustmentMatrix=(new u.Matrix4).makeRotationFromQuaternion(t),this.palmMeshAdjustmentQuaternion=(new u.Quaternion).setFromAxisAngle(new u.Vector3(0,1,0),Math.PI/6),this.palmVelocity=new u.Vector3,this._initFingers(),this._initPalm()}function o(){for(var t,e=0;5>e;e++)for(var n=1;4>n;n++)t=new c(e,n,n+1),this.fingerBones.push(t),this.add(t)}function r(){var t=new u.CylinderGeometry(1,1,1,6);this.palm=new u.Mesh(t,l()),this.palm.castShadow=!0,this.palm.receiveShadow=!0,this.add(this.palm)}function s(t){for(var e=t.fingers,n=this.fingerBones,i=0,o=n.length;o>i;i++)n[i].leapUpdate(e);this.palm.position.fromArray(t.palmPosition),this.palm.rotation.set(t.pitch(),-t.yaw(),t.roll()),this.palm.translateZ(20),this.palm.translateX(-5),this.palm.quaternion.multiply(this.palmMeshAdjustmentQuaternion);var r=(new u.Vector3).fromArray(t.pinky.positions[1]),s=(new u.Vector3).fromArray(t.thumb.positions[1]),a=.45*r.distanceTo(s);this.palm.scale.set(a,1.2*t.thumb.width,a),this.palmVelocity.fromArray(t.palmVelocity),this.updateMatrixWorld(),this.updateOutputMatrix()}function a(){var t=[],e=this.palmOutputMatrix,n=this.tmpPosition,i=this.tmpQuaternion,o=this.tmpScale;e.copy(this.palm.matrixWorld),e.multiply(this.palmOutputAdjustmentMatrix),e.decompose(n,i,o),e.compose(n,i,p),e.getInverse(e),e.elements[3]=.866025*o.x,e.elements[7]=.866025*o.y,e.elements[11]=o.z,t.push(Array.prototype.slice.call(e.elements));for(var r=this.fingerBones,s=0,a=r.length;a>s;s++)t.push(r[s].updateOutputMatrix()),r[s].updateOutputMatrix();return t}var u=(t(62),t(49)),c=t(55),l=t(63).getMaterial;e.exports=i;var h=u.Object3D.prototype,d=i.prototype=Object.create(h);d.constructor=i,d._initFingers=o,d._initPalm=r,d.leapUpdate=s,d.updateOutputMatrix=a;var p=new u.Vector3(1,1,1)},{49:49,55:55,62:62,63:63}],57:[function(t,e,n){e.exports={fingers:[{positions:[[-82.7319,33.8079,81.6507],[-82.7319,33.8079,81.6507],[-39.3405,53.4473,66.7093],[-8.43841,66.8659,61.464],[-3.5891,70.409,43.9993]],width:20.25},{positions:[[-96.16,53.3051,82.8463],[-55.7517,106.4,51.8535],[-31.345,135.869,32.3164],[-14.5136,145.228,17.7113],[-5.19045,147.288,9.40499]],width:19.3428},{positions:[[-104.87,55.9003,74.5382],[-73.2802,106.494,38.3453],[-48.4068,134.747,8.23954],[-28.5851,139.889,-11.4911],[-18.231,138.466,-20.5768]],width:18.9972},{positions:[[-112.945,55.4585,65.2907],[-91.7436,99.994,26.6792],[-70.4668,128.419,-.442044],[-51.3668,135.907,-19.0572],[-40.7008,136.068,-27.7728]],width:18.077},{positions:[[-118.298,48.5991,54.0274],[-106.452,89.7683,14.9498],[-93.3419,110.39,-10.6071],[-80.2055,114.368,-24.5409],[-70.0599,113.711,-32.0629]],width:16.0574}],palmPosition:[-81.83,83.3129,45.2651],palmVelocity:[1.78109,-1.63907,-1.92123],_pitch:1.0615306607563884,_yaw:.6538980433882265,_roll:.7851885703254726,pinky:{positions:[0,[-106.452,89.7683,14.9498]]},thumb:{positions:[0,[-82.7319,33.8079,81.6507]],width:20.25},pitch:function(){return this._pitch},yaw:function(){return this._yaw},roll:function(){return this._roll}}},{}],58:[function(t,e,n){function i(t,e){g=t;var n=g.getContext();if(!n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS))return void alert("No support for vertex shader textures!");if(!n.getExtension("OES_texture_float"))return void alert("No OES_texture_float support for float textures!");x=[e.palmOutputMatrix];for(var i=0,o=e.fingerBones.length;o>i;i++)x.push(e.fingerBones[i].outputMatrix);y=new E.Scene,b=new E.Camera,b.position.z=1,l=new E.ShaderMaterial({uniforms:{resolution:{type:"v2",value:new E.Vector2(S,S)},texture:{type:"t",value:null}},vertexShader:M("#define GLSLIFY 1\nvoid main() {\n    gl_Position = vec4( position, 1.0 );\n}\n"),fragmentShader:M("#define GLSLIFY 1\nuniform vec2 resolution;\nuniform sampler2D texture;\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / resolution.xy;\n    vec3 color = texture2D( texture, uv ).xyz;\n    gl_FragColor = vec4( color, 1.0 );\n}\n")}),h=new E.ShaderMaterial({uniforms:{texturePosition:{type:"t",value:null},textureVelocity:{type:"t",value:null},resolution:{type:"v2",value:new E.Vector2(S,S)},data:{type:"m4v",value:x},handBounceRatio:{type:"f",value:w.handBounceRatio},handForce:{type:"f",value:w.handForce},gravity:{type:"f",value:w.gravity},palmVelocity:{type:"v3",value:e.palmVelocity}},vertexShader:M("#define GLSLIFY 1\nvoid main() {\n    gl_Position = vec4( position, 1.0 );\n}\n"),fragmentShader:M("#define GLSLIFY 1\nuniform vec2 resolution;\n\nuniform sampler2D textureVelocity;\nuniform sampler2D texturePosition;\nuniform mat4 data[16];\nuniform vec3 palmVelocity;\n\nuniform float handBounceRatio;\nuniform float handForce;\nuniform float gravity;\n\nconst float INTERSECTION_PRECISION = 1.0;\nconst float FAR = 2000.0;\n\nfloat sdSphere_4_0( vec3 p, float s ) {\n  return length(p)-s;\n}\n\nfloat sdCappedCylinderLower_4_1( vec3 p, vec2 h ){\n  vec2 d = abs(vec2(length(p.xz),p.y + h.y)) - h;\n  return min(max(d.x,d.y),0.0) + length(max(d,0.0));\n}\n\nfloat sdFingerBone_4_2( in vec3 p, in mat4 fingerBone) {\n\n    vec3 scale = vec3(fingerBone[0][3], fingerBone[1][3], fingerBone[2][3]);\n\n    fingerBone[0][3] = 0.0;\n    fingerBone[1][3] = 0.0;\n    fingerBone[2][3] = 0.0;\n\n    p = (fingerBone * vec4(p, 1.0)).xyz;\n\n    return min(\n        sdSphere_4_0(p, scale.x),\n        sdCappedCylinderLower_4_1(p, vec2(scale.x, scale.y / 2.0))\n    );\n}\n\n\n\n\nfloat sdHexPrism_1_3( vec3 p, vec2 h ) {\n    vec3 q = abs(p);\n    return max(q.z-h.y,max((q.x*0.866025+q.y*0.5),q.y)-h.x);\n}\n\nfloat map_1_4( in vec3 p ) {\n    float d = GLOBAL_VAR_FAR_1_5;\n\n    mat4 palmData = GLOBAL_VAR_data_1_6[0];\n    vec3 scale = vec3(palmData[0][3], palmData[1][3], palmData[2][3]);\n\n    palmData[0][3] = 0.0;\n    palmData[1][3] = 0.0;\n    palmData[2][3] = 0.0;\n\n    d = min(d, sdHexPrism_1_3((palmData * vec4(p, 1.0)).xyz, vec2(scale.x, scale.z / 2.0)));\n\n    for( int i = 1; i < 16; i++ ) {\n        d = min(d, sdFingerBone_4_2(p, GLOBAL_VAR_data_1_6[i]));\n    }\n\n    return d;\n}\n\n\n\n\n\nvec3 calcNormal_2_7( in vec3 p ) {\n\n    vec2 e = vec2(1.0, -1.0) * 0.5773 * 0.01;\n    return normalize( e.xyy * map_1_4_2_8( p + e.xyy ) +\n        e.yyx * map_1_4_2_8( p + e.yyx ) +\n        e.yxy * map_1_4_2_8( p + e.yxy ) +\n        e.xxx * map_1_4_2_8( p + e.xxx ) );\n}\n\n\n\nfloat hash_3_9( float v ) { return fract( sin(v) * 12.419821); }\n\nhighp float random_5_10(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt= dot(co.xy ,vec2(a,b));\n    highp float sn= mod(dt,3.14);\n    return fract(sin(sn) * c);\n}\n\n\n\nvoid main() {\n\n    vec2 uv = gl_FragCoord.xy / resolution.xy;\n\n    vec4 positionInfo = texture2D( texturePosition, uv );\n    vec3 position = positionInfo.xyz;\n    vec3 velocity = texture2D( textureVelocity, uv ).xyz;\n\n    float d = map_1_4(position);\n\n    if(positionInfo.w < 0.005) {\n\n        d = FAR;\n        velocity = vec3( 0.0, random_5_10(uv) * 1.0, 0.0 );\n\n    } else {\n\n        if(position.y < 0.0) {\n            float groundBounceRatio =  random_5_10(position.xz);\n            velocity.y *= -0.5 * groundBounceRatio;\n            velocity.xz *= 0.5 * groundBounceRatio;\n\n            // add some fake physics on the floor to make it looks better when\n            // the hand is not blocking the particles\n            float strength = length(velocity) * pow(positionInfo.w, 3.0);\n            velocity.x += (random_5_10(uv + 0.1) - 0.5) *strength;\n            velocity.z += (random_5_10(uv + 0.4) - 0.5) *strength;\n        } else {\n            velocity.y -= (0.03 - 0.005 * random_5_10(uv + 5.0)) * gravity;\n        }\n\n        float velocityDistance = length(velocity);\n        d = map_1_4(position);\n        if(d < velocityDistance) {\n\n            if(d > INTERSECTION_PRECISION) {\n                // raymarch\n                vec3 rd = normalize(velocity);\n                position = position + rd * d;\n\n                float dd = 0.0;\n                for( int i = 0; i < 10; i++ ) {\n                    dd = map_1_4( position);\n                    if(dd < INTERSECTION_PRECISION || d > FAR) break;\n                    d += dd;\n                    position += rd * dd;\n                }\n\n            }\n            vec3 normal = calcNormal_2_7(position);\n\n            velocity = reflect(velocity, normal) * handBounceRatio;\n            vec3 palmDirection = normalize(palmVelocity);\n            velocity += palmVelocity * handForce * max(dot(palmDirection, normal), 0.0);\n\n        }\n    }\n\n    gl_FragColor = vec4(velocity, d );\n\n}\n"),
transparent:!1,depthWrite:!1,depthTest:!1}),d=new E.ShaderMaterial({uniforms:{resolution:{type:"v2",value:new E.Vector2(S,S)},texturePosition:{type:"t",value:null},textureVelocity:{type:"t",value:null},textureVelocity2:{type:"t",value:null},dropRadius:{type:"f",value:w.particlesDropRadius},fromY:{type:"f",value:w.particlesFromY},yDynamicRange:{type:"f",value:w.particlesYDynamicRange},data:{type:"m4v",value:x}},vertexShader:M("#define GLSLIFY 1\nvoid main() {\n    gl_Position = vec4( position, 1.0 );\n}\n"),fragmentShader:M("#define GLSLIFY 1\nuniform vec2 resolution;\n\nuniform sampler2D textureVelocity2;\nuniform sampler2D textureVelocity;\nuniform sampler2D texturePosition;\nuniform mat4 data[16];\n\nuniform float dropRadius;\nuniform float fromY;\nuniform float yDynamicRange;\n\nconst float INTERSECTION_PRECISION = 1.0;\nconst float FAR = 2000.0;\nconst float PI_2 = 6.2831853072;\n\nfloat sdSphere_4_0( vec3 p, float s ) {\n  return length(p)-s;\n}\n\nfloat sdCappedCylinderLower_4_1( vec3 p, vec2 h ){\n  vec2 d = abs(vec2(length(p.xz),p.y + h.y)) - h;\n  return min(max(d.x,d.y),0.0) + length(max(d,0.0));\n}\n\nfloat sdFingerBone_4_2( in vec3 p, in mat4 fingerBone) {\n\n    vec3 scale = vec3(fingerBone[0][3], fingerBone[1][3], fingerBone[2][3]);\n\n    fingerBone[0][3] = 0.0;\n    fingerBone[1][3] = 0.0;\n    fingerBone[2][3] = 0.0;\n\n    p = (fingerBone * vec4(p, 1.0)).xyz;\n\n    return min(\n        sdSphere_4_0(p, scale.x),\n        sdCappedCylinderLower_4_1(p, vec2(scale.x, scale.y / 2.0))\n    );\n}\n\n\n\n\nfloat sdHexPrism_1_3( vec3 p, vec2 h ) {\n    vec3 q = abs(p);\n    return max(q.z-h.y,max((q.x*0.866025+q.y*0.5),q.y)-h.x);\n}\n\nfloat map_1_4( in vec3 p ) {\n    float d = GLOBAL_VAR_FAR_1_5;\n\n    mat4 palmData = GLOBAL_VAR_data_1_6[0];\n    vec3 scale = vec3(palmData[0][3], palmData[1][3], palmData[2][3]);\n\n    palmData[0][3] = 0.0;\n    palmData[1][3] = 0.0;\n    palmData[2][3] = 0.0;\n\n    d = min(d, sdHexPrism_1_3((palmData * vec4(p, 1.0)).xyz, vec2(scale.x, scale.z / 2.0)));\n\n    for( int i = 1; i < 16; i++ ) {\n        d = min(d, sdFingerBone_4_2(p, GLOBAL_VAR_data_1_6[i]));\n    }\n\n    return d;\n}\n\n\n\n\n\nvec3 calcNormal_2_7( in vec3 p ) {\n\n    vec2 e = vec2(1.0, -1.0) * 0.5773 * 0.01;\n    return normalize( e.xyy * map_1_4_2_8( p + e.xyy ) +\n        e.yyx * map_1_4_2_8( p + e.yyx ) +\n        e.yxy * map_1_4_2_8( p + e.yxy ) +\n        e.xxx * map_1_4_2_8( p + e.xxx ) );\n}\n\n\n\nfloat hash_3_9( float v ) { return fract( sin(v) * 12.419821); }\n\nhighp float random_5_10(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt= dot(co.xy ,vec2(a,b));\n    highp float sn= mod(dt,3.14);\n    return fract(sin(sn) * c);\n}\n\n\n\nvoid main() {\n\n    vec2 uv = gl_FragCoord.xy / resolution.xy;\n\n    vec4 positionInfo = texture2D( texturePosition, uv );\n    vec3 position = positionInfo.xyz;\n    vec3 prevVelocity = texture2D( textureVelocity2, uv ).xyz;\n    vec4 velocityInfo = texture2D( textureVelocity, uv );\n    vec3 velocity = velocityInfo.xyz;\n\n    float d = velocityInfo.w;\n\n    positionInfo.w -= 0.005;\n\n    if(positionInfo.w < 0.0) {\n\n        positionInfo.w = 1.0 + random_5_10(uv + 2.0);\n        float a = (uv.x) * PI_2;\n        float r = pow((uv.y), 0.75) * dropRadius;\n        position = vec3( cos(a) * r, fromY + random_5_10(uv + 1.0) * yDynamicRange, sin(a) * r );\n\n    } else {\n\n        float velocityDistance = length(prevVelocity);\n        if(d < velocityDistance) {\n\n            if(d > INTERSECTION_PRECISION) {\n                // raymarch\n                vec3 rd = normalize(prevVelocity);\n                position = position + rd * d;\n\n                float dd = 0.0;\n                for( int i = 0; i < 10; i++ ) {\n                    dd = map_1_4( position);\n                    if(dd < INTERSECTION_PRECISION || d > FAR) break;\n                    d += dd;\n                    position += rd * dd;\n                }\n\n            }\n            vec3 normal = calcNormal_2_7(position);\n\n            if(d < 0.0) {\n                position += normal * (-d + INTERSECTION_PRECISION);\n            }\n\n        }\n\n        position += velocity;\n    }\n\n    gl_FragColor = vec4(position, positionInfo.w);\n\n}\n"),transparent:!1,depthWrite:!1,depthTest:!1}),_=new E.Mesh(new E.PlaneBufferGeometry(2,2),l),y.add(_),p=new E.WebGLRenderTarget(S,S,{wrapS:E.RepeatWrapping,wrapT:E.RepeatWrapping,minFilter:E.NearestFilter,magFilter:E.NearestFilter,format:E.RGBAFormat,type:E.FloatType,depthBuffer:!1,stencilBuffer:!1}),f=p.clone(),s(a(),p),s(p,f),m=new E.WebGLRenderTarget(S,S,{wrapS:E.RepeatWrapping,wrapT:E.RepeatWrapping,minFilter:E.NearestFilter,magFilter:E.NearestFilter,format:E.RGBAFormat,type:E.FloatType,depthBuffer:!1,stencilBuffer:!1}),v=m.clone(),s(u(),m),s(m,v)}function o(t){var e=p;p=f,f=e,_.material=h,h.uniforms.textureVelocity.value=f,h.uniforms.texturePosition.value=m,g.render(y,b,p)}function r(t){var e=m;m=v,v=e,_.material=d,d.uniforms.texturePosition.value=v,d.uniforms.textureVelocity.value=p,d.uniforms.textureVelocity2.value=f,g.render(y,b,m)}function s(t,e){_.material=l,l.uniforms.texture.value=t,g.render(y,b,e)}function a(){for(var t=new Float32Array(4*A),e=0,n=t.length;n>e;e+=4)t[e+0]=0,t[e+1]=Math.random(),t[e+2]=0;var i=new E.DataTexture(t,S,S,E.RGBAFormat,E.FloatType);return i.minFilter=E.NearestFilter,i.magFilter=E.NearestFilter,i.needsUpdate=!0,i.flipY=!1,i}function u(){for(var t,e,n=new Float32Array(4*A),i=w.particlesDropRadius,o=w.particlesFromY,r=w.particlesYDynamicRange,s=0,a=n.length;a>s;s+=4)e=Math.random()*Math.PI,t=Math.pow(Math.random(),.75)*i,n[s+0]=Math.cos(e)*t,n[s+1]=o+Math.random()*r,n[s+2]=Math.sin(e)*t,n[s+3]=.5+Math.random();var u=new E.DataTexture(n,S,S,E.RGBAFormat,E.FloatType);return u.minFilter=E.NearestFilter,u.magFilter=E.NearestFilter,u.needsUpdate=!0,u.generateMipmaps=!1,u.flipY=!1,u}function c(t){return d.uniforms.dropRadius.value=w.particlesDropRadius,d.uniforms.fromY.value=w.particlesFromY,d.uniforms.yDynamicRange.value=w.particlesYDynamicRange,h.uniforms.handBounceRatio.value=w.handBounceRatio,h.uniforms.handForce.value=w.handForce,h.uniforms.gravity.value=w.gravity,o(t),r(t),m}var l,h,d,p,f,m,v,g,_,y,b,x,w=t(62),E=t(49),M=t(53),S=n.TEXTURE_SIZE=w.textureSize,A=n.AMOUNT=S*S;n.init=i,n.update=c},{49:49,53:53,62:62}],59:[function(t,e,n){function i(){var t=new r.PlaneGeometry(4e3,4e3,10,10),e=new r.MeshPhongMaterial({color:10066329}),i=n.mesh=new r.Mesh(t,e);i.rotation.x=-1.57,i.castShadow=!1,i.receiveShadow=!0}var o,r=(t(62),t(49));n.mesh=o,n.init=i},{49:49,62:62}],60:[function(t,e,n){function i(){c=n.mesh=new a.Object3D,c.position.y=150;var t=new a.AmbientLight(3355443);c.add(t),l=n.pointLight=new a.PointLight(13421772,1,800),l.castShadow=!0,l.shadowCameraNear=10,l.shadowCameraFar=800,l.shadowCameraFov=90,l.shadowBias=s.shadowDarkness,l.shadowDarkness=.3,l.shadowMapWidth=2048,l.shadowMapHeight=1024,c.add(l);var e=new a.PlaneGeometry(100,100),i=new a.ShaderMaterial({uniforms:{},vertexShader:u("#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n    vUv = uv;\n\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"),fragmentShader:u("#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n    float d = max(1.0 - length(vUv - 0.5) * 2.0, 0.0);\n    gl_FragColor = vec4( d );\n}\n"),transparent:!0,blending:a.AdditiveBlending,depthTest:!0,depthWrite:!1});h=new a.Mesh(e,i),c.add(h)}function o(t,e){d+=t*s.lightSpeed;var n=5e-4*d-.2;c.position.x=200*Math.cos(n),c.position.z=200*Math.sin(n),h.lookAt(e.position)}var r,s=t(62),a=t(49),u=t(53),c=n.mesh=r,l=n.pointLight=r;n.init=i,n.update=o;var h,d=0},{49:49,53:53,62:62}],61:[function(t,e,n){function i(t,e){l.init(t,e),o(),r(),d=u.useBillboardParticle?n.mesh=new c.Mesh(p,f):n.mesh=new c.Points(p,f),d.castShadow=!0,d.receiveShadow=!0,d.customDistanceMaterial=m}function o(){var t=l.TEXTURE_SIZE,e=l.AMOUNT;p=new c.BufferGeometry;var n,i,o;if(u.useBillboardParticle){i=new Float32Array(3*e*3),o=new Float32Array(3*e*2);var r=new Float32Array(3*e*3);p.addAttribute("positionFlip",new c.BufferAttribute(r,3));var s,a,h=2*Math.PI/3;for(n=0;e>n;n++)s=6*n,a=9*n,i[a+0]=Math.sin(2*h+Math.PI),i[a+1]=Math.cos(2*h+Math.PI),i[a+3]=Math.sin(h+Math.PI),i[a+4]=Math.cos(h+Math.PI),i[a+6]=Math.sin(3*h+Math.PI),i[a+7]=Math.cos(3*h+Math.PI),r[a+0]=Math.sin(2*h),r[a+1]=Math.cos(2*h),r[a+3]=Math.sin(h),r[a+4]=Math.cos(h),r[a+6]=Math.sin(3*h),r[a+7]=Math.cos(3*h),o[s+0]=o[s+2]=o[s+4]=n%t/t,o[s+1]=o[s+3]=o[s+5]=~~(n/t)/t}else{i=new Float32Array(3*e),o=new Float32Array(2*e);var d;for(n=0;e>n;n++)d=2*n,o[d+0]=n%t/t,o[d+1]=~~(n/t)/t}p.addAttribute("position",new c.BufferAttribute(i,3)),p.addAttribute("fboUV",new c.BufferAttribute(o,2))}function r(){f=new c.ShaderMaterial({uniforms:{texturePosition:{type:"t",value:null},flipRatio:{type:"f",value:0},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new c.Color(16777215)},shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}},defines:{USE_BILLBOARD:u.useBillboardParticle},vertexShader:h("#define GLSLIFY 1\nattribute vec2 fboUV;\nuniform sampler2D texturePosition;\n\n#ifdef USE_BILLBOARD\n\n    attribute vec3 positionFlip;\n    uniform float flipRatio;\n\n#else\n\n    varying float vAlpha;\n\n#endif\n\n// chunk(shadowmap_pars_vertex);\n\nvoid main() {\n\n    vec4 posInfo = texture2D( texturePosition, fboUV );\n    vec3 pos = posInfo.xyz;\n\n    vec4 worldPosition = modelMatrix * vec4( pos, 1.0 );\n    vec4 mvPosition = viewMatrix * worldPosition;\n\n    #ifdef USE_BILLBOARD\n\n        vec4 flipOffset = vec4(mix(position, positionFlip, flipRatio) * 0.5, 1.0);\n        worldPosition += flipOffset;\n\n    #else\n        gl_PointSize = ( 500.0 / length( mvPosition.xyz ) );\n        mvPosition.y += gl_PointSize * 0.5;\n\n    #endif\n\n    // chunk(shadowmap_vertex);\n\n\n    #ifdef USE_BILLBOARD\n\n        gl_Position = projectionMatrix * (mvPosition + flipOffset);\n\n    #else\n\n        vAlpha = smoothstep(0.0, 0.1, posInfo.w);\n        gl_Position = projectionMatrix * mvPosition;\n\n    #endif\n\n\n}\n"),fragmentShader:h("#define GLSLIFY 1\n// chunk(common);\n// chunk(fog_pars_fragment);\n// chunk(shadowmap_pars_fragment);\n\n#ifdef USE_BILLBOARD\n\n#else\n\n    varying float vAlpha;\n\n#endif\n\nvoid main() {\n\n    vec3 outgoingLight = vec3(1.0);\n\n    // chunk(shadowmap_fragment);\n\n    outgoingLight *= 0.1 + pow(shadowMask, vec3(1.5)) * 0.9;\n\n    // chunk(fog_fragment);\n    // chunk(linear_to_gamma_fragment);\n\n\n    #ifdef USE_BILLBOARD\n\n        gl_FragColor = vec4( outgoingLight, 1.0 );\n\n    #else\n\n        float d = length(gl_PointCoord.xy - .5) * 2.0;\n\n        gl_FragColor = vec4( outgoingLight, vAlpha ) * (1.0 - step(1.0, d)) ;\n\n    #endif\n}\n"),transparent:u.useBillboardParticle?!1:!0,blending:u.useBillboardParticle?c.NoBlending:c.NormalBlending,depthTest:!0,depthWrite:!0,fog:!0}),m=new c.ShaderMaterial({uniforms:{lightPos:{type:"v3",value:new c.Vector3(0,0,0)},texturePosition:{type:"t",value:null},flipRatio:{type:"f",value:0}},defines:{USE_BILLBOARD:u.useBillboardParticle},vertexShader:h("#define GLSLIFY 1\nattribute vec2 fboUV;\n\nuniform sampler2D texturePosition;\n\n\n\n#ifdef USE_BILLBOARD\n\n    attribute vec3 positionFlip;\n    uniform float flipRatio;\n\n#endif\n\nvarying vec4 vWorldPosition;\n\nvoid main() {\n\n    vec3 pos = texture2D( texturePosition, fboUV ).xyz;\n\n    vec4 worldPosition = modelMatrix * vec4( pos, 1.0 );\n    vec4 mvPosition = viewMatrix * worldPosition;\n\n    #ifdef USE_BILLBOARD\n\n        vec4 flipOffset = vec4(mix(position, positionFlip, flipRatio) * 0.5, 1.0);\n        gl_Position = projectionMatrix * (mvPosition + flipOffset);\n\n    #else\n\n        gl_PointSize = ( 300.0 / length( mvPosition.xyz ) );\n        mvPosition.y += gl_PointSize* 0.5;\n        gl_Position = projectionMatrix * mvPosition;\n\n    #endif\n\n    vWorldPosition = worldPosition;\n\n}\n"),fragmentShader:h("#define GLSLIFY 1\nuniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n\nvec4 pack1K ( float depth ) {\n\n   depth /= 1000.0;\n   const vec4 bitSh = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n   const vec4 bitMsk = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n   vec4 res = fract( depth * bitSh );\n   res -= res.xxyz * bitMsk;\n   return res;\n\n}\n\nfloat unpack1K ( vec4 color ) {\n\n   const vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n   return dot( color, bitSh ) * 1000.0;\n\n}\n\nvoid main () {\n\n   gl_FragColor = pack1K( length( vWorldPosition.xyz - lightPos.xyz ) );\n\n}\n"),depthTest:!0,depthWrite:!0,side:c.BackSide})}function s(){var t=l.update(0);d.material.uniforms.texturePosition.value=t,d.customDistanceMaterial.uniforms.texturePosition.value=t,u.useBillboardParticle&&(d.material.uniforms.flipRatio.value^=1,d.customDistanceMaterial.uniforms.flipRatio.value^=1)}var a,u=t(62),c=t(49),l=t(58),h=t(53),d=n.mesh=a;n.init=i,n.update=s;var p,f,m},{49:49,53:53,58:58,62:62}],62:[function(t,e,n){n.useStats=!1,n.useBillboardParticle=!1,n.textureSize=512,n.shadowDarkness=.35,n.lightSpeed=0,n.bloomOpacity=.45,n.particlesDropRadius=20,n.particlesFromY=300,n.particlesYDynamicRange=300,n.handBounceRatio=.1,n.handForce=.015,n.gravity=10},{}],63:[function(t,e,n){function i(){return o||(o=new r.MeshPhongMaterial({color:16777215})),o}var o,r=(t(62),t(49));n.getMaterial=i},{49:49,62:62}],64:[function(t,e,n){var i=(t(78),t(25)),o=i.vec3,r=i.mat3,s=i.mat4,a=(t(50),e.exports=function(t,e){this.finger=t,this._center=null,this._matrix=null,this.type=e.type,this.prevJoint=e.prevJoint,this.nextJoint=e.nextJoint,this.width=e.width;var n=new Array(3);o.sub(n,e.nextJoint,e.prevJoint),this.length=o.length(n),this.basis=e.basis});a.prototype.left=function(){return this._left?this._left:(this._left=r.determinant(this.basis[0].concat(this.basis[1]).concat(this.basis[2]))<0,this._left)},a.prototype.matrix=function(){if(this._matrix)return this._matrix;var t=this.basis,e=this._matrix=s.create();return e[0]=t[0][0],e[1]=t[0][1],e[2]=t[0][2],e[4]=t[1][0],e[5]=t[1][1],e[6]=t[1][2],e[8]=t[2][0],e[9]=t[2][1],e[10]=t[2][2],e[3]=this.center()[0],e[7]=this.center()[1],e[11]=this.center()[2],this.left()&&(e[0]*=-1,e[1]*=-1,e[2]*=-1),this._matrix},a.prototype.lerp=function(t,e){o.lerp(t,this.prevJoint,this.nextJoint,e)},a.prototype.center=function(){if(this._center)return this._center;var t=o.create();return this.lerp(t,.5),this._center=t,t},a.prototype.direction=function(){return[-1*this.basis[2][0],-1*this.basis[2][1],-1*this.basis[2][2]]}},{25:25,50:50,78:78}],65:[function(t,e,n){var i=e.exports=function(t){this.pos=0,this._buf=[],this.size=t};i.prototype.get=function(t){return void 0==t&&(t=0),t>=this.size||t>=this._buf.length?void 0:this._buf[(this.pos-t-1)%this.size]},i.prototype.push=function(t){return this._buf[this.pos%this.size]=t,this.pos++}},{}],66:[function(t,e,n){var i=t(79).chooseProtocol,o=t(14).EventEmitter,r=t(50),s=e.exports=function(t){this.opts=r.defaults(t||{},{host:"127.0.0.1",enableGestures:!1,scheme:this.getScheme(),port:this.getPort(),background:!1,optimizeHMD:!1,requestProtocolVersion:s.defaultProtocolVersion}),this.host=this.opts.host,this.port=this.opts.port,this.scheme=this.opts.scheme,this.protocolVersionVerified=!1,this.background=null,this.optimizeHMD=null,this.on("ready",function(){this.enableGestures(this.opts.enableGestures),this.setBackground(this.opts.background),this.setOptimizeHMD(this.opts.optimizeHMD),this.opts.optimizeHMD?console.log("Optimized for head mounted display usage."):console.log("Optimized for desktop usage.")})};s.defaultProtocolVersion=6,s.prototype.getUrl=function(){return this.scheme+"//"+this.host+":"+this.port+"/v"+this.opts.requestProtocolVersion+".json"},s.prototype.getScheme=function(){return"ws:"},s.prototype.getPort=function(){return 6437},s.prototype.setBackground=function(t){this.opts.background=t,this.protocol&&this.protocol.sendBackground&&this.background!==this.opts.background&&(this.background=this.opts.background,this.protocol.sendBackground(this,this.opts.background))},s.prototype.setOptimizeHMD=function(t){this.opts.optimizeHMD=t,this.protocol&&this.protocol.sendOptimizeHMD&&this.optimizeHMD!==this.opts.optimizeHMD&&(this.optimizeHMD=this.opts.optimizeHMD,this.protocol.sendOptimizeHMD(this,this.opts.optimizeHMD))},s.prototype.handleOpen=function(){this.connected||(this.connected=!0,this.emit("connect"))},s.prototype.enableGestures=function(t){this.gesturesEnabled=t?!0:!1,this.send(this.protocol.encode({enableGestures:this.gesturesEnabled}))},s.prototype.handleClose=function(t,e){this.connected&&(this.disconnect(),1001===t&&this.opts.requestProtocolVersion>1&&(this.protocolVersionVerified?this.protocolVersionVerified=!1:this.opts.requestProtocolVersion--),this.startReconnection())},s.prototype.startReconnection=function(){var t=this;this.reconnectionTimer||(this.reconnectionTimer=setInterval(function(){t.reconnect()},500))},s.prototype.stopReconnection=function(){this.reconnectionTimer=clearInterval(this.reconnectionTimer)},s.prototype.disconnect=function(t){return t||this.stopReconnection(),this.socket?(this.socket.close(),delete this.socket,delete this.protocol,delete this.background,delete this.optimizeHMD,delete this.focusedState,this.connected&&(this.connected=!1,this.emit("disconnect")),!0):void 0},s.prototype.reconnect=function(){this.connected?this.stopReconnection():(this.disconnect(!0),this.connect())},s.prototype.handleData=function(t){var e,n=JSON.parse(t);void 0===this.protocol?(e=this.protocol=i(n),this.protocolVersionVerified=!0,this.emit("ready")):e=this.protocol(n),this.emit(e.type,e)},s.prototype.connect=function(){return this.socket?void 0:(this.socket=this.setupSocket(),!0)},s.prototype.send=function(t){this.socket.send(t)},s.prototype.reportFocus=function(t){this.connected&&this.focusedState!==t&&(this.focusedState=t,this.emit(this.focusedState?"focus":"blur"),this.protocol&&this.protocol.sendFocused&&this.protocol.sendFocused(this,this.focusedState))},r.extend(s.prototype,o.prototype)},{14:14,50:50,79:79}],67:[function(t,e,n){var i=e.exports=t(66),o=t(50),r=e.exports=function(t){i.call(this,t);var e=this;this.on("ready",function(){e.startFocusLoop()}),this.on("disconnect",function(){e.stopFocusLoop()})};o.extend(r.prototype,i.prototype),r.__proto__=i,r.prototype.useSecure=function(){return"https:"===location.protocol},r.prototype.getScheme=function(){return this.useSecure()?"wss:":"ws:"},r.prototype.getPort=function(){return this.useSecure()?6436:6437},r.prototype.setupSocket=function(){var t=this,e=new WebSocket(this.getUrl());return e.onopen=function(){t.handleOpen()},e.onclose=function(e){t.handleClose(e.code,e.reason)},e.onmessage=function(e){t.handleData(e.data)},e.onerror=function(e){t.useSecure()&&"wss:"===t.scheme&&(t.scheme="ws:",t.port=6437,t.disconnect(),t.connect())},e},r.prototype.startFocusLoop=function(){if(!this.focusDetectorTimer){var t=this,e=null;e="undefined"!=typeof document.hidden?"hidden":"undefined"!=typeof document.mozHidden?"mozHidden":"undefined"!=typeof document.msHidden?"msHidden":"undefined"!=typeof document.webkitHidden?"webkitHidden":void 0,void 0===t.windowVisible&&(t.windowVisible=void 0===e?!0:document[e]===!1);var n=window.addEventListener("focus",function(e){t.windowVisible=!0,o()}),i=window.addEventListener("blur",function(e){t.windowVisible=!1,o()});this.on("disconnect",function(){window.removeEventListener("focus",n),window.removeEventListener("blur",i)});var o=function(){var n=void 0===e?!0:document[e]===!1;t.reportFocus(n&&t.windowVisible)};o(),this.focusDetectorTimer=setInterval(o,100)}},r.prototype.stopFocusLoop=function(){this.focusDetectorTimer&&(clearTimeout(this.focusDetectorTimer),delete this.focusDetectorTimer)}},{50:50,66:66}],68:[function(t,e,n){var i=t(51),o=t(66),r=t(50),s=e.exports=function(t){o.call(this,t);var e=this;this.on("ready",function(){e.reportFocus(!0)})};r.extend(s.prototype,o.prototype),s.__proto__=o,s.prototype.setupSocket=function(){var t=this,e=new i(this.getUrl());return e.on("open",function(){t.handleOpen()}),e.on("message",function(e){t.handleData(e)}),e.on("close",function(e,n){t.handleClose(e,n)}),e.on("error",function(){t.startReconnection()}),e}},{50:50,51:51,66:66}],69:[function(t,e,n){(function(n){var i=t(72),o=t(74),r=t(78),s=t(71),a=t(65),u=t(77),c=t(14).EventEmitter,l=t(73).gestureListener,h=t(70),d=t(50),p=e.exports=function(e){var o="undefined"!=typeof n&&n.versions&&n.versions.node,r=this;e=d.defaults(e||{},{inNode:o}),this.inNode=e.inNode,e=d.defaults(e||{},{frameEventName:this.useAnimationLoop()?"animationFrame":"deviceFrame",suppressAnimationLoop:!this.useAnimationLoop(),loopWhileDisconnected:!0,useAllPlugins:!1,checkVersion:!0}),this.animationFrameRequested=!1,this.onAnimationFrame=function(t){r.lastConnectionFrame.valid&&r.emit("animationFrame",r.lastConnectionFrame),r.emit("frameEnd",t),r.loopWhileDisconnected&&(r.connection.focusedState!==!1||r.connection.opts.background)?window.requestAnimationFrame(r.onAnimationFrame):r.animationFrameRequested=!1},this.suppressAnimationLoop=e.suppressAnimationLoop,this.loopWhileDisconnected=e.loopWhileDisconnected,this.frameEventName=e.frameEventName,this.useAllPlugins=e.useAllPlugins,this.history=new a(200),this.lastFrame=i.Invalid,this.lastValidFrame=i.Invalid,this.lastConnectionFrame=i.Invalid,this.accumulatedGestures=[],this.checkVersion=e.checkVersion,void 0===e.connectionType?this.connectionType=t(this.inBrowser()?67:68):this.connectionType=e.connectionType,this.connection=new this.connectionType(e),this.streamingCount=0,this.devices={},this.plugins={},this._pluginPipelineSteps={},this._pluginExtendedMethods={},e.useAllPlugins&&this.useRegisteredPlugins(),this.setupFrameEvents(e),this.setupConnectionEvents(),this.startAnimationLoop()};p.prototype.gesture=function(t,e){var n=l(this,t);return void 0!==e&&n.stop(e),n},p.prototype.setBackground=function(t){return this.connection.setBackground(t),this},p.prototype.setOptimizeHMD=function(t){return this.connection.setOptimizeHMD(t),this},p.prototype.inBrowser=function(){return!this.inNode},p.prototype.useAnimationLoop=function(){return this.inBrowser()&&!this.inBackgroundPage()},p.prototype.inBackgroundPage=function(){return"undefined"!=typeof chrome&&chrome.extension&&chrome.extension.getBackgroundPage&&chrome.extension.getBackgroundPage()===window},p.prototype.connect=function(){return this.connection.connect(),this},p.prototype.streaming=function(){return this.streamingCount>0},p.prototype.connected=function(){return!!this.connection.connected},p.prototype.startAnimationLoop=function(){this.suppressAnimationLoop||this.animationFrameRequested||(this.animationFrameRequested=!0,window.requestAnimationFrame(this.onAnimationFrame))},p.prototype.disconnect=function(){return this.connection.disconnect(),this},p.prototype.frame=function(t){return this.history.get(t)||i.Invalid},p.prototype.loop=function(t){return t&&("function"==typeof t?this.on(this.frameEventName,t):this.setupFrameEvents(t)),this.connect()},p.prototype.addStep=function(t){this.pipeline||(this.pipeline=new u(this)),this.pipeline.addStep(t)},p.prototype.processFrame=function(t){t.gestures&&(this.accumulatedGestures=this.accumulatedGestures.concat(t.gestures)),this.lastConnectionFrame=t,this.startAnimationLoop(),this.emit("deviceFrame",t)},p.prototype.processFinishedFrame=function(t){if(this.lastFrame=t,t.valid&&(this.lastValidFrame=t),t.controller=this,t.historyIdx=this.history.push(t),t.gestures){t.gestures=this.accumulatedGestures,this.accumulatedGestures=[];for(var e=0;e!=t.gestures.length;e++)this.emit("gesture",t.gestures[e],t)}this.pipeline&&(t=this.pipeline.run(t),t||(t=i.Invalid)),this.emit("frame",t),this.emitHandEvents(t)},p.prototype.emitHandEvents=function(t){for(var e=0;e<t.hands.length;e++)this.emit("hand",t.hands[e])},p.prototype.setupFrameEvents=function(t){t.frame&&this.on("frame",t.frame),t.hand&&this.on("hand",t.hand)},p.prototype.setupConnectionEvents=function(){var t=this;this.connection.on("frame",function(e){t.processFrame(e)}),this.on(this.frameEventName,function(e){t.processFinishedFrame(e)});var e=function(){if(t.connection.opts.requestProtocolVersion<5&&0==t.streamingCount){t.streamingCount=1;var n={attached:!0,streaming:!0,type:"unknown",id:"Lx00000000000"};t.devices[n.id]=n,t.emit("deviceAttached",n),t.emit("deviceStreaming",n),t.emit("streamingStarted",n),t.connection.removeListener("frame",e)}},n=function(){if(t.streamingCount>0){for(var e in t.devices)t.emit("deviceStopped",t.devices[e]),t.emit("deviceRemoved",t.devices[e]);t.emit("streamingStopped",t.devices[e]),t.streamingCount=0;for(var e in t.devices)delete t.devices[e]}};this.connection.on("focus",function(){t.loopWhileDisconnected&&t.startAnimationLoop(),t.emit("focus")}),this.connection.on("blur",function(){t.emit("blur")}),this.connection.on("protocol",function(e){e.on("beforeFrameCreated",function(e){t.emit("beforeFrameCreated",e)}),e.on("afterFrameCreated",function(e,n){t.emit("afterFrameCreated",e,n)}),t.emit("protocol",e)}),this.connection.on("ready",function(){t.checkVersion&&!t.inNode&&t.checkOutOfDate(),t.emit("ready")}),this.connection.on("connect",function(){t.emit("connect"),t.connection.removeListener("frame",e),t.connection.on("frame",e)}),this.connection.on("disconnect",function(){t.emit("disconnect"),n()}),this.connection.on("deviceConnect",function(i){i.state?(t.emit("deviceConnected"),t.connection.removeListener("frame",e),t.connection.on("frame",e)):(t.emit("deviceDisconnected"),n())}),this.connection.on("deviceEvent",function(e){var n=e.state,i=t.devices[n.id],o={};for(var r in n)i&&i.hasOwnProperty(r)&&i[r]==n[r]||(o[r]=!0);t.devices[n.id]=n,o.attached&&t.emit(n.attached?"deviceAttached":"deviceRemoved",n),o.streaming&&(n.streaming?(t.streamingCount++,t.emit("deviceStreaming",n),1==t.streamingCount&&t.emit("streamingStarted",n),o.attached||t.emit("deviceConnected")):o.attached&&n.attached||(t.streamingCount--,t.emit("deviceStopped",n),0==t.streamingCount&&t.emit("streamingStopped",n),t.emit("deviceDisconnected")))}),this.on("newListener",function(t,e){("deviceConnected"==t||"deviceDisconnected"==t)&&console.warn(t+" events are depricated.  Consider using 'streamingStarted/streamingStopped' or 'deviceStreaming/deviceStopped' instead")})},p.prototype.checkOutOfDate=function(){console.assert(this.connection&&this.connection.protocol);var t=this.connection.protocol.serviceVersion,e=this.connection.protocol.version,n=this.connectionType.defaultProtocolVersion;return n>e?(console.warn("Your Protocol Version is v"+e+", this app was designed for v"+n),h.warnOutOfDate({sV:t,pV:e}),!0):!1},p._pluginFactories={},p.plugin=function(t,e){return this._pluginFactories[t]&&console.warn('Plugin "'+t+'" already registered'),this._pluginFactories[t]=e},p.plugins=function(){return d.keys(this._pluginFactories)};var f=function(t,e,n){-1!=["beforeFrameCreated","afterFrameCreated"].indexOf(e)?this.on(e,n):(this.pipeline||(this.pipeline=new u(this)),this._pluginPipelineSteps[t]||(this._pluginPipelineSteps[t]=[]),this._pluginPipelineSteps[t].push(this.pipeline.addWrappedStep(e,n)))},m=function(t,e,n){var a;switch(this._pluginExtendedMethods[t]||(this._pluginExtendedMethods[t]=[]),e){case"frame":a=i;break;case"hand":a=o;break;case"pointable":a=r,d.extend(s.prototype,n),d.extend(s.Invalid,n);break;case"finger":a=s;break;default:throw t+' specifies invalid object type "'+e+'" for prototypical extension'}d.extend(a.prototype,n),d.extend(a.Invalid,n),this._pluginExtendedMethods[t].push([a,n])};p.prototype.use=function(t,e){var n,i,o,r;if(i="function"==typeof t?t:p._pluginFactories[t],!i)throw"Leap Plugin "+t+" not found.";if(e||(e={}),this.plugins[t])return d.extend(this.plugins[t],e),this;this.plugins[t]=e,r=i.call(this,e);for(o in r)n=r[o],"function"==typeof n?f.call(this,t,o,n):m.call(this,t,o,n);return this},p.prototype.stopUsing=function(t){var e,n,i=this._pluginPipelineSteps[t],o=this._pluginExtendedMethods[t],r=0;if(this.plugins[t]){if(i)for(r=0;r<i.length;r++)this.pipeline.removeStep(i[r]);if(o)for(r=0;r<o.length;r++){e=o[r][0],n=o[r][1];for(var s in n)delete e.prototype[s],delete e.Invalid[s]}return delete this.plugins[t],this}},p.prototype.useRegisteredPlugins=function(){for(var t in p._pluginFactories)this.use(t)},d.extend(p.prototype,c.prototype)}).call(this,t(15))},{14:14,15:15,50:50,65:65,67:67,68:68,70:70,71:71,72:72,73:73,74:74,77:77,78:78}],70:[function(t,e,n){(function(t){var n=e.exports=function(t,e){this.options=e||{},this.message=t,this.createElement()};n.prototype.createElement=function(){this.element=document.createElement("div"),this.element.className="leapjs-dialog",this.element.style.position="fixed",this.element.style.top="8px",this.element.style.left=0,this.element.style.right=0,this.element.style.textAlign="center",this.element.style.zIndex=1e3;var t=document.createElement("div");this.element.appendChild(t),t.style.className="leapjs-dialog",t.style.display="inline-block",t.style.margin="auto",t.style.padding="8px",t.style.color="#222",t.style.background="#eee",t.style.borderRadius="4px",t.style.border="1px solid #999",t.style.textAlign="left",t.style.cursor="pointer",t.style.whiteSpace="nowrap",t.style.transition="box-shadow 1s linear",t.innerHTML=this.message,this.options.onclick&&t.addEventListener("click",this.options.onclick),this.options.onmouseover&&t.addEventListener("mouseover",this.options.onmouseover),this.options.onmouseout&&t.addEventListener("mouseout",this.options.onmouseout),this.options.onmousemove&&t.addEventListener("mousemove",this.options.onmousemove)},n.prototype.show=function(){return document.body.appendChild(this.element),this},n.prototype.hide=function(){return document.body.removeChild(this.element),this},n.warnOutOfDate=function(t){t||(t={});var e="http://developer.leapmotion.com?";t.returnTo=window.location.href;for(var i in t)e+=i+"="+encodeURIComponent(t[i])+"&";var o,r=function(t){if("leapjs-decline-upgrade"!=t.target.id){var n=window.open(e,"_blank","height=800,width=1000,location=1,menubar=1,resizable=1,status=1,toolbar=1,scrollbars=1");window.focus&&n.focus()}return o.hide(),!0},s="This site requires Leap Motion Tracking V2.<button id='leapjs-accept-upgrade'  style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 16px;'>Upgrade</button><button id='leapjs-decline-upgrade' style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 8px; '>Not Now</button>";return o=new n(s,{onclick:r,onmousemove:function(t){t.target==document.getElementById("leapjs-decline-upgrade")?(document.getElementById("leapjs-decline-upgrade").style.color="#000",document.getElementById("leapjs-decline-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-accept-upgrade").style.color="#444",document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"):(document.getElementById("leapjs-accept-upgrade").style.color="#000",document.getElementById("leapjs-accept-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-decline-upgrade").style.color="#444",document.getElementById("leapjs-decline-upgrade").style.boxShadow="none")},onmouseout:function(){document.getElementById("leapjs-decline-upgrade").style.color="#444",document.getElementById("leapjs-decline-upgrade").style.boxShadow="none",document.getElementById("leapjs-accept-upgrade").style.color="#444",document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"}}),o.show()},n.hasWarnedBones=!1,n.warnBones=function(){this.hasWarnedBones||(this.hasWarnedBones=!0,console.warn("Your Leap Service is out of date"),
"undefined"!=typeof t&&t.versions&&t.versions.node||this.warnOutOfDate({reason:"bones"}))}}).call(this,t(15))},{15:15}],71:[function(t,e,n){var i=t(78),o=t(64),r=t(70),s=t(50),a=e.exports=function(t){i.call(this,t),this.dipPosition=t.dipPosition,this.pipPosition=t.pipPosition,this.mcpPosition=t.mcpPosition,this.carpPosition=t.carpPosition,this.extended=t.extended,this.type=t.type,this.finger=!0,this.positions=[this.carpPosition,this.mcpPosition,this.pipPosition,this.dipPosition,this.tipPosition],t.bases?this.addBones(t):r.warnBones()};s.extend(a.prototype,i.prototype),a.prototype.addBones=function(t){this.metacarpal=new o(this,{type:0,width:this.width,prevJoint:this.carpPosition,nextJoint:this.mcpPosition,basis:t.bases[0]}),this.proximal=new o(this,{type:1,width:this.width,prevJoint:this.mcpPosition,nextJoint:this.pipPosition,basis:t.bases[1]}),this.medial=new o(this,{type:2,width:this.width,prevJoint:this.pipPosition,nextJoint:this.dipPosition,basis:t.bases[2]}),this.distal=new o(this,{type:3,width:this.width,prevJoint:this.dipPosition,nextJoint:t.btipPosition,basis:t.bases[3]}),this.bones=[this.metacarpal,this.proximal,this.medial,this.distal]},a.prototype.toString=function(){return"Finger [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"},a.Invalid={valid:!1}},{50:50,64:64,70:70,78:78}],72:[function(t,e,n){var i=t(74),o=t(78),r=t(73).createGesture,s=t(25),a=s.mat3,u=s.vec3,c=t(76),l=t(71),h=t(50),d=e.exports=function(t){if(this.valid=!0,this.id=t.id,this.timestamp=t.timestamp,this.hands=[],this.handsMap={},this.pointables=[],this.tools=[],this.fingers=[],t.interactionBox&&(this.interactionBox=new c(t.interactionBox)),this.gestures=[],this.pointablesMap={},this._translation=t.t,this._rotation=h.flatten(t.r),this._scaleFactor=t.s,this.data=t,this.type="frame",this.currentFrameRate=t.currentFrameRate,t.gestures)for(var e=0,n=t.gestures.length;e!=n;e++)this.gestures.push(r(t.gestures[e]));this.postprocessData(t)};d.prototype.postprocessData=function(t){t||(t=this.data);for(var e=0,n=t.hands.length;e!=n;e++){var r=new i(t.hands[e]);r.frame=this,this.hands.push(r),this.handsMap[r.id]=r}t.pointables=h.sortBy(t.pointables,function(t){return t.id});for(var s=0,a=t.pointables.length;s!=a;s++){var u=t.pointables[s],c=u.dipPosition?new l(u):new o(u);c.frame=this,this.addPointable(c)}},d.prototype.addPointable=function(t){if(this.pointables.push(t),this.pointablesMap[t.id]=t,(t.tool?this.tools:this.fingers).push(t),void 0!==t.handId&&this.handsMap.hasOwnProperty(t.handId)){var e=this.handsMap[t.handId];switch(e.pointables.push(t),(t.tool?e.tools:e.fingers).push(t),t.type){case 0:e.thumb=t;break;case 1:e.indexFinger=t;break;case 2:e.middleFinger=t;break;case 3:e.ringFinger=t;break;case 4:e.pinky=t}}},d.prototype.tool=function(t){var e=this.pointable(t);return e.tool?e:o.Invalid},d.prototype.pointable=function(t){return this.pointablesMap[t]||o.Invalid},d.prototype.finger=function(t){var e=this.pointable(t);return e.tool?o.Invalid:e},d.prototype.hand=function(t){return this.handsMap[t]||i.Invalid},d.prototype.rotationAngle=function(t,e){if(!this.valid||!t.valid)return 0;var n=this.rotationMatrix(t),i=.5*(n[0]+n[4]+n[8]-1),o=Math.acos(i);if(o=isNaN(o)?0:o,void 0!==e){var r=this.rotationAxis(t);o*=u.dot(r,u.normalize(u.create(),e))}return o},d.prototype.rotationAxis=function(t){return this.valid&&t.valid?u.normalize(u.create(),[this._rotation[7]-t._rotation[5],this._rotation[2]-t._rotation[6],this._rotation[3]-t._rotation[1]]):u.create()},d.prototype.rotationMatrix=function(t){if(!this.valid||!t.valid)return a.create();var e=a.transpose(a.create(),this._rotation);return a.multiply(a.create(),t._rotation,e)},d.prototype.scaleFactor=function(t){return this.valid&&t.valid?Math.exp(this._scaleFactor-t._scaleFactor):1},d.prototype.translation=function(t){return this.valid&&t.valid?u.subtract(u.create(),this._translation,t._translation):u.create()},d.prototype.toString=function(){var t="Frame [ id:"+this.id+" | timestamp:"+this.timestamp+" | Hand count:("+this.hands.length+") | Pointable count:("+this.pointables.length+")";return this.gestures&&(t+=" | Gesture count:("+this.gestures.length+")"),t+=" ]"},d.prototype.dump=function(){var t="";t+="Frame Info:<br/>",t+=this.toString(),t+="<br/><br/>Hands:<br/>";for(var e=0,n=this.hands.length;e!=n;e++)t+="  "+this.hands[e].toString()+"<br/>";t+="<br/><br/>Pointables:<br/>";for(var i=0,o=this.pointables.length;i!=o;i++)t+="  "+this.pointables[i].toString()+"<br/>";if(this.gestures){t+="<br/><br/>Gestures:<br/>";for(var r=0,s=this.gestures.length;r!=s;r++)t+="  "+this.gestures[r].toString()+"<br/>"}return t+="<br/><br/>Raw JSON:<br/>",t+=JSON.stringify(this.data)},d.Invalid={valid:!1,hands:[],fingers:[],tools:[],gestures:[],pointables:[],pointable:function(){return o.Invalid},finger:function(){return o.Invalid},hand:function(){return i.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return a.create()},rotationAxis:function(){return u.create()},scaleFactor:function(){return 1},translation:function(){return u.create()}}},{25:25,50:50,71:71,73:73,74:74,76:76,78:78}],73:[function(t,e,n){var i=t(25),o=i.vec3,r=t(14).EventEmitter,s=t(50),a=(n.createGesture=function(t){var e;switch(t.type){case"circle":e=new u(t);break;case"swipe":e=new c(t);break;case"screenTap":e=new l(t);break;case"keyTap":e=new h(t);break;default:throw"unknown gesture type"}return e.id=t.id,e.handIds=t.handIds.slice(),e.pointableIds=t.pointableIds.slice(),e.duration=t.duration,e.state=t.state,e.type=t.type,e},n.gestureListener=function(t,e){var n={},i={};t.on("gesture",function(t,o){if(t.type==e){if(("start"==t.state||"stop"==t.state)&&void 0===i[t.id]){var r=new a(t,o);i[t.id]=r,s.each(n,function(t,e){r.on(e,t)})}i[t.id].update(t,o),"stop"==t.state&&delete i[t.id]}});var o={start:function(t){return n.start=t,o},stop:function(t){return n.stop=t,o},complete:function(t){return n.stop=t,o},update:function(t){return n.update=t,o}};return o},n.Gesture=function(t,e){this.gestures=[t],this.frames=[e]});a.prototype.update=function(t,e){this.lastGesture=t,this.lastFrame=e,this.gestures.push(t),this.frames.push(e),this.emit(t.state,this)},a.prototype.translation=function(){return o.subtract(o.create(),this.lastGesture.startPosition,this.lastGesture.position)},s.extend(a.prototype,r.prototype);var u=function(t){this.center=t.center,this.normal=t.normal,this.progress=t.progress,this.radius=t.radius};u.prototype.toString=function(){return"CircleGesture ["+JSON.stringify(this)+"]"};var c=function(t){this.startPosition=t.startPosition,this.position=t.position,this.direction=t.direction,this.speed=t.speed};c.prototype.toString=function(){return"SwipeGesture ["+JSON.stringify(this)+"]"};var l=function(t){this.position=t.position,this.direction=t.direction,this.progress=t.progress};l.prototype.toString=function(){return"ScreenTapGesture ["+JSON.stringify(this)+"]"};var h=function(t){this.position=t.position,this.direction=t.direction,this.progress=t.progress};h.prototype.toString=function(){return"KeyTapGesture ["+JSON.stringify(this)+"]"}},{14:14,25:25,50:50}],74:[function(t,e,n){var i=t(78),o=t(64),r=t(25),s=r.mat3,a=r.vec3,u=t(50),c=e.exports=function(t){this.id=t.id,this.palmPosition=t.palmPosition,this.direction=t.direction,this.palmVelocity=t.palmVelocity,this.palmNormal=t.palmNormal,this.sphereCenter=t.sphereCenter,this.sphereRadius=t.sphereRadius,this.valid=!0,this.pointables=[],this.fingers=[],t.armBasis?this.arm=new o(this,{type:4,width:t.armWidth,prevJoint:t.elbow,nextJoint:t.wrist,basis:t.armBasis}):this.arm=null,this.tools=[],this._translation=t.t,this._rotation=u.flatten(t.r),this._scaleFactor=t.s,this.timeVisible=t.timeVisible,this.stabilizedPalmPosition=t.stabilizedPalmPosition,this.type=t.type,this.grabStrength=t.grabStrength,this.pinchStrength=t.pinchStrength,this.confidence=t.confidence};c.prototype.finger=function(t){var e=this.frame.finger(t);return e&&e.handId==this.id?e:i.Invalid},c.prototype.rotationAngle=function(t,e){if(!this.valid||!t.valid)return 0;var n=t.hand(this.id);if(!n.valid)return 0;var i=this.rotationMatrix(t),o=.5*(i[0]+i[4]+i[8]-1),r=Math.acos(o);if(r=isNaN(r)?0:r,void 0!==e){var s=this.rotationAxis(t);r*=a.dot(s,a.normalize(a.create(),e))}return r},c.prototype.rotationAxis=function(t){if(!this.valid||!t.valid)return a.create();var e=t.hand(this.id);return e.valid?a.normalize(a.create(),[this._rotation[7]-e._rotation[5],this._rotation[2]-e._rotation[6],this._rotation[3]-e._rotation[1]]):a.create()},c.prototype.rotationMatrix=function(t){if(!this.valid||!t.valid)return s.create();var e=t.hand(this.id);if(!e.valid)return s.create();var n=s.transpose(s.create(),this._rotation),i=s.multiply(s.create(),e._rotation,n);return i},c.prototype.scaleFactor=function(t){if(!this.valid||!t.valid)return 1;var e=t.hand(this.id);return e.valid?Math.exp(this._scaleFactor-e._scaleFactor):1},c.prototype.translation=function(t){if(!this.valid||!t.valid)return a.create();var e=t.hand(this.id);return e.valid?[this._translation[0]-e._translation[0],this._translation[1]-e._translation[1],this._translation[2]-e._translation[2]]:a.create()},c.prototype.toString=function(){return"Hand ("+this.type+") [ id: "+this.id+" | palm velocity:"+this.palmVelocity+" | sphere center:"+this.sphereCenter+" ] "},c.prototype.pitch=function(){return Math.atan2(this.direction[1],-this.direction[2])},c.prototype.yaw=function(){return Math.atan2(this.direction[0],-this.direction[2])},c.prototype.roll=function(){return Math.atan2(this.palmNormal[0],-this.palmNormal[1])},c.Invalid={valid:!1,fingers:[],tools:[],pointables:[],left:!1,pointable:function(){return i.Invalid},finger:function(){return i.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return s.create()},rotationAxis:function(){return a.create()},scaleFactor:function(){return 1},translation:function(){return a.create()}}},{25:25,50:50,64:64,78:78}],75:[function(t,e,n){e.exports={Controller:t(69),Frame:t(72),Gesture:t(73),Hand:t(74),Pointable:t(78),Finger:t(71),InteractionBox:t(76),CircularBuffer:t(65),UI:t(80),JSONProtocol:t(79).JSONProtocol,glMatrix:t(25),mat3:t(25).mat3,vec3:t(25).vec3,loopController:void 0,version:t(83),_:t(50),EventEmitter:t(14).EventEmitter,loop:function(t,e){return t&&void 0===e&&"[object Function]"==={}.toString.call(t)&&(e=t,t={}),this.loopController?t&&this.loopController.setupFrameEvents(t):this.loopController=new this.Controller(t),this.loopController.loop(e),this.loopController},plugin:function(t,e){this.Controller.plugin(t,e)}}},{14:14,25:25,50:50,65:65,69:69,71:71,72:72,73:73,74:74,76:76,78:78,79:79,80:80,83:83}],76:[function(t,e,n){var i=t(25),o=i.vec3,r=e.exports=function(t){this.valid=!0,this.center=t.center,this.size=t.size,this.width=t.size[0],this.height=t.size[1],this.depth=t.size[2]};r.prototype.denormalizePoint=function(t){return o.fromValues((t[0]-.5)*this.size[0]+this.center[0],(t[1]-.5)*this.size[1]+this.center[1],(t[2]-.5)*this.size[2]+this.center[2])},r.prototype.normalizePoint=function(t,e){var n=o.fromValues((t[0]-this.center[0])/this.size[0]+.5,(t[1]-this.center[1])/this.size[1]+.5,(t[2]-this.center[2])/this.size[2]+.5);return e&&(n[0]=Math.min(Math.max(n[0],0),1),n[1]=Math.min(Math.max(n[1],0),1),n[2]=Math.min(Math.max(n[2],0),1)),n},r.prototype.toString=function(){return"InteractionBox [ width:"+this.width+" | height:"+this.height+" | depth:"+this.depth+" ]"},r.Invalid={valid:!1}},{25:25}],77:[function(t,e,n){var i=e.exports=function(t){this.steps=[],this.controller=t};i.prototype.addStep=function(t){this.steps.push(t)},i.prototype.run=function(t){for(var e=this.steps.length,n=0;n!=e&&t;n++)t=this.steps[n](t);return t},i.prototype.removeStep=function(t){var e=this.steps.indexOf(t);if(-1===e)throw"Step not found in pipeline";this.steps.splice(e,1)},i.prototype.addWrappedStep=function(t,e){var n=this.controller,i=function(i){var o,r,s;for(o="frame"==t?[i]:i[t+"s"]||[],r=0,s=o.length;s>r;r++)e.call(n,o[r]);return i};return this.addStep(i),i}},{}],78:[function(t,e,n){var i=t(25),o=(i.vec3,e.exports=function(t){this.valid=!0,this.id=t.id,this.handId=t.handId,this.length=t.length,this.tool=t.tool,this.width=t.width,this.direction=t.direction,this.stabilizedTipPosition=t.stabilizedTipPosition,this.tipPosition=t.tipPosition,this.tipVelocity=t.tipVelocity,this.touchZone=t.touchZone,this.touchDistance=t.touchDistance,this.timeVisible=t.timeVisible});o.prototype.toString=function(){return"Pointable [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"},o.prototype.hand=function(){return this.frame.hand(this.handId)},o.Invalid={valid:!1}},{25:25}],79:[function(t,e,n){var i=t(72),o=(t(74),t(78),t(71),t(50)),r=t(14).EventEmitter,s=function(t){this.type=t.type,this.state=t.state};n.chooseProtocol=function(t){var e;switch(t.version){case 1:case 2:case 3:case 4:case 5:case 6:e=a(t),e.sendBackground=function(t,n){t.send(e.encode({background:n}))},e.sendFocused=function(t,n){t.send(e.encode({focused:n}))},e.sendOptimizeHMD=function(t,n){t.send(e.encode({optimizeHMD:n}))};break;default:throw"unrecognized version"}return e};var a=n.JSONProtocol=function(t){var e=function(t){if(t.event)return new s(t.event);e.emit("beforeFrameCreated",t);var n=new i(t);return e.emit("afterFrameCreated",n,t),n};return e.encode=function(t){return JSON.stringify(t)},e.version=t.version,e.serviceVersion=t.serviceVersion,e.versionLong="Version "+t.version,e.type="protocol",o.extend(e,r.prototype),e}},{14:14,50:50,71:71,72:72,74:74,78:78}],80:[function(t,e,n){n.UI={Region:t(82),Cursor:t(81)}},{81:81,82:82}],81:[function(t,e,n){e.exports=function(){return function(t){var e=t.pointables.sort(function(t,e){return t.z-e.z})[0];return e&&e.valid&&(t.cursorPosition=e.tipPosition),t}}},{}],82:[function(t,e,n){var i=t(14).EventEmitter,o=t(50),r=e.exports=function(t,e){this.start=new Vector(t),this.end=new Vector(e),this.enteredFrame=null};r.prototype.hasPointables=function(t){for(var e=0;e!=t.pointables.length;e++){var n=t.pointables[e].tipPosition;if(n.x>=this.start.x&&n.x<=this.end.x&&n.y>=this.start.y&&n.y<=this.end.y&&n.z>=this.start.z&&n.z<=this.end.z)return!0}return!1},r.prototype.listener=function(t){var e=this;return t&&t.nearThreshold&&this.setupNearRegion(t.nearThreshold),function(t){return e.updatePosition(t)}},r.prototype.clipper=function(){var t=this;return function(e){return t.updatePosition(e),t.enteredFrame?e:null}},r.prototype.setupNearRegion=function(t){var e=this.nearRegion=new r([this.start.x-t,this.start.y-t,this.start.z-t],[this.end.x+t,this.end.y+t,this.end.z+t]),n=this;e.on("enter",function(t){n.emit("near",t)}),e.on("exit",function(t){n.emit("far",t)}),n.on("exit",function(t){n.emit("near",t)})},r.prototype.updatePosition=function(t){return this.nearRegion&&this.nearRegion.updatePosition(t),this.hasPointables(t)&&null==this.enteredFrame?(this.enteredFrame=t,this.emit("enter",this.enteredFrame)):this.hasPointables(t)||null==this.enteredFrame||(this.enteredFrame=null,this.emit("exit",this.enteredFrame)),t},r.prototype.normalize=function(t){return new Vector([(t.x-this.start.x)/(this.end.x-this.start.x),(t.y-this.start.y)/(this.end.y-this.start.y),(t.z-this.start.z)/(this.end.z-this.start.z)])},r.prototype.mapToXY=function(t,e,n){var i=this.normalize(t),o=i.x,r=i.y;return o>1?o=1:-1>o&&(o=-1),r>1?r=1:-1>r&&(r=-1),[(o+1)/2*e,(1-r)/2*n,i.z]},o.extend(r.prototype,i.prototype)},{14:14,50:50}],83:[function(t,e,n){e.exports={full:"0.6.4",major:0,minor:6,dot:4}},{}]},{},[54]);